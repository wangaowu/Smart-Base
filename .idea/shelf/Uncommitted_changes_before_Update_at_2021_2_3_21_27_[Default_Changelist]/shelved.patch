Index: app/src/main/res/layout/attr_table_row_audio_wav.xml
===================================================================
--- app/src/main/res/layout/attr_table_row_audio_wav.xml	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
+++ app/src/main/res/layout/attr_table_row_audio_wav.xml	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
@@ -1,62 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<!--
-  ~ Copyright (C) 2021 xuexiangjys(xuexiangjys@163.com)
-  ~
-  ~ Licensed under the Apache License, Version 2.0 (the "License");
-  ~ you may not use this file except in compliance with the License.
-  ~ You may obtain a copy of the License at
-  ~
-  ~       http://www.apache.org/licenses/LICENSE-2.0
-  ~
-  ~ Unless required by applicable law or agreed to in writing, software
-  ~ distributed under the License is distributed on an "AS IS" BASIS,
-  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-  ~ See the License for the specific language governing permissions and
-  ~ limitations under the License.
-  ~
-  -->
-
-<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
-    android:layout_width="match_parent"
-    android:layout_height="wrap_content"
-    xmlns:app="http://schemas.android.com/apk/res-auto"
-    android:layout_centerHorizontal="true"
-    android:orientation="vertical">
-
-    <LinearLayout
-        android:layout_width="match_parent"
-        android:layout_height="wrap_content"
-        android:orientation="horizontal"
-        android:padding="@dimen/dp_10"
-        >
-        <TextView
-            android:layout_height="@dimen/dp_50"
-            android:layout_width="@dimen/dp_65"
-            android:layout_gravity="fill_horizontal"
-            android:textSize="@dimen/dp_20"
-            android:gravity="center_vertical"
-            android:text="语音："/>
-        <SeekBar
-            android:id="@+id/progressBar"
-            android:layout_weight="8"
-            android:layout_width="@dimen/default_width_use_weight"
-            android:layout_height="wrap_content"
-            android:layout_marginStart="@dimen/dp_10"
-            android:layout_marginTop="@dimen/dp_16"
-            android:layout_marginEnd="@dimen/dp_10"
-            />
-        <com.xuexiang.xui.widget.button.roundbutton.RoundButton
-            style="@style/app_round_30_blue_button"
-            android:id="@+id/btn_bf_wav"
-            android:text=""
-            android:layout_width="@dimen/dp_40"
-            android:layout_height="@dimen/dp_40"
-            android:layout_margin="@dimen/dp_10" />
-    </LinearLayout>
-
-
-
-</LinearLayout>
-
-
-
Index: app/src/main/java/com/bytemiracle/project/fragment/MindSemantemeFragment.java
===================================================================
--- app/src/main/java/com/bytemiracle/project/fragment/MindSemantemeFragment.java	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
+++ app/src/main/java/com/bytemiracle/project/fragment/MindSemantemeFragment.java	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
@@ -1,314 +0,0 @@
-package com.bytemiracle.project.fragment;
-
-import android.graphics.Bitmap;
-import android.graphics.BitmapFactory;
-import android.graphics.Color;
-import android.graphics.drawable.BitmapDrawable;
-import android.graphics.drawable.Drawable;
-import android.view.KeyEvent;
-import android.view.View;
-import android.view.ViewGroup;
-import android.view.inputmethod.EditorInfo;
-import android.widget.Button;
-import android.widget.EditText;
-import android.widget.ImageButton;
-import android.widget.ImageView;
-import android.widget.LinearLayout;
-import android.widget.TextView;
-
-import com.bytemiracle.project.R;
-import com.bytemiracle.project.adapter.MyTabAdapter;
-import com.bytemiracle.project.bean.MenuBean;
-import com.bytemiracle.project.bean.SysZnyy;
-import com.bytemiracle.project.bean.SysZnyyType;
-import com.bytemiracle.project.core.BaseFragment;
-import com.bytemiracle.project.core.framework.listener.QuickListListener;
-import com.bytemiracle.project.core.framework.utils.AppTextUtil;
-import com.bytemiracle.project.core.framework.utils.BitmapWrapper;
-import com.bytemiracle.project.core.framework.utils.ListUtils;
-import com.bytemiracle.project.core.framework.utils.QuickAdapter;
-import com.bytemiracle.project.core.framework.utils.QuickList;
-import com.bytemiracle.project.core.framework.view.BaseCheckPojo;
-import com.bytemiracle.project.greendao.DaoSession;
-import com.bytemiracle.project.greendao.SysZnyyDao;
-import com.bytemiracle.project.greendao.SysZnyyTypeDao;
-import com.bytemiracle.project.utils.DateFormatUtil;
-import com.bytemiracle.project.utils.TablayoutUtil;
-import com.bytemiracle.project.utils.db.GreenDaoManager;
-import com.bytemiracle.project.widget.AddAudioDialog;
-import com.bytemiracle.project.widget.AddAudioTypeDialog;
-import com.scwang.smartrefresh.layout.adapter.SmartViewHolder;
-import com.xuexiang.xpage.annotation.Page;
-import com.xuexiang.xui.adapter.simple.AdapterItem;
-import com.xuexiang.xui.adapter.simple.XUISimpleAdapter;
-import com.xuexiang.xui.widget.edittext.MultiLineEditText;
-import com.xuexiang.xui.widget.popupwindow.popup.XUISimplePopup;
-import com.xuexiang.xui.widget.tabbar.VerticalTabLayout;
-import com.yanzhenjie.recyclerview.SwipeRecyclerView;
-
-import org.greenrobot.greendao.query.QueryBuilder;
-import org.greenrobot.greendao.query.WhereCondition;
-
-import java.util.ArrayList;
-import java.util.Collections;
-import java.util.Date;
-import java.util.List;
-
-import butterknife.BindView;
-
-;
-
-@Page(name = "智能语意")
-public class MindSemantemeFragment extends BaseFragment {
-    private static final String TAG = "MindSemantemeFragment";
-    /**
-     * 最多显示类型数量
-     */
-    private static final int MAX_TYPE_COUNT = 6;
-
-    @BindView(R.id.noteType_layout)
-    VerticalTabLayout noteTypeLayout;
-    @BindView(R.id.audio)
-    LinearLayout audio;
-    @BindView(R.id.mindsemanteme_Fragment)
-    LinearLayout mindsemantemeFragment;
-    @BindView(R.id.audioAddBtn)
-    Button audioAddBtn;
-    @BindView(R.id.rv_audio)
-    SwipeRecyclerView rvAudio;
-    @BindView(R.id.detail_title)
-    TextView detail_title;
-    @BindView(R.id.detail_content)
-    TextView detail_content;
-    @BindView(R.id.detail_createTime)
-    TextView detail_createTime;
-    @BindView(R.id.audio_types)
-    View audio_types;
-    @BindView(R.id.audio_edit_btn)
-    View audio_edit_btn;
-    @BindView(R.id.iv_search)
-    ImageButton ivSearch;
-    @BindView(R.id.audioKey)
-    EditText audioKey;
-
-    private SysZnyyDao sysZnyyDao;
-    private SysZnyyTypeDao sysZnyyTypeDao;
-    private DaoSession daoSession;
-    private QuickAdapter audioListAdapter;
-
-
-    @Override
-    protected int getLayoutId() {
-        return R.layout.fragment_mindsemanteme;
-    }
-
-    @Override
-    protected boolean showTitleBar() {
-        return true;
-    }
-
-    @Override
-    protected void initViews() {
-        List<MenuBean> menus = new ArrayList<>();
-        Collections.addAll(menus,
-                new MenuBean(R.drawable.audio, R.drawable.audio, ""));
-        noteTypeLayout.setTabAdapter(new MyTabAdapter(menus));
-        List<LinearLayout> layouts = new ArrayList<>();
-        Collections.addAll(layouts, audio);
-        TablayoutUtil.setSelectedListener(noteTypeLayout, layouts);
-        bindAddFun(audioAddBtn, 1);
-
-        //初始化录音数据
-        List<SysZnyy> sysZnyyList = queryAllSysZnyys();
-        if (sysZnyyList != null && sysZnyyList.size() > 0) {
-            setCurrentSysZnyyDetail(sysZnyyList.get(0));
-        }
-        initAudioListView();
-        BaseCheckPojo.checkedSingleItem(sysZnyyList, 0);
-        updateAudioListView(sysZnyyList);
-
-        audio_types.setOnClickListener(new View.OnClickListener() {
-            @Override
-            public void onClick(View v) {
-                showSelectCategoryWindow(v);
-            }
-        });
-
-        //设置搜索相关功能
-        audioKey.setOnEditorActionListener(new TextView.OnEditorActionListener() {
-            @Override
-            public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
-                if (actionId == EditorInfo.IME_ACTION_SEARCH) {
-                    List<SysZnyy> sysZnyys = queryZnyyList(SysZnyyDao.Properties.Title.like("%" + audioKey.getText().toString() + "%"));
-                    audioListAdapter.refresh(sysZnyys);
-                    return true;
-                }
-                return false;
-            }
-        });
-        ivSearch.setOnClickListener(new View.OnClickListener() {
-            @Override
-            public void onClick(View v) {
-                List<SysZnyy> sysZnyys = queryZnyyList(SysZnyyDao.Properties.Title.like("%" + audioKey.getText().toString() + "%"));
-                audioListAdapter.refresh(sysZnyys);
-            }
-        });
-
-        //设置编辑相关功能audio_edit_btn
-        audio_edit_btn.setOnClickListener(new View.OnClickListener() {
-            @Override
-            public void onClick(View v) {
-                AddAudioDialog edit = AddAudioDialog.getInstance();
-                List<SysZnyy> sysZnyys = queryZnyyList(SysZnyyDao.Properties.Title.eq(detail_title.getText()));
-                if (sysZnyys != null) {
-                    SysZnyy thisZnyy = sysZnyys.get(0);
-                    edit.createAudio("编辑", 0.85, 0.8,
-                            thisZnyy.getId(), data -> {
-                                audioListAdapter.refresh(data);
-                            });
-                    TextView title = edit.getTitle();
-                    title.setText(thisZnyy.getTitle());
-                    MultiLineEditText con = AddAudioDialog.content;
-                    con.setContentText(thisZnyy.getContent());
-                    //获取音频文件路径
-                    List<String> audioList = thisZnyy.getAudioPaths();
-                    edit.addAudioData(audioList);
-                    //edit.initAudioFile(AudioFileFunc.getWavFilePath());
-                }
-            }
-        });
-    }
-
-    private List<SysZnyyType> querySysZnyyTypes() {
-        List<SysZnyyType> sysZnyyTypeList = sysZnyyTypeDao.loadAll();
-        SysZnyyType sysZnyyType = new SysZnyyType();
-        sysZnyyType.setCreateTime(DateFormatUtil.dateConverString(new Date()));
-        sysZnyyType.setCode("00");
-        sysZnyyType.setName("新建");
-        sysZnyyTypeList.add(sysZnyyType);
-        return sysZnyyTypeList;
-    }
-
-    private void showSelectCategoryWindow(View v) {
-        List<SysZnyyType> sysZnyyTypeList = querySysZnyyTypes();
-        int itemHeight = getResources().getDimensionPixelSize(R.dimen.dpx_40);
-        int maxShowCount = sysZnyyTypeList.size() > MAX_TYPE_COUNT ? MAX_TYPE_COUNT : sysZnyyTypeList.size();
-        XUISimplePopup mListPopup = new XUISimplePopup(getContext(), createTypes(sysZnyyTypeList))
-                .create(maxShowCount * itemHeight, new XUISimplePopup.OnPopupItemClickListener() {
-                    @Override
-                    public void onItemClick(XUISimpleAdapter adapter, AdapterItem item, int position) {
-                        String thisTitle = item.getTitle().toString();
-                        if ("新建".equals(thisTitle)) {
-                            AddAudioTypeDialog.getInstance().createAudioType();
-                        } else {
-                            //设置关联性
-                            List<SysZnyy> sysZnyys = queryZnyyList(SysZnyyDao.Properties.Title.eq(detail_title.getText()));
-                            if (!ListUtils.isEmpty(sysZnyys)) {
-                                SysZnyy curSysZnyy = sysZnyys.get(0);
-                                curSysZnyy.setType(thisTitle);
-                                sysZnyyDao.update(curSysZnyy);
-                            }
-                            updateAudioListView(queryAllSysZnyys());
-                        }
-
-                    }
-                })
-                .setHasDivider(true);
-        mListPopup.getAdapter().setPaddingLeftPx(getResources().getDimensionPixelSize(R.dimen.dpx_10));
-        mListPopup.showDown(v);
-    }
-
-    private List<SysZnyy> queryAllSysZnyys() {
-        daoSession = GreenDaoManager.getInstance().getDaoSession();
-        sysZnyyDao = daoSession.getSysZnyyDao();
-        sysZnyyTypeDao = daoSession.getSysZnyyTypeDao();
-        return sysZnyyDao.loadAll();
-    }
-
-    private void initAudioListView() {
-        audioListAdapter = QuickList.instance().adapter(rvAudio, R.layout.item_znyy_audio_layout, null, new QuickListListener<SysZnyy>() {
-            @Override
-            public void onBindItem(QuickAdapter<SysZnyy> adapter, SmartViewHolder holder, SysZnyy item) {
-                holder.text(R.id.createTime, AppTextUtil.buildDateTime(item.getCreateTime()));
-                holder.text(R.id.title, item.getTitle());
-                ImageView ivType = holder.findViewById(R.id.type);
-                if (item.getType() == null) {
-                    BitmapWrapper.quickApply(ivType, R.drawable.ic_audio, getContext().getColor(R.color.colorBlue));
-                } else {
-                    List<SysZnyyType> sysZnyyTypeList = queryZnyyTypeList(SysZnyyTypeDao.Properties.Name.eq(item.getType()));
-                    if (sysZnyyTypeList != null) {
-                        SysZnyyType znyyType = sysZnyyTypeList.get(0);
-                        BitmapWrapper.quickApply(ivType, R.drawable.ic_audio, znyyType.getCssColor());
-                    }
-                }
-                int backgroundColor = item.isChecked() ? getContext().getColor(R.color.app_common_focus_gray) : Color.TRANSPARENT;
-                ((ViewGroup) holder.itemView).getChildAt(0).setBackgroundColor(backgroundColor);
-            }
-
-            @Override
-            public void onClickItem(QuickAdapter<SysZnyy> adapter, SysZnyy item) {
-                BaseCheckPojo.checkedSingleItem(adapter.getListData(), adapter.getListData().indexOf(item));
-                adapter.notifyDataSetChanged();
-                setCurrentSysZnyyDetail(item);
-            }
-        });
-    }
-
-    private void updateAudioListView(List<SysZnyy> sysZnyyList) {
-        audioListAdapter.getListData().clear();
-        audioListAdapter.getListData().addAll(sysZnyyList);
-        audioListAdapter.notifyDataSetChanged();
-    }
-
-    private List<SysZnyy> queryZnyyList(WhereCondition condition) {
-        QueryBuilder<SysZnyy> qb = daoSession.queryBuilder(SysZnyy.class);
-        QueryBuilder<SysZnyy> queryBuilder = qb.where(condition);
-        return queryBuilder.list();
-    }
-
-    private List<SysZnyyType> queryZnyyTypeList(WhereCondition condition) {
-        QueryBuilder<SysZnyyType> qb = daoSession.queryBuilder(SysZnyyType.class);
-        QueryBuilder<SysZnyyType> queryBuilder = qb.where(condition);
-        return queryBuilder.list();
-    }
-
-    public AdapterItem[] createTypes(List<SysZnyyType> sysZnyyTypeList) {
-        AdapterItem[] adapterItems = new AdapterItem[sysZnyyTypeList.size()];
-        for (int i = 0; i < sysZnyyTypeList.size(); i++) {
-            SysZnyyType type = sysZnyyTypeList.get(i);
-            if ("新建".equals(type.getName())) {
-                Drawable createNewFlag = getResources().getDrawable(R.drawable.ic_znyy_category_create);
-                adapterItems[i] = new AdapterItem(type.getName(), createNewFlag);
-                continue;
-            }
-            if (type.getCssColor() != null) {
-                Bitmap srcBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.ic_znyy_category_flag);
-                Drawable resultTag = new BitmapDrawable(getResources(), new BitmapWrapper(srcBitmap).replaceColor(type.getCssColor()));
-                adapterItems[i] = new AdapterItem(type.getName(), resultTag);
-            }
-        }
-        return adapterItems;
-    }
-
-    private void setCurrentSysZnyyDetail(SysZnyy value) {
-        detail_title.setText(value.getTitle());
-        detail_content.setText(value.getContent());
-        detail_createTime.setText("更新时间:" + value.getCreateTime());
-    }
-
-    private void bindAddFun(Button addButton, Integer type) {
-        //设置搜索按钮的样式
-        addButton.setOnClickListener(new View.OnClickListener() {
-            @Override
-            public void onClick(View v) {
-                switch (type) {
-                    case 1:
-                        AddAudioDialog.getInstance().createAudio("新建", 0.7, 0.7,
-                                null, data -> audioListAdapter.refresh(data));
-                }
-            }
-        });
-    }
-
-
-}
Index: app/src/main/java/com/bytemiracle/project/widget/AddAudioDialog.java
===================================================================
--- app/src/main/java/com/bytemiracle/project/widget/AddAudioDialog.java	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
+++ app/src/main/java/com/bytemiracle/project/widget/AddAudioDialog.java	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
@@ -1,917 +0,0 @@
-/*
- * Copyright (C) 2020 xuexiangjys(xuexiangjys@163.com)
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *       http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- *
- */
-
-package com.bytemiracle.project.widget;
-
-import android.media.MediaPlayer;
-import android.media.MediaRecorder;
-import android.os.Bundle;
-import android.os.Environment;
-import android.util.DisplayMetrics;
-import android.util.Log;
-import android.view.Gravity;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup;
-import android.view.Window;
-import android.view.WindowManager;
-import android.widget.Button;
-import android.widget.LinearLayout;
-import android.widget.ListAdapter;
-import android.widget.ListView;
-import android.widget.SeekBar;
-import android.widget.TextView;
-import android.widget.Toast;
-
-import com.bytemiracle.project.R;
-import com.bytemiracle.project.bean.AudioFileFunc;
-import com.bytemiracle.project.bean.SysZnyy;
-import com.bytemiracle.project.core.framework.listener.CommonAsyncListener;
-import com.bytemiracle.project.core.framework.utils.ListUtils;
-import com.bytemiracle.project.core.framework.view.indicator.Indicator;
-import com.bytemiracle.project.core.framework.view.indicator.IndicatorTextView;
-import com.bytemiracle.project.greendao.DaoSession;
-import com.bytemiracle.project.greendao.SysZnyyDao;
-import com.bytemiracle.project.rtasr.RTASRUtils;
-import com.bytemiracle.project.utils.AudioRecordFunc;
-import com.bytemiracle.project.utils.DateFormatUtil;
-import com.bytemiracle.project.utils.FileUtil;
-import com.bytemiracle.project.utils.JsonParser;
-import com.bytemiracle.project.utils.ReDrawBtnIcon;
-import com.bytemiracle.project.utils.db.GreenDaoManager;
-import com.iflytek.cloud.InitListener;
-import com.iflytek.cloud.RecognizerListener;
-import com.iflytek.cloud.RecognizerResult;
-import com.iflytek.cloud.SpeechConstant;
-import com.iflytek.cloud.SpeechError;
-import com.iflytek.cloud.SpeechRecognizer;
-import com.iflytek.cloud.SpeechSynthesizer;
-import com.iflytek.cloud.SpeechUtility;
-import com.iflytek.cloud.SynthesizerListener;
-import com.iflytek.cloud.ui.RecognizerDialog;
-import com.iflytek.cloud.ui.RecognizerDialogListener;
-import com.scwang.smartrefresh.layout.adapter.SmartRecyclerAdapter;
-import com.scwang.smartrefresh.layout.adapter.SmartViewHolder;
-import com.xuexiang.xpage.base.XPageActivity;
-import com.xuexiang.xui.widget.button.roundbutton.RoundButton;
-import com.xuexiang.xui.widget.dialog.materialdialog.MaterialDialog;
-import com.xuexiang.xui.widget.edittext.MultiLineEditText;
-import com.xuexiang.xui.widget.spinner.materialspinner.MaterialSpinner;
-
-import org.json.JSONException;
-import org.json.JSONObject;
-
-import java.io.IOException;
-import java.util.ArrayList;
-import java.util.Date;
-import java.util.HashMap;
-import java.util.LinkedHashMap;
-import java.util.List;
-import java.util.Timer;
-import java.util.TimerTask;
-
-public class AddAudioDialog implements View.OnClickListener {
-
-
-    //存放语音文件
-    private List<String> audioPath;
-
-    //存放听写分析结果文本
-    private static HashMap<String, String> mIatResults = new LinkedHashMap<>();
-
-    private Button btn_startspeech;  //初始化控件
-
-    private RoundButton btn_contentSpeech;
-
-    private Button btn_startspeektext;
-
-    private RoundButton btn_bf;
-
-    private RoundButton btn_save;
-
-    private TextView title;
-
-    private DaoSession daoSession;
-
-    private SysZnyyDao sysZnyyDao;
-
-    private RoundButton btn_clear;
-
-    private SpeakDialog speakDialog = SpeakDialog.getInstance();
-
-
-    private AudioRecordFunc audioRecordFunc;
-
-    LinearLayout audio;
-
-    private RecognizerDialog mDialog;
-
-    private MaterialSpinner typeItems;
-
-    private static SpeechRecognizer mIat;
-
-
-    private SeekBar seekBar;
-
-    private ListView audio_list;
-
-    private Toast mToast;
-
-
-    private RoundButton speak_btn, stoptrecording;
-    private MediaRecorder recorder;
-    private StringBuilder voicePath = new StringBuilder();
-
-    private static int index;
-
-
-    private static ArrayList<byte[]> bytes;
-
-    public static MultiLineEditText content;
-    private CommonAsyncListener<List<SysZnyy>> onDataChangeListener;
-
-    public TextView getTitle() {
-        return title;
-    }
-
-    public static MultiLineEditText getContent() {
-        return content;
-    }
-
-    public ListView getAudio_list() {
-        return audio_list;
-    }
-
-    MaterialDialog dialog;
-
-
-    private static String path = Environment.getExternalStorageDirectory() + "/智能语意/audio_" + System.currentTimeMillis() + ".wav";
-    private long time;
-
-
-    private TextView et_input;
-
-
-    private static AddAudioDialog addAudioDialog;
-
-    public static AddAudioDialog getInstance() {
-        if (addAudioDialog == null)
-            addAudioDialog = new AddAudioDialog();
-        return addAudioDialog;
-    }
-
-    private void initView(View v) {
-        //setContentView(R.layout.activity_main) ;
-    }
-
-    public void createAudio(String tapTitle, double width, double height, Long oldId, CommonAsyncListener<List<SysZnyy>> onDataChangeListener) {
-        this.onDataChangeListener = onDataChangeListener;
-        this.audioPath = new ArrayList<>();
-
-        LayoutInflater mInflater = LayoutInflater.from(XPageActivity.getTopActivity());
-        View view = mInflater.inflate(R.layout.dialog_add_audio, null);
-
-        IndicatorTextView title_tap = view.findViewById(R.id.title_tap);
-        IndicatorTextView content_tap = view.findViewById(R.id.content_tap);
-        int redValue = XPageActivity.getTopActivity().getColor(R.color.app_common_dark_red);
-        Indicator indicatorConfig = new Indicator.Build().color(redValue).configType(Indicator.Type.STAR).padding(0).create();
-        title_tap.showIndicator(indicatorConfig);
-        content_tap.showIndicator(indicatorConfig);
-
-        daoSession = GreenDaoManager.getInstance().getDaoSession();
-        sysZnyyDao = daoSession.getSysZnyyDao();
-        initView(view);
-        //SpeechUtility.createUtility(MyActivity.GetActivity().getMainActivity(), SpeechConstant.APPID + "5fec4074");
-        // 语音配置对象初始化
-        SpeechUtility.createUtility(view.getContext(), SpeechConstant.APPID + "=5fec4074");
-
-        mToast = Toast.makeText(view.getContext(), "", Toast.LENGTH_SHORT);
-        dialog = new MaterialDialog.Builder(XPageActivity.getTopActivity())
-                .customView(view, true)
-                .title(tapTitle)
-                .show();
-        dialog.setCanceledOnTouchOutside(false);
-        Window window = dialog.getWindow();
-        if (window != null) {
-            // 一定要设置Background，如果不设置，window属性设置无效
-            DisplayMetrics dm = new DisplayMetrics();
-            if (XPageActivity.getTopActivity() != null) {
-                WindowManager windowManager = XPageActivity.getTopActivity().getWindowManager();
-                if (windowManager != null) {
-                    windowManager.getDefaultDisplay().getMetrics(dm);
-                    window.setLayout((int) (dm.widthPixels * width), (int) (dm.heightPixels * height));
-                    WindowManager.LayoutParams params = window.getAttributes();
-                    params.gravity = Gravity.CENTER;
-                    window.setAttributes(params);
-                }
-            }
-        }
-
-
-        et_input = view.findViewById(R.id.et_input);
-        btn_save = view.findViewById(R.id.btn_save);
-        btn_clear = view.findViewById(R.id.btn_clear);
-        title = view.findViewById(R.id.title);
-        //btn_contentSpeech = view.findViewById(R.id.btn_contentSpeech );
-        content = view.findViewById(R.id.content);
-        seekBar = view.findViewById(R.id.xsb);
-        btn_bf = view.findViewById(R.id.btn_bf);
-        audio = view.findViewById(R.id.audio);
-        //typeItems = view.findViewById(R.id.typeItems);
-
-
-        audio_list = view.findViewById(R.id.audio_list);
-
-        LinearLayout add_audio_layout = view.findViewById(R.id.add_audio_layout);
-
-        //new一个实例
-        speak_btn = view.findViewById(R.id.speak_btn);
-        if ("编辑".equals(tapTitle)) {
-            add_audio_layout.setVisibility(View.GONE);
-            audio_list.setVisibility(View.VISIBLE);
-        } else {
-            add_audio_layout.setVisibility(View.VISIBLE);
-            audio_list.setVisibility(View.GONE);
-            ReDrawBtnIcon.reDrawIcon(speak_btn, R.drawable.speak, 10, 0, 80, 70);
-            ReDrawBtnIcon.reDrawIcon(btn_bf, R.drawable.sound2, 10, 0, 80, 70);
-            speak_btn.setOnClickListener(this);
-        }
-
-
-        btn_save.setOnClickListener(new View.OnClickListener() {
-            @Override
-            public void onClick(View v) {
-                saveOrUpdateSysZnyy(oldId);
-            }
-        });
-
-
-        btn_clear.setOnClickListener(this);
-
-
-        //typeItems.setItems()
-
-
-    }
-
-    class MyAudioRowAdapter extends SmartRecyclerAdapter<String> {
-
-        public MyAudioRowAdapter(int layoutId) {
-            super(layoutId);
-        }
-
-
-        @Override
-        protected void onBindViewHolder(SmartViewHolder holder, String thisPath, int position) {
-            //绑定进度条和播放按钮
-            SeekBar progressBar = holder.findViewById(R.id.progressBar);
-            MediaPlayer mediaPlayer = initAudioFile(thisPath);
-            RoundButton btn_bf_wav = holder.findViewById(R.id.btn_bf_wav);
-            ReDrawBtnIcon.reDrawIcon(btn_bf_wav, R.drawable.sound2, 10, 0, 80, 70);
-            playAudio(btn_bf_wav, mediaPlayer, progressBar, btn_bf_wav);
-        }
-    }
-
-    public void addAudioData(List<String> audioPathList) {
-        MyAudioRowAdapter myAudioRowAdapter = new MyAudioRowAdapter(R.layout.attr_table_row_audio_wav);
-        audio_list.setAdapter(myAudioRowAdapter);
-        myAudioRowAdapter.refresh(audioPathList);
-        setListViewHeightBasedOnChildren(audio_list);
-    }
-
-    public void setListViewHeightBasedOnChildren(ListView listView) {
-
-        ListAdapter listAdapter = listView.getAdapter();
-
-        if (listAdapter == null) {
-            return;
-        }
-
-        int totalHeight = 0;
-
-        for (int i = 0; i < listAdapter.getCount(); i++) {
-            View listItem = listAdapter.getView(i, null, listView);
-            listItem.measure(0, 0);
-            totalHeight += listItem.getMeasuredHeight();
-        }
-
-        ViewGroup.LayoutParams params = listView.getLayoutParams();
-
-        params.height = totalHeight
-                + (listView.getDividerHeight() * (listAdapter.getCount() - 1));
-
-        //((ViewGroup.MarginLayoutParams) params).setMargins(10, 10, 10, 10); // 可删除
-
-        listView.setLayoutParams(params);
-    }
-
-    /**
-     * 设置各个按钮的点击事件
-     *
-     * @param v
-     */
-
-    @Override
-    public void onClick(View v) {
-        switch (v.getId()) {
-            case R.id.speak_btn:
-                realTimeTranslate();
-                break;
-            case R.id.btn_clear:
-                //clear
-                //queryAllZnyy();
-                dialog.dismiss();
-                break;
-        }
-    }
-
-
-    public void saveOrUpdateSysZnyy(Long oldId) {
-        SysZnyy sysZnyy = null;
-        if (oldId == null) {
-            sysZnyy = new SysZnyy();
-            if (setDetailInfo(sysZnyy)) return;
-            sysZnyy.setAudioPaths(audioPath);
-            sysZnyy.setCreateTime(DateFormatUtil.dateConverString(new Date()));
-            sysZnyyDao.insert(sysZnyy);
-            mToast.setText("保存成功！");
-        } else {
-            sysZnyy = sysZnyyDao.load(oldId);
-            if (setDetailInfo(sysZnyy)) return;
-            sysZnyyDao.update(sysZnyy);
-            mToast.setText("更新成功！");
-        }
-        mToast.show();
-        dialog.dismiss();
-        //更新列表
-        List<SysZnyy> list = queryAllZnyy();
-        if (onDataChangeListener != null && !ListUtils.isEmpty(list)) {
-            onDataChangeListener.doSomething(list);
-        }
-    }
-
-    private boolean setDetailInfo(SysZnyy sysZnyy) {
-        String thisTitle = title.getText().toString().trim();
-        if (thisTitle == null || thisTitle.length() <= 0) {
-            mToast.setText("标题不能为空！");
-            mToast.show();
-            return true;
-        }
-        sysZnyy.setTitle(thisTitle);
-
-        String thisContent = content.getContentText();
-        if (thisContent == null || thisContent.length() <= 0) {
-            mToast.setText("内容不能为空！");
-            mToast.show();
-            return true;
-        }
-        sysZnyy.setContent(thisContent);
-        return false;
-    }
-
-    public List<SysZnyy> queryAllZnyy() {
-        List<SysZnyy> list = sysZnyyDao.loadAll();
-        return list;
-    }
-
-
-    public MediaPlayer initAudioFile(String path) {
-        MediaPlayer mediaPlayer = new MediaPlayer();
-        //1.初始化midiaplayer
-        try {
-            mediaPlayer.reset();
-            //2.设置要播放的资源位置  path 可以是网络路径 也可以是本地路径
-            mediaPlayer.setDataSource(path);
-            //3.准备播放
-            mediaPlayer.prepare();
-        } catch (IOException e) {
-            e.printStackTrace();
-        }
-        return mediaPlayer;
-    }
-
-    public void playAudio(RoundButton startmusic, MediaPlayer mediaPlayer, SeekBar mySeekBar, RoundButton btn) {
-        //开始播放
-        startmusic.setOnClickListener(new View.OnClickListener() {
-            @Override
-            public void onClick(View v) {
-                if (mediaPlayer.isPlaying()) {
-                    mediaPlayer.pause();
-                    ReDrawBtnIcon.reDrawIcon(btn, R.drawable.sound2, 10, 0, 80, 70);
-                } else {
-                    mediaPlayer.start();
-                    ReDrawBtnIcon.reDrawIcon(btn, R.drawable.sound, 5, 0, 80, 70);
-                }
-                //5.更新进度条
-                updateSeekBar(mediaPlayer, mySeekBar, btn);
-            }
-        });
-        //暂停播放
-        /*pausemusic.setOnClickListener(new View.OnClickListener() {
-            @Override
-            public void onClick(View v) {
-                mediaPlayer.pause();
-            }
-        });*/
-
-        //继续播放
-        /*restartmusic.setOnClickListener(new View.OnClickListener() {
-            @Override
-            public void onClick(View v) {
-                mediaPlayer.start();
-            }
-        });*/
-
-        //给seekBar设置监听事件
-        setSeekBarChange(mediaPlayer, mySeekBar);
-    }
-
-    private void setSeekBarChange(MediaPlayer mediaPlayer, SeekBar mySeekBar) {
-        mySeekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
-            //当进度改变
-            @Override
-            public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
-
-            }
-
-            //当开始拖动
-            @Override
-            public void onStartTrackingTouch(SeekBar seekBar) {
-
-            }
-
-            //当拖动停止的时候调用
-            @Override
-            public void onStopTrackingTouch(SeekBar seekBar) {
-                seekTo(mediaPlayer, seekBar.getProgress());
-            }
-        });
-    }
-
-    //实现指定播放的位置
-    public void seekTo(MediaPlayer mediaPlayer, int position) {
-        mediaPlayer.seekTo(position);
-    }
-
-    private void updateSeekBar(MediaPlayer mediaPlayer, SeekBar mySeekBar, RoundButton btn_b) {
-
-        //1.获取当前播放的总长度
-        final int duration = mediaPlayer.getDuration();
-        //2.使用Timer 定时器 去定时获取当前进度
-        final Timer timer = new Timer();
-        final TimerTask task = new TimerTask() {
-            @Override
-            public void run() {
-                //3.一秒获取一次当前进度
-                int currentPosition = mediaPlayer.getCurrentPosition();
-                // 设置seekBar进度
-                mySeekBar.setMax(duration);
-                //当前进度
-                mySeekBar.setProgress(currentPosition);
-                //seekBar.setDefaultValue(currentPosition);
-            }
-        };
-        //100毫秒后 每隔1秒 执行一次run方法
-        timer.schedule(task, 100, 1000);
-
-        //当歌曲执行完毕时，把timer 和 timertask 取消
-        //设置播放完成的监听
-        mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
-            @Override
-            public void onCompletion(MediaPlayer mp) {
-                ReDrawBtnIcon.reDrawIcon(btn_b, R.drawable.sound2, 10, 0, 80, 70);
-                timer.cancel();
-                task.cancel();
-                mySeekBar.setProgress(0);
-            }
-        });
-    }
-
-
-    private void speekText(View v) {
-        //1. 创建 SpeechSynthesizer 对象 , 第二个参数： 本地合成时传 InitListener
-        SpeechSynthesizer mTts = SpeechSynthesizer.createSynthesizer(v.getContext(), null);
-        //2.合成参数设置，详见《 MSC Reference Manual》 SpeechSynthesizer 类
-        //设置发音人（更多在线发音人，用户可参见 附录 13.2
-        mTts.setParameter(SpeechConstant.VOICE_NAME, "vixyun"); // 设置发音人
-        mTts.setParameter(SpeechConstant.SPEED, "50");// 设置语速
-        mTts.setParameter(SpeechConstant.VOLUME, "80");// 设置音量，范围 0~100
-        mTts.setParameter(SpeechConstant.ENGINE_TYPE, SpeechConstant.TYPE_CLOUD); //设置云端
-        //设置合成音频保存位置（可自定义保存位置），保存在 “./sdcard/iflytek.pcm”
-        //保存在 SD 卡需要在 AndroidManifest.xml 添加写 SD 卡权限
-        //仅支持保存为 pcm 和 wav 格式， 如果不需要保存合成音频，注释该行代码
-        mTts.setParameter(SpeechConstant.TTS_AUDIO_PATH, "./sdcard/iflytek.pcm");
-        //3.开始合成
-        mTts.startSpeaking(et_input.getText().toString(), new MySynthesizerListener(v));
-
-    }
-
-
-    class MySynthesizerListener implements SynthesizerListener {
-
-
-        public MySynthesizerListener(View v) {
-        }
-
-        @Override
-        public void onSpeakBegin() {
-            showTip(" 开始播放 ");
-        }
-
-        @Override
-        public void onSpeakPaused() {
-            showTip(" 暂停播放 ");
-        }
-
-        @Override
-        public void onSpeakResumed() {
-            showTip(" 继续播放 ");
-        }
-
-        @Override
-        public void onBufferProgress(int percent, int beginPos, int endPos,
-                                     String info) {
-            // 合成进度
-        }
-
-        @Override
-        public void onSpeakProgress(int percent, int beginPos, int endPos) {
-            // 播放进度
-        }
-
-        @Override
-        public void onCompleted(SpeechError error) {
-            if (error == null) {
-                showTip("播放完成 ");
-            } else if (error != null) {
-                showTip(error.getPlainDescription(true));
-            }
-        }
-
-        @Override
-        public void onEvent(int eventType, int arg1, int arg2, Bundle obj) {
-        }
-    }
-
-
-    /**
-     * 科大讯飞小于60s音频转写
-     *
-     * @param view
-     * @param input
-     */
-    private void startSpeechDialog(View view, TextView input) {
-        //1. 创建RecognizerDialog对象
-        mDialog = new RecognizerDialog(view.getContext(), new InitListener() {
-            @Override
-            public void onInit(int i) {
-            }
-        });
-
-        /**
-         * 重写语音听写销毁方法，
-         */
-        /*DialogInterface.OnDismissListener onDismissListener=new DialogInterface.OnDismissListener(){
-            @Override
-            public void onDismiss(DialogInterface dialog) {
-
-                mDialog.setOnDismissListener(this);
-                mDialog.show();
-            }
-        };
-        mDialog.setOnDismissListener(onDismissListener);*/
-
-        //2. 设置accent、 language等参数
-        //短信和日常用语：iat (默认)  视频：video  地图：poi  音乐：music
-        mDialog.setParameter(SpeechConstant.DOMAIN, "iat");
-        mDialog.setParameter(SpeechConstant.LANGUAGE, "zh_cn");// 设置中文
-        //普通话：mandarin(默认)
-        //粤 语：cantonese
-        //四川话：lmz
-        //河南话：henanese<span style="font-family: Menlo;">
-        mDialog.setParameter(SpeechConstant.ACCENT, "mandarin");
-        //只有设置这个属性为1时,VAD_BOS  VAD_EOS才会生效,且RecognizerListener.onVolumeChanged才有音量返回默认：1
-        //mDialog.setParameter(SpeechConstant.VAD_ENABLE,"1");
-        // 设置语音前端点:静音超时时间，即用户多长时间不说话则当做超时处理1000~10000
-        mDialog.setParameter(SpeechConstant.VAD_BOS, "7000");
-        // 设置语音后端点:后端点静音检测时间，即用户停止说话多长时间内即认为不再输入， 自动停止录音0~10000
-        mDialog.setParameter(SpeechConstant.VAD_EOS, "1800");
-        // 注：AUDIO_FORMAT参数语记须要更新版本才能生效
-        //mDialog.setParameter(SpeechConstant.AUDIO_FORMAT, "wav");
-        //设置识别会话被中断时（如当前会话未结束就开启了新会话等），
-        //是否通 过RecognizerListener.onError(com.iflytek.cloud.SpeechError)回调ErrorCode.ERROR_INTERRUPT错误。
-        //默认false    [null,true,false]
-        /*mDialog.setParameter(SpeechConstant.ASR_INTERRUPT_ERROR,"false");
-        //音频采样率  8000~16000  默认:16000
-        mDialog.setParameter(SpeechConstant.SAMPLE_RATE,"16000");*/
-        //默认:麦克风(1)(MediaRecorder.AudioSource.MIC)
-        //在写音频流方式(-1)下，应用层经过writeAudio函数送入音频；
-        //在传文件路径方式（-2）下，SDK经过应用层设置的ASR_SOURCE_PATH值， 直接读取音频文件。目前仅在SpeechRecognizer中支持。
-        //mDialog.setParameter(SpeechConstant.AUDIO_SOURCE, "-1");
-        // 设置音频保存路径，保存音频格式支持pcm、wav，设置路径为sd卡请注意WRITE_EXTERNAL_STORAGE权限
-        mDialog.setParameter(SpeechConstant.AUDIO_FORMAT, "wav");
-        mDialog.setParameter(SpeechConstant.ASR_AUDIO_PATH, Environment.getExternalStorageDirectory() + "/msc/audio_" + System.currentTimeMillis() + ".wav");
-        //3.设置回调接口
-        mDialog.setListener(new MyRecognizerDialogListener(input));
-        //4. 显示dialog，接收语音输入
-        mDialog.show();
-    }
-
-
-    class MyRecognizerDialogListener implements RecognizerDialogListener {
-        TextView input;
-
-        public MyRecognizerDialogListener(TextView input) {
-            this.input = input;
-        }
-
-        /**
-         * @param results
-         * @param isLast  是否说完了
-         */
-        @Override
-        public void onResult(RecognizerResult results, boolean isLast) {
-            String result = results.getResultString(); //为解析的
-            //showTip(result) ;
-
-            String text = JsonParser.parseIatResult(result);//解析过后的
-
-            String sn = null;
-            // 读取json结果中的 sn字段
-            try {
-                JSONObject resultJson = new JSONObject(results.getResultString());
-                sn = resultJson.optString("sn");
-            } catch (JSONException e) {
-                e.printStackTrace();
-            }
-            mIatResults.put(sn, text);//没有得到一句，添加到
-            StringBuffer resultBuffer = new StringBuffer();
-            for (String key : mIatResults.keySet()) {
-                resultBuffer.append(mIatResults.get(key));
-            }
-            if (isLast) {
-                input.setText(input.getText() + resultBuffer.toString());// 设置输入框的文本
-            }
-        }
-
-        @Override
-        public void onError(SpeechError speechError) {
-
-        }
-    }
-
-
-    private void realTimeTranslate() {
-        audioRecordFunc = AudioRecordFunc.getInstance();
-        audioRecordFunc.startRecordAndFile();
-        speakDialog.initSpeakDialog();
-        RTASRUtils RTASRInstance = RTASRUtils.getInstance();
-
-        RTASRInstance.setListener(new RTASRUtils.InitAttachViewListener() {
-            @Override
-            public MultiLineEditText getAttachView() {
-                return content;
-            }
-        }, new CommonAsyncListener<RTASRUtils.MyWebSocketClient>() {
-            @Override
-            public void doSomething(RTASRUtils.MyWebSocketClient data) {
-                RTASRUtils.MyWebSocketClient myWebSocketClient = data;
-                new Thread() {
-                    @Override
-                    public void run() {
-                        super.run();
-                        try {
-                            RTASRInstance.connecting(myWebSocketClient);
-                            RTASRInstance.startZy(AudioFileFunc.getRawFilePath(), myWebSocketClient);
-                        } catch (Exception e) {
-                            e.printStackTrace();
-                        }
-                    }
-                }.start();
-            }
-        });
-        RTASRInstance.createAsyncClient();
-
-
-        speakDialog.speak_btn.setOnClickListener(new View.OnClickListener() {
-            @Override
-            public void onClick(View v) {
-                speakDialog.getDialog().dismiss();
-                audioRecordFunc.stopRecordAndFile();
-                audioPath.add(audioRecordFunc.getNewAudioName());
-                MediaPlayer mediaPlayer = initAudioFile(audioRecordFunc.getNewAudioName());
-                playAudio(btn_bf, mediaPlayer, seekBar, btn_bf);
-            }
-        });
-    }
-
-    /**
-     * 录音转写，录制语音，然后分割文件进行转写
-     */
-    private void startSpeech(View v) {
-        mIat = SpeechRecognizer.createRecognizer(v.getContext(), new InitListener() {
-            @Override
-            public void onInit(int i) {
-
-            }
-        });
-
-        time = System.currentTimeMillis();
-        speakDialog.initSpeakDialog();
-        speakDialog.speak_btn.setOnClickListener(new View.OnClickListener() {
-            @Override
-            public void onClick(View v) {
-                speakDialog.getDialog().dismiss();
-                audioRecordFunc.stopRecordAndFile();
-                //
-                zy();
-                MediaPlayer mediaPlayer = initAudioFile(AudioFileFunc.getWavFilePath());
-                playAudio(btn_bf, mediaPlayer, seekBar, btn_bf);
-
-            }
-        });
-    }
-
-    /**
-     * 听写参数设置
-     */
-    public void setParam() {
-        // 清空参数
-        mIat.setParameter(SpeechConstant.PARAMS, null);
-        // 设置听写引擎类型
-        mIat.setParameter(SpeechConstant.DOMAIN, "iat");
-        mIat.setParameter(SpeechConstant.LANGUAGE, "zh_cn");// 设置中文
-        //普通话：mandarin(默认)
-        //粤 语：cantonese
-        //四川话：lmz
-        //河南话：henanese<span style="font-family: Menlo;">
-        //陕西话: shanxinese
-        mIat.setParameter(SpeechConstant.ACCENT, "mandarin");
-        //只有设置这个属性为1时,VAD_BOS  VAD_EOS才会生效,且RecognizerListener.onVolumeChanged才有音量返回默认：1
-        //mDialog.setParameter(SpeechConstant.VAD_ENABLE,"1");
-        // 设置语音前端点:静音超时时间，即用户多长时间不说话则当做超时处理1000~10000
-        mIat.setParameter(SpeechConstant.VAD_BOS, "7000");
-        // 设置语音后端点:后端点静音检测时间，即用户停止说话多长时间内即认为不再输入， 自动停止录音0~10000
-        mIat.setParameter(SpeechConstant.VAD_EOS, "7000");
-        //此处用于设置dialog中不显示错误码信息
-        //mIat.setParameter("view_tips_plain","false");
-        // 设置标点符号,设置为"0"返回结果无标点,设置为"1"返回结果有标点
-        //mIat.setParameter(SpeechConstant.ASR_PTT, "1");
-        // 设置音频保存路径，保存音频格式支持pcm、wav，设置路径为sd卡请注意WRITE_EXTERNAL_STORAGE权限
-        mIat.setParameter(SpeechConstant.AUDIO_FORMAT, "wav");
-        //mIat.setParameter(SpeechConstant.AUDIO_FORMAT, "wav");
-    }
-
-    //录音转意方法
-    public void zy() {
-        setParam();
-        mIat.setParameter(SpeechConstant.SAMPLE_RATE, "16000");
-        mIat.setParameter(SpeechConstant.AUDIO_SOURCE, "-1");
-        //然后在进行音频流输入
-        byte[] audioData = FileUtil.readAudioFile(AudioFileFunc.getWavFilePath());
-        if (null != audioData) {
-            //LogUtil.logInfo("开始音频流识别");
-            // 一次（也可以分多次）写入音频文件数据，数据格式必须是采样率为8KHz或16KHz（本地识别只支持16K采样率，云端都支持），
-            // 位长16bit，单声道的wav或者pcm
-            // 写入8KHz采样的音频时，必须先调用setParameter(SpeechConstant.SAMPLE_RATE, "8000")设置正确的采样率
-            // 注：当音频过长，静音部分时长超过VAD_EOS将导致静音后面部分不能识别。
-            // 音频切分方法：FucUtil.splitBuffer(byte[] buffer,int length,int spsize);
-            //LogUtil.logInfo("audioData.length:"+audioData.length+",audioDataLen:"+audioDataLen);
-            bytes = FileUtil.splitBuffer(audioData, audioData.length, 1024 * 512);
-            writeAudio(bytes.get(index), index);
-        } else {
-            mIat.cancel();
-            //LogUtil.logInfo("读取音频流失败");
-        }
-
-    }
-
-
-    public static void writeAudio(byte[] b, int i) {
-        if (bytes != null) {
-            MyRecognizerListener myRecognizerListener = new MyRecognizerListener(b, i);
-            mIat.startListening(myRecognizerListener);
-            mIat.writeAudio(b, 0, b.length);
-            mIat.stopListening();
-        }
-    }
-
-    private void showTip(final String str) {
-        mToast.setText(str);
-        mToast.show();
-    }
-
-
-    /**
-     * 录音转写监听
-     */
-    static class MyRecognizerListener implements RecognizerListener {
-        public MyRecognizerListener() {
-        }
-
-        public MyRecognizerListener(byte[] b, int idx) {
-            this.idx = idx;
-            this.b = b;
-        }
-
-        public int idx;
-        public byte[] b;
-
-        public int getIdx() {
-            return idx;
-        }
-
-        public void setIdx(int idx) {
-            this.idx = idx;
-        }
-
-        public byte[] getB() {
-            return b;
-        }
-
-        public void setB(byte[] b) {
-            this.b = b;
-        }
-
-        // 听写结果回调接口 (返回Json 格式结果，用户可参见附录 13.1)；
-        //一般情况下会通过onResults接口多次返回结果，完整的识别内容是多次结果的累加；
-        //关于解析Json的代码可参见 Demo中JsonParser 类；
-        //isLast等于true 时会话结束。
-        public void onResult(RecognizerResult results, boolean isLast) {
-            //printResult(results);
-            String result = results.getResultString(); //为解析的
-            //showTip(result) ;
-
-            String text = JsonParser.parseIatResult(result);//解析过后的
-
-            String sn = null;
-            // 读取json结果中的 sn字段
-            try {
-                JSONObject resultJson = new JSONObject(results.getResultString());
-                sn = resultJson.optString("sn");
-            } catch (JSONException e) {
-                e.printStackTrace();
-            }
-
-            mIatResults.put(sn, text);//没有得到一句，添加到
-
-            StringBuffer resultBuffer = new StringBuffer();
-            for (String key : mIatResults.keySet()) {
-                resultBuffer.append(mIatResults.get(key));
-            }
-            //resultText+= resultBuffer.toString();
-            if (isLast) {
-                //mIat.s
-                //writeAudio();
-                content.getEditText().setText(content.getEditText().getText() + resultBuffer.toString());
-                index++;
-                if (bytes.size() > index) {
-                    writeAudio(bytes.get(index), index);
-                } else {
-                }
-                //mIat.stopListening();
-            }
-        }
-
-        // 会话发生错误回调接口
-        public void onError(SpeechError error) {
-            //);
-        }
-
-        // 开始录音
-        public void onBeginOfSpeech() {
-        }
-
-
-        //volume 音量值0~30， data音频数据
-        public void onVolumeChanged(int volume, byte[] data) {
-            //showTip(" 声音改变了 ");
-        }
-
-        // 结束录音
-        public void onEndOfSpeech() {
-            boolean fl = mIat.isListening();
-            //showTip(" 结束转意 ");
-        }
-
-        // 扩展用接口
-        public void onEvent(int eventType, int arg1, int arg2, Bundle obj) {
-        }
-    }
-
-
-}
Index: app/src/main/res/drawable/bg_app_common_input_rectangle.xml
===================================================================
--- app/src/main/res/drawable/bg_app_common_input_rectangle.xml	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
+++ app/src/main/res/drawable/bg_app_common_input_rectangle.xml	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
@@ -1,28 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<!--
-  ~ Copyright (C) 2021 xuexiangjys(xuexiangjys@163.com)
-  ~
-  ~ Licensed under the Apache License, Version 2.0 (the "License");
-  ~ you may not use this file except in compliance with the License.
-  ~ You may obtain a copy of the License at
-  ~
-  ~       http://www.apache.org/licenses/LICENSE-2.0
-  ~
-  ~ Unless required by applicable law or agreed to in writing, software
-  ~ distributed under the License is distributed on an "AS IS" BASIS,
-  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-  ~ See the License for the specific language governing permissions and
-  ~ limitations under the License.
-  ~
-  -->
-
-<shape xmlns:android="http://schemas.android.com/apk/res/android"
-    android:shape="rectangle">
-    <!-- 设置圆角矩形 -->
-    <corners android:radius="@dimen/dpx_20" />
-
-    <!--设置边框粗细和颜色-->
-    <stroke
-        android:width="@dimen/divider_1px_weight"
-        android:color="@color/gray_1_divider" />
-</shape>
\ No newline at end of file
Index: app/src/main/res/layout/dialog_add_audio.xml
===================================================================
--- app/src/main/res/layout/dialog_add_audio.xml	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
+++ app/src/main/res/layout/dialog_add_audio.xml	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
@@ -1,174 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<!--
-  ~ Copyright (C) 2020 xuexiangjys(xuexiangjys@163.com)
-  ~
-  ~ Licensed under the Apache License, Version 2.0 (the "License");
-  ~ you may not use this file except in compliance with the License.
-  ~ You may obtain a copy of the License at
-  ~
-  ~       http://www.apache.org/licenses/LICENSE-2.0
-  ~
-  ~ Unless required by applicable law or agreed to in writing, software
-  ~ distributed under the License is distributed on an "AS IS" BASIS,
-  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-  ~ See the License for the specific language governing permissions and
-  ~ limitations under the License.
-  ~
-  -->
-
-<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
-    android:layout_width="@dimen/dp_1200"
-    android:layout_height="match_parent"
-    xmlns:app="http://schemas.android.com/apk/res-auto"
-    android:layout_centerHorizontal="true"
-    android:orientation="vertical">
-
-    <LinearLayout
-        android:background="#fff"
-        android:layout_width="match_parent"
-        android:layout_height="wrap_content"
-        android:orientation="vertical"
-        android:padding="@dimen/dp_10"
-        android:id="@+id/audio"
-        >
-        <LinearLayout
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content"
-            android:orientation="horizontal">
-            <!--标题-->
-            <com.bytemiracle.project.core.framework.view.indicator.IndicatorTextView
-                android:layout_height="@dimen/dp_40"
-                android:layout_width="@dimen/dp_75"
-                android:layout_gravity="fill_horizontal"
-                android:textSize="@dimen/dp_20"
-                android:gravity="center_vertical"
-                android:text="标题："
-                android:id="@+id/title_tap"/>
-            <!--标题输入框-->
-            <EditText
-                android:id="@+id/title"
-                android:layout_weight="1"
-                android:layout_width="@dimen/default_width_use_weight"
-                android:layout_height="@dimen/dp_40"
-                android:layout_gravity="fill"
-                android:maxLength="48"
-                android:layout_margin="@dimen/dp_5"
-                android:background="@drawable/input_littlerectangle" />
-        </LinearLayout>
-        <LinearLayout
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content"
-            android:orientation="horizontal">
-            <!--正文-->
-            <com.bytemiracle.project.core.framework.view.indicator.IndicatorTextView
-                android:layout_height="wrap_content"
-                android:layout_width="@dimen/dp_75"
-                android:layout_gravity="fill_horizontal"
-                android:textSize="@dimen/dp_20"
-                android:gravity="center_vertical"
-                android:id="@+id/content_tap"
-                android:text="正文："/>
-            <!--正文输入框-->
-            <com.xuexiang.xui.widget.edittext.MultiLineEditText
-                android:layout_weight="1"
-                android:layout_width="@dimen/default_width_use_weight"
-                android:layout_height="@dimen/dp_280"
-                android:id="@+id/content"
-                app:mlet_maxCount="4000"
-                app:mlet_contentViewHeight="@dimen/dp_240"
-                app:mlet_isFixHeight="false"
-                android:background="@drawable/input_littlerectangle"
-                android:layout_margin="@dimen/dp_5" />
-          <!--  <EditText
-                android:id="@+id/content"
-                android:background="@drawable/input_littlerectangle"
-                android:layout_width="600dp"
-                android:layout_height="400dp"
-                android:layout_margin="@dimen/dp_5"
-                android:layout_gravity="fill"/>-->
-
-        </LinearLayout>
-        <LinearLayout
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content"
-            android:id="@+id/add_audio_layout"
-            android:orientation="horizontal">
-            <TextView
-                android:layout_height="@dimen/dp_50"
-                android:layout_width="@dimen/dp_65"
-                android:layout_gravity="fill_horizontal"
-                android:textSize="@dimen/dp_20"
-                android:gravity="center_vertical"
-                android:text="语音："/>
-            <SeekBar
-                android:id="@+id/xsb"
-                android:layout_weight="8"
-                android:layout_width="@dimen/default_width_use_weight"
-                android:layout_height="wrap_content"
-                android:layout_marginStart="@dimen/dp_10"
-                android:layout_marginTop="@dimen/dp_16"
-                android:layout_marginEnd="@dimen/dp_10"
-                />
-            <com.xuexiang.xui.widget.button.roundbutton.RoundButton
-                style="@style/app_round_30_blue_button"
-                android:id="@+id/speak_btn"
-                android:drawableLeft="@drawable/speak"
-                android:text=""
-                android:layout_width="@dimen/dp_40"
-                android:layout_height="@dimen/dp_40"
-                android:layout_margin="@dimen/dp_10"/>
-
-            <com.xuexiang.xui.widget.button.roundbutton.RoundButton
-                style="@style/app_round_30_blue_button"
-                android:id="@+id/btn_bf"
-                android:text=""
-                android:layout_width="@dimen/dp_40"
-                android:layout_height="@dimen/dp_40"
-                android:layout_margin="@dimen/dp_10" />
-        </LinearLayout>
-        <LinearLayout
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content"
-            android:orientation="horizontal">
-            <ListView
-                android:layout_width="match_parent"
-                android:layout_height="match_parent"
-                android:id="@+id/audio_list"/>
-        </LinearLayout>
-
-
-        <LinearLayout
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content"
-            android:gravity="center_horizontal">
-
-        <com.xuexiang.xui.widget.button.roundbutton.RoundButton
-            android:id="@+id/btn_save"
-            android:layout_width="@dimen/dp_80"
-            android:layout_height="@dimen/dp_40"
-            android:layout_margin="@dimen/dp_15"
-            android:text="保存"
-            android:textColor="#FEFFFF"
-            android:textSize="@dimen/dp_24"
-            app:rb_radius="@dimen/dp_8"
-            app:rb_backgroundColor="@color/colorPrimary"/>
-
-        <com.xuexiang.xui.widget.button.roundbutton.RoundButton
-            android:id="@+id/btn_clear"
-            android:layout_width="@dimen/dp_80"
-            android:layout_height="@dimen/dp_40"
-            android:layout_margin="@dimen/dp_15"
-            android:text="取消"
-            android:textColor="#03A9F4"
-            app:rb_radius="@dimen/dp_8"
-            android:textSize="@dimen/dp_24"
-            app:rb_backgroundColor="@color/colorWhite"
-            app:rb_borderColor="@color/colorPrimary"/>
-        </LinearLayout>
-
-
-    </LinearLayout>
-</LinearLayout>
-
-
-
Index: app/src/main/java/com/bytemiracle/project/widget/SpeakDialog.java
===================================================================
--- app/src/main/java/com/bytemiracle/project/widget/SpeakDialog.java	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
+++ app/src/main/java/com/bytemiracle/project/widget/SpeakDialog.java	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
@@ -1,94 +0,0 @@
-/*
- * Copyright (C) 2021 xuexiangjys(xuexiangjys@163.com)
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *       http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- *
- */
-
-package com.bytemiracle.project.widget;
-
-import android.graphics.drawable.Drawable;
-import android.util.DisplayMetrics;
-import android.view.Gravity;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.Window;
-import android.view.WindowManager;
-
-import androidx.annotation.Nullable;
-import androidx.fragment.app.DialogFragment;
-
-import com.bytemiracle.project.R;
-import com.bytemiracle.project.utils.ReDrawBtnIcon;
-import com.xuexiang.xpage.base.XPageActivity;
-import com.xuexiang.xui.widget.button.roundbutton.RoundButton;
-import com.xuexiang.xui.widget.dialog.materialdialog.MaterialDialog;
-
-public class SpeakDialog extends DialogFragment {
-
-    private static SpeakDialog speakDialog;
-
-    public RoundButton speak_btn;
-
-    public MaterialDialog dialog;
-
-
-    @Nullable
-    @Override
-    public MaterialDialog getDialog() {
-        return dialog;
-    }
-
-    public void setDialog(MaterialDialog dialog) {
-        this.dialog = dialog;
-    }
-
-    public static SpeakDialog getInstance(){
-        if(speakDialog ==null)
-            speakDialog =new SpeakDialog();
-        return speakDialog;
-    }
-
-    public void initSpeakDialog() {
-        LayoutInflater mInflater = LayoutInflater.from(XPageActivity.getTopActivity());
-        View view = mInflater.inflate(R.layout.dialog_speak, null);
-
-
-        speak_btn = view.findViewById(R.id.speak_btn);
-        ReDrawBtnIcon.reDrawIcon(speak_btn,R.drawable.speak,150,0,400,550);
-
-        dialog = new MaterialDialog.Builder(XPageActivity.getTopActivity())
-                .customView(view, true)
-                .title("录音").show();
-        speakDialog.setDialog(dialog);
-        dialog.setCanceledOnTouchOutside(false);
-        Window window = dialog.getWindow();
-        if (window != null) {
-            // 一定要设置Background，如果不设置，window属性设置无效
-            DisplayMetrics dm = new DisplayMetrics();
-            if (XPageActivity.getTopActivity() != null) {
-                WindowManager windowManager = XPageActivity.getTopActivity().getWindowManager();
-                if (windowManager != null) {
-                    windowManager.getDefaultDisplay().getMetrics(dm);
-                    window.setLayout((int) (dm.widthPixels * 0.3), (int) (dm.heightPixels * 0.5));
-                    WindowManager.LayoutParams params = window.getAttributes();
-                    params.gravity = Gravity.CENTER;
-                    window.setAttributes(params);
-                }
-            }
-        }
-    }
-
-
-
-}
Index: app/src/main/res/layout/dialog_speak.xml
===================================================================
--- app/src/main/res/layout/dialog_speak.xml	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
+++ app/src/main/res/layout/dialog_speak.xml	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
@@ -1,46 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<!--
-  ~ Copyright (C) 2020 xuexiangjys(xuexiangjys@163.com)
-  ~
-  ~ Licensed under the Apache License, Version 2.0 (the "License");
-  ~ you may not use this file except in compliance with the License.
-  ~ You may obtain a copy of the License at
-  ~
-  ~       http://www.apache.org/licenses/LICENSE-2.0
-  ~
-  ~ Unless required by applicable law or agreed to in writing, software
-  ~ distributed under the License is distributed on an "AS IS" BASIS,
-  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-  ~ See the License for the specific language governing permissions and
-  ~ limitations under the License.
-  ~
-  -->
-
-<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
-    android:layout_width="@dimen/dp_1200"
-    android:layout_height="wrap_content"
-    xmlns:app="http://schemas.android.com/apk/res-auto"
-    android:layout_centerHorizontal="true"
-    android:orientation="vertical">
-    <LinearLayout
-        android:layout_width="match_parent"
-        android:layout_height="wrap_content"
-        android:orientation="horizontal">
-
-        <com.xuexiang.xui.widget.button.roundbutton.RoundButton
-            android:id="@+id/speak_btn"
-            style="@style/app_round_10_blue_button"
-            android:layout_margin="@dimen/dp_30"
-            android:layout_width="match_parent"
-            android:layout_height="match_parent"
-            android:drawableLeft="@drawable/speak"
-            android:gravity="center"
-            android:layout_gravity="center"
-            android:text=""
-            app:rb_radius="@dimen/dp_400" />
-    </LinearLayout>
-
-</LinearLayout>
-
-
-
Index: app/src/main/res/layout/dialog_add_audio_type.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<!--\r\n  ~ Copyright (C) 2021 xuexiangjys(xuexiangjys@163.com)\r\n  ~\r\n  ~ Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  ~ you may not use this file except in compliance with the License.\r\n  ~ You may obtain a copy of the License at\r\n  ~\r\n  ~       http://www.apache.org/licenses/LICENSE-2.0\r\n  ~\r\n  ~ Unless required by applicable law or agreed to in writing, software\r\n  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  ~ See the License for the specific language governing permissions and\r\n  ~ limitations under the License.\r\n  ~\r\n  -->\r\n\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"@dimen/dp_1200\"\r\n    android:layout_height=\"wrap_content\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:layout_centerHorizontal=\"true\"\r\n    android:orientation=\"vertical\">\r\n\r\n    <LinearLayout\r\n        android:background=\"#fff\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:orientation=\"horizontal\"\r\n        android:padding=\"@dimen/dp_10\"\r\n        android:id=\"@+id/audio_tag\"\r\n        >\r\n        <com.bytemiracle.project.core.framework.view.selectcolor.ColorSelector\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:id=\"@+id/selectColorTag\">\r\n            <com.bytemiracle.project.core.framework.view.selectcolor.ColorItem\r\n                android:layout_width=\"@dimen/dp_50\"\r\n                android:layout_height=\"@dimen/dp_50\"\r\n                android:layout_marginStart=\"@dimen/dp_20\"\r\n                />\r\n            <com.bytemiracle.project.core.framework.view.selectcolor.ColorItem\r\n                android:layout_width=\"@dimen/dp_50\"\r\n                android:layout_height=\"@dimen/dp_50\"\r\n                android:layout_marginStart=\"@dimen/dp_20\"\r\n                />\r\n            <com.bytemiracle.project.core.framework.view.selectcolor.ColorItem\r\n                android:layout_width=\"@dimen/dp_50\"\r\n                android:layout_height=\"@dimen/dp_50\"\r\n                android:layout_marginStart=\"@dimen/dp_20\"\r\n                />\r\n            <com.bytemiracle.project.core.framework.view.selectcolor.ColorItem\r\n                android:layout_width=\"@dimen/dp_50\"\r\n                android:layout_height=\"@dimen/dp_50\"\r\n                android:layout_marginStart=\"@dimen/dp_20\"\r\n                />\r\n            <com.bytemiracle.project.core.framework.view.selectcolor.ColorItem\r\n                android:layout_width=\"@dimen/dp_50\"\r\n                android:layout_height=\"@dimen/dp_50\"\r\n                android:layout_marginStart=\"@dimen/dp_20\"\r\n                />\r\n            <com.bytemiracle.project.core.framework.view.selectcolor.ColorItem\r\n                android:layout_width=\"@dimen/dp_50\"\r\n                android:layout_height=\"@dimen/dp_50\"\r\n                android:layout_marginStart=\"@dimen/dp_20\"\r\n                />\r\n            <com.bytemiracle.project.core.framework.view.selectcolor.ColorItem\r\n                android:layout_width=\"@dimen/dp_50\"\r\n                android:layout_height=\"@dimen/dp_50\"\r\n                android:layout_marginStart=\"@dimen/dp_20\"\r\n                />\r\n            <com.bytemiracle.project.core.framework.view.selectcolor.ColorItem\r\n                android:layout_width=\"@dimen/dp_50\"\r\n                android:layout_height=\"@dimen/dp_50\"\r\n                android:layout_marginStart=\"@dimen/dp_20\"\r\n                />\r\n        </com.bytemiracle.project.core.framework.view.selectcolor.ColorSelector>\r\n        <ImageView\r\n            android:layout_width=\"@dimen/dp_50\"\r\n            android:layout_height=\"@dimen/dp_50\"\r\n            android:layout_marginStart=\"@dimen/dp_40\"\r\n            android:id=\"@+id/tag\"\r\n            android:src=\"@drawable/tag\"/>\r\n        <EditText\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"@dimen/dp_50\"\r\n            android:layout_marginStart=\"@dimen/dp_5\"\r\n            android:textSize=\"@dimen/dp_18\"\r\n            android:id=\"@+id/tag_name\"\r\n            android:hint=\"名称\"\r\n            />\r\n    </LinearLayout>\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\">\r\n        <com.xuexiang.xui.widget.button.roundbutton.RoundButton\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_weight=\"1\"\r\n            android:layout_margin=\"@dimen/dp_10\"\r\n            app:rb_radius=\"@dimen/dp_10\"\r\n            android:textSize=\"@dimen/dp_18\"\r\n            android:id=\"@+id/cancel\"\r\n            android:text=\"取消\"/>\r\n        <com.xuexiang.xui.widget.button.roundbutton.RoundButton\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_weight=\"1\"\r\n            android:layout_margin=\"@dimen/dp_10\"\r\n            android:textSize=\"@dimen/dp_18\"\r\n            app:rb_radius=\"@dimen/dp_10\"\r\n            android:text=\"保存\"\r\n            android:id=\"@+id/save\"/>\r\n    </LinearLayout>\r\n</LinearLayout>\r\n\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/dialog_add_audio_type.xml	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
+++ app/src/main/res/layout/dialog_add_audio_type.xml	(date 1612358448885)
@@ -81,7 +81,7 @@
             android:layout_height="@dimen/dp_50"
             android:layout_marginStart="@dimen/dp_40"
             android:id="@+id/tag"
-            android:src="@drawable/tag"/>
+            android:src="@drawable/ic_znyy_category"/>
         <EditText
             android:layout_width="match_parent"
             android:layout_height="@dimen/dp_50"
Index: app/src/main/java/com/bytemiracle/project/core/framework/utils/AppTextUtil.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>/*\r\n * Copyright (C) 2021 xuexiangjys(xuexiangjys@163.com)\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *       http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n *\r\n */\r\n\r\npackage com.bytemiracle.project.core.framework.utils;\r\n\r\nimport android.text.TextUtils;\r\n\r\n/**\r\n * 类功能：文本工具类\r\n *\r\n * @author gwwang\r\n * @date 2021/1/12 11:03\r\n */\r\npublic class AppTextUtil {\r\n\r\n    public static boolean isSameValue(Double first, Double second) {\r\n        return first - second == 0;\r\n    }\r\n\r\n    public static boolean isZero(Double value) {\r\n        return isSameValue(value, 0d);\r\n    }\r\n\r\n    //2021-01-30 01:45:38\r\n    public static String buildDateTime(String srcTime) {\r\n        if (!TextUtils.isEmpty(srcTime)) {\r\n            String[] s = srcTime.split(\" \");\r\n            String[] dates = s[0].split(\"-\");\r\n            String[] times = s[1].split(\":\");\r\n            return dates[1] + \"-\" + dates[2] + \" \" + times[0] + \":\" + times[1];\r\n        } else {\r\n            return srcTime;\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/bytemiracle/project/core/framework/utils/AppTextUtil.java	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
+++ app/src/main/java/com/bytemiracle/project/core/framework/utils/AppTextUtil.java	(date 1612355478471)
@@ -19,6 +19,9 @@
 
 import android.text.TextUtils;
 
+import java.util.ArrayList;
+import java.util.List;
+
 /**
  * 类功能：文本工具类
  *
@@ -46,4 +49,23 @@
             return srcTime;
         }
     }
+
+    public static List<String> buildSpeakFileList(String fileTitle, List<String> paths) {
+        String prefix = getFilePrefix(fileTitle);
+        ArrayList<String> strings = new ArrayList<>();
+        for (int i = 0; i < paths.size(); i++) {
+            strings.add(prefix + ".." + (i + 1) + ".wav");
+        }
+        return strings;
+    }
+
+    /**
+     * 构建文件前缀
+     *
+     * @param fileTitle
+     * @return
+     */
+    public static String getFilePrefix(String fileTitle) {
+        return fileTitle.length() > 3 ? fileTitle.substring(0, 3) : fileTitle;
+    }
 }
Index: app/src/main/java/com/bytemiracle/project/fragment/MainPageFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.bytemiracle.project.fragment;\r\n\r\nimport android.view.KeyEvent;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.GridView;\r\nimport android.widget.SimpleAdapter;\r\n\r\nimport com.bytemiracle.project.R;\r\nimport com.bytemiracle.project.activity.MainActivity;\r\nimport com.bytemiracle.project.core.BaseFragment;\r\nimport com.bytemiracle.project.fragment.settings.SettingFragment;\r\nimport com.bytemiracle.project.message.ContactsFragment;\r\nimport com.bytemiracle.project.service.MsgMonitorService;\r\nimport com.bytemiracle.project.utils.Utils;\r\nimport com.bytemiracle.project.utils.XToastUtils;\r\nimport com.xuexiang.xpage.annotation.Page;\r\nimport com.xuexiang.xui.utils.WidgetUtils;\r\nimport com.xuexiang.xui.widget.actionbar.TitleBar;\r\nimport com.xuexiang.xui.widget.dialog.LoadingDialog;\r\nimport com.xuexiang.xui.widget.dialog.materialdialog.MaterialDialog;\r\nimport com.xuexiang.xutil.XUtil;\r\nimport com.xuexiang.xutil.app.ActivityUtils;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\n\r\nimport butterknife.BindView;\r\n\r\nimport static com.xuexiang.xutil.app.ServiceUtils.startService;\r\n\r\n/**\r\n * @author xuexiang\r\n * @since 2019-10-30 00:02\r\n */\r\n@Page(name = \"主页面\")\r\npublic class MainPageFragment extends BaseFragment {\r\n    //定义图标数组\r\n    private int[] imageRes = {\r\n            R.drawable.png1,\r\n            R.drawable.png2,\r\n            R.drawable.png3,\r\n            R.drawable.png4_dis,\r\n            R.drawable.png5_dis,\r\n            R.drawable.png6,\r\n            R.drawable.png7_dis,\r\n            R.drawable.png8};\r\n\r\n    @BindView(R.id.MyGridView)\r\n    GridView mGridView;\r\n\r\n    public LoadingDialog mLoadingDialog;\r\n\r\n    @Override\r\n    protected int getLayoutId() {\r\n        return R.layout.fragment_main_page;\r\n    }\r\n\r\n    @Override\r\n    protected void initViews() {\r\n        mLoadingDialog = WidgetUtils.getLoadingDialog(getContext()).setIconScale(0.4F).setLoadingSpeed(8);\r\n        mLoadingDialog.updateMessage(\"加载中……\");\r\n\r\n        List<HashMap<String, Object>> data = new ArrayList<>();\r\n        for (int i = 0; i < imageRes.length; i++) {\r\n            HashMap<String, Object> map = new HashMap<>();\r\n            map.put(\"ItemImageView\", imageRes[i]);\r\n            data.add(map);\r\n        }\r\n\r\n        //为itme.xml添加适配器\r\n        SimpleAdapter simpleAdapter = new SimpleAdapter(getContext(),\r\n                data,\r\n                R.layout.main_page_item,\r\n                new String[]{\"ItemImageView\"},\r\n                new int[]{R.id.ItemImageView});\r\n        mGridView.setAdapter(simpleAdapter);\r\n\r\n        //为mGridView添加点击事件监听器\r\n        mGridView.setOnItemClickListener(new GridViewItemOnClick());\r\n\r\n        //启动msg监控服务\r\n        startService(MsgMonitorService.class);\r\n    }\r\n\r\n    class GridViewItemOnClick implements AdapterView.OnItemClickListener {\r\n        @Override\r\n        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\r\n            if (!Utils.isFastDoubleClick()) {\r\n                switch (position) {\r\n                    case 0:\r\n                        ActivityUtils.startActivity(MainActivity.class);\r\n                        break;\r\n                    case 1:\r\n                        openNewPage(ContactsFragment.class);\r\n                        break;\r\n                    case 2:\r\n                        openNewPage(MsgFragment.class);\r\n                        break;\r\n                    case 5:\r\n                        openNewPage(MindSemantemeFragment.class);\r\n                        break;\r\n                    case 3:\r\n                    case 4:\r\n                    case 6:\r\n                        XToastUtils.info(\"该功能暂未上线\");\r\n                        break;\r\n                    case 7:\r\n                        openNewPage(SettingFragment.class);\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public boolean onKeyDown(int keyCode, KeyEvent event) {\r\n        if (keyCode == KeyEvent.KEYCODE_BACK) {\r\n            new MaterialDialog.Builder(getContext())\r\n                    .content(\"您要退出系统吗？\")\r\n                    .positiveText(\"确定\")\r\n                    .onPositive((dialog, which) -> XUtil.get().exitApp())\r\n                    .negativeText(\"取消\")\r\n                    .show();\r\n        }\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public void onResume() {\r\n        super.onResume();\r\n        if (mLoadingDialog != null && mLoadingDialog.isLoading()) {\r\n            mLoadingDialog.dismiss();\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/bytemiracle/project/fragment/MainPageFragment.java	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
+++ app/src/main/java/com/bytemiracle/project/fragment/MainPageFragment.java	(date 1612358263734)
@@ -9,6 +9,7 @@
 import com.bytemiracle.project.R;
 import com.bytemiracle.project.activity.MainActivity;
 import com.bytemiracle.project.core.BaseFragment;
+import com.bytemiracle.project.fragment.mindsemanteme.MindSemantemeFragment;
 import com.bytemiracle.project.fragment.settings.SettingFragment;
 import com.bytemiracle.project.message.ContactsFragment;
 import com.bytemiracle.project.service.MsgMonitorService;
@@ -16,7 +17,6 @@
 import com.bytemiracle.project.utils.XToastUtils;
 import com.xuexiang.xpage.annotation.Page;
 import com.xuexiang.xui.utils.WidgetUtils;
-import com.xuexiang.xui.widget.actionbar.TitleBar;
 import com.xuexiang.xui.widget.dialog.LoadingDialog;
 import com.xuexiang.xui.widget.dialog.materialdialog.MaterialDialog;
 import com.xuexiang.xutil.XUtil;
Index: app/src/main/java/com/bytemiracle/project/core/framework/fragment/subfragment/BaseSubFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>/*\r\n * Copyright 2021 The Android  Project\r\n *\r\n */\r\n\r\npackage com.bytemiracle.project.core.framework.fragment.subfragment;\r\n\r\nimport android.view.View;\r\nimport android.widget.LinearLayout;\r\n\r\nimport com.bytemiracle.project.core.BaseFragment;\r\nimport com.bytemiracle.project.core.framework.fragment.subfragment.config.SubTitle;\r\nimport com.bytemiracle.project.core.framework.fragment.subfragment.config.SubTitleConfig;\r\n\r\n/**\r\n * 类功能：基础fragment(存在于fragment内的fragment)\r\n *\r\n * @author gwwang\r\n * @date 2021/1/7 16:20\r\n */\r\npublic abstract class BaseSubFragment extends BaseFragment {\r\n    private static final String TAG = \"BaseSubFragment\";\r\n    private SubTitle subTitle;\r\n\r\n    @Override\r\n    protected void initPage() {\r\n        //将父类的initTitleBar()去除;\r\n        initSubTitleLayout();\r\n        initViews();\r\n        initListeners();\r\n    }\r\n\r\n    @Override\r\n    protected boolean showTitleBar() {\r\n        return false;\r\n    }\r\n\r\n    protected abstract SubTitleConfig getSubTitleConfig();\r\n\r\n    protected void initSubTitleLayout() {\r\n        SubTitleConfig subTitleConfig = getSubTitleConfig();\r\n        if (subTitleConfig != null) {\r\n            if (mRootView instanceof LinearLayout && ((LinearLayout) mRootView).getOrientation() == LinearLayout.VERTICAL) {\r\n                //竖向的线性布局才可以添加title\r\n                LinearLayout rootView = (LinearLayout) mRootView;\r\n                subTitle = new SubTitle(subTitleConfig);\r\n                rootView.addView(subTitle.createSettingsSubTitle(getContext()), 0);\r\n            }\r\n        }\r\n    }\r\n\r\n    protected View getSubTitleRightButton() {\r\n        return subTitle.getRightButton();\r\n    }\r\n\r\n    /**\r\n     * fragment中的childFragment是否显示\r\n     */\r\n    public boolean isHidden = false;\r\n\r\n    public void setHidden(boolean hidden) {\r\n        isHidden = hidden;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/bytemiracle/project/core/framework/fragment/subfragment/BaseSubFragment.java	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
+++ app/src/main/java/com/bytemiracle/project/core/framework/fragment/subfragment/BaseSubFragment.java	(date 1612355258820)
@@ -28,6 +28,25 @@
         initSubTitleLayout();
         initViews();
         initListeners();
+        //首次add不走onHiddenChanged(),需要此处调用
+        initViewsData();
+    }
+
+    /**
+     * 非首次add，使用该方法刷新数据
+     *
+     * @param hidden
+     */
+    @Override
+    public void onHiddenChanged(boolean hidden) {
+        super.onHiddenChanged(hidden);
+        if (!hidden) {
+            initViewsData();
+        }
+    }
+
+    protected void initViewsData() {
+
     }
 
     @Override
Index: app/src/main/res/layout/item_znyy_audio_layout.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"wrap_content\"\r\n    android:orientation=\"vertical\">\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"@dimen/dpx_75\"\r\n        android:gravity=\"center_vertical\"\r\n        android:orientation=\"horizontal\"\r\n        android:paddingStart=\"@dimen/dpx_20\"\r\n        android:paddingTop=\"@dimen/dpx_10\"\r\n        android:paddingEnd=\"@dimen/dpx_20\"\r\n        android:paddingBottom=\"@dimen/dpx_10\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/type\"\r\n            android:layout_width=\"@dimen/dpx_55\"\r\n            android:layout_height=\"@dimen/dpx_55\"\r\n            android:layout_marginRight=\"@dimen/dpx_10\" />\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <com.bytemiracle.project.core.framework.view.MarqueeTextView\r\n                android:id=\"@+id/title\"\r\n                style=\"@style/common_app_content_text\"\r\n                android:ellipsize=\"end\"\r\n                android:maxLines=\"1\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/createTime\"\r\n                style=\"@style/common_app_content_text\"\r\n                android:layout_marginTop=\"@dimen/dpx_5\"\r\n                android:maxLines=\"1\"\r\n                android:text=\"时间\"\r\n                android:textColor=\"@color/app_common_content_text_light_gray_color\" />\r\n        </LinearLayout>\r\n    </LinearLayout>\r\n\r\n    <include layout=\"@layout/app_line_1dp_height_gray_divider\" />\r\n\r\n</LinearLayout>\r\n\r\n\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/item_znyy_audio_layout.xml	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
+++ app/src/main/res/layout/item_znyy_audio_layout.xml	(date 1612355478346)
@@ -16,8 +16,8 @@
 
         <ImageView
             android:id="@+id/type"
-            android:layout_width="@dimen/dpx_55"
-            android:layout_height="@dimen/dpx_55"
+            android:layout_width="@dimen/dpx_45"
+            android:layout_height="@dimen/dpx_45"
             android:layout_marginRight="@dimen/dpx_10" />
 
         <LinearLayout
@@ -26,7 +26,7 @@
             android:orientation="vertical">
 
             <com.bytemiracle.project.core.framework.view.MarqueeTextView
-                android:id="@+id/title"
+                android:id="@+id/et_title"
                 style="@style/common_app_content_text"
                 android:ellipsize="end"
                 android:maxLines="1" />
Index: app/src/main/java/com/bytemiracle/project/core/framework/fragment/subfragment/SubFragmentManager.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>/*\r\n * Copyright 2021 The Android  Project\r\n *\r\n */\r\n\r\npackage com.bytemiracle.project.core.framework.fragment.subfragment;\r\n\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\n\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.fragment.app.FragmentManager;\r\nimport androidx.fragment.app.FragmentTransaction;\r\n\r\nimport com.alibaba.fastjson.JSON;\r\nimport com.bytemiracle.project.core.framework.fragment.AnnotationPresenter;\r\nimport com.xuexiang.xpage.logger.PageLog;\r\n\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\n/**\r\n * 类功能：subFragment管理器\r\n *\r\n * @author gwwang\r\n * @date 2021/1/7 14:08\r\n */\r\npublic class SubFragmentManager {\r\n    private static final String TAG = \"SubFragmentManager\";\r\n\r\n    private FragmentManager subFragmentManager;\r\n    private int fragmentContainerId;\r\n\r\n    /**\r\n     * 构造函数私有化\r\n     *\r\n     * @param subFragmentManager\r\n     * @param containerId\r\n     */\r\n    protected SubFragmentManager(FragmentManager subFragmentManager, int containerId) {\r\n        this.subFragmentManager = subFragmentManager;\r\n        this.fragmentContainerId = containerId;\r\n    }\r\n\r\n    /**\r\n     * 获得单例\r\n     *\r\n     * @param subFragmentManager\r\n     * @param containerId        fragmentManager强关联的containerId\r\n     */\r\n    public static SubFragmentManager newInstance(FragmentManager subFragmentManager, int containerId) {\r\n        return new SubFragmentManager(subFragmentManager, containerId);\r\n    }\r\n\r\n    /**\r\n     * 从hashMap中得到参数的json格式\r\n     *\r\n     * @param params 页面map形式参数\r\n     * @return json格式参数\r\n     */\r\n    private String buildParams(Map<String, String> params) {\r\n        if (params == null) {\r\n            return \"\";\r\n        }\r\n        String result = JSON.toJSONString(params);\r\n        PageLog.d(\"params:\" + result);\r\n        return result;\r\n    }\r\n\r\n    private boolean contains(List<Fragment> fragments, Fragment fragment) {\r\n        if (fragments != null) {\r\n            for (Fragment f : fragments) {\r\n                if (f == fragment) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private FragmentTransaction hideAllFragment() {\r\n        FragmentTransaction fragmentTransaction = subFragmentManager.beginTransaction();\r\n        List<Fragment> fragments = subFragmentManager.getFragments();\r\n        for (Fragment fragment : fragments) {\r\n            fragmentTransaction.hide(fragment);\r\n            ((BaseSubFragment) fragment).setHidden(true);\r\n        }\r\n        return fragmentTransaction;\r\n    }\r\n\r\n    private void showFragment(Fragment fragment) {\r\n        subFragmentManager.beginTransaction().show(fragment).commitAllowingStateLoss();\r\n    }\r\n\r\n    private Fragment find(String fragmentTag) {\r\n        return subFragmentManager.findFragmentByTag(fragmentTag);\r\n    }\r\n\r\n    public boolean isShow(String fragmentTag) {\r\n        Fragment fragment = find(fragmentTag);\r\n        if (fragment != null) {\r\n            return !((BaseSubFragment) fragment).isHidden;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private void removeFragment(Fragment fragment) {\r\n        subFragmentManager.beginTransaction().remove(fragment).commitAllowingStateLoss();\r\n        ((BaseSubFragment) fragment).setHidden(true);\r\n    }\r\n\r\n    public void popFragment(String fragmentTag) {\r\n        Fragment fragment = find(fragmentTag);\r\n        if (fragment != null) {\r\n            removeFragment(fragment);\r\n        }\r\n    }\r\n\r\n\r\n    private boolean isSame(Fragment a, Fragment b) {\r\n        return a.getClass().getName().equals(b.getClass().getName()) && a == b;\r\n    }\r\n\r\n    private FragmentTransaction hideOtherFragments(BaseSubFragment showFragment) {\r\n        List<Fragment> fragments = subFragmentManager.getFragments();\r\n        FragmentTransaction fragmentTransaction = subFragmentManager.beginTransaction();\r\n        for (Fragment fragment : fragments) {\r\n            if (!isSame(fragment, showFragment) && !((BaseSubFragment) fragment).isHidden) {\r\n                //其他fragment正在显示\r\n                fragmentTransaction.hide(fragment);\r\n                ((BaseSubFragment) fragment).setHidden(true);\r\n            }\r\n        }\r\n        return fragmentTransaction;\r\n    }\r\n\r\n    public void switch2Fragment(Class<? extends BaseSubFragment> fragmentClazz, Bundle data, boolean newStack) {\r\n        String fragmentTag = new AnnotationPresenter(fragmentClazz).findDefinedFragmentTag();\r\n        BaseSubFragment fragment = (BaseSubFragment) subFragmentManager.findFragmentByTag(fragmentTag);\r\n        if (fragment != null) {\r\n            if (fragment.isHidden) {\r\n                //已经add,但没有显示\r\n                hideOtherFragments(fragment).show(fragment).commitAllowingStateLoss();\r\n                fragment.setHidden(false);\r\n            } else {\r\n                //已经add,正在显示\r\n            }\r\n            return;\r\n        }\r\n        //未add\r\n        addFragment(fragmentClazz, fragmentTag, newStack, data);\r\n    }\r\n\r\n    public void switch2Fragment(Class<? extends BaseSubFragment> fragmentClazz) {\r\n        switch2Fragment(fragmentClazz, null);\r\n    }\r\n\r\n    public void switch2Fragment(Class<? extends BaseSubFragment> fragmentClazz, Bundle data) {\r\n        switch2Fragment(fragmentClazz, data, false);\r\n    }\r\n\r\n    private void addFragment(Class<? extends BaseSubFragment> fragmentClazz, String fragmentTag, boolean newStack, Bundle data) {\r\n        try {\r\n            BaseSubFragment fragment = fragmentClazz.newInstance();\r\n            if (data != null) {\r\n                fragment.setArguments(data);\r\n            }\r\n            if (newStack) {\r\n                hideAllFragment().add(fragmentContainerId, fragment, fragmentTag).addToBackStack(fragmentTag).commitAllowingStateLoss();\r\n            } else {\r\n                hideAllFragment().add(fragmentContainerId, fragment, fragmentTag).commitAllowingStateLoss();\r\n            }\r\n            fragment.setHidden(false);\r\n        } catch (Exception e) {\r\n            Log.e(TAG, fragmentClazz.getName() + \", newInstance Error: \" + e.getMessage());\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/bytemiracle/project/core/framework/fragment/subfragment/SubFragmentManager.java	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
+++ app/src/main/java/com/bytemiracle/project/core/framework/fragment/subfragment/SubFragmentManager.java	(date 1612355478363)
@@ -92,6 +92,11 @@
         subFragmentManager.beginTransaction().show(fragment).commitAllowingStateLoss();
     }
 
+    public <T extends BaseSubFragment> T findFragment(Class<T> fragmentClazz) {
+        String fragmentTag = new AnnotationPresenter(fragmentClazz).findDefinedFragmentTag();
+        return (T) find(fragmentTag);
+    }
+
     private Fragment find(String fragmentTag) {
         return subFragmentManager.findFragmentByTag(fragmentTag);
     }
@@ -151,6 +156,24 @@
         addFragment(fragmentClazz, fragmentTag, newStack, data);
     }
 
+    public void pop2Fragment(Class<? extends BaseSubFragment> popThis,
+                             Class<? extends BaseSubFragment> fragmentClazz,
+                             Bundle data) {
+        popFragment(new AnnotationPresenter(popThis).findDefinedFragmentTag());
+        switch2Fragment(fragmentClazz, data);
+    }
+
+    /**
+     * 切换fragment，并关闭自己(其他方法默认hide)
+     *
+     * @param popThis
+     * @param fragmentClazz
+     */
+    public void pop2Fragment(Class<? extends BaseSubFragment> popThis,
+                             Class<? extends BaseSubFragment> fragmentClazz) {
+        pop2Fragment(popThis, fragmentClazz, null);
+    }
+
     public void switch2Fragment(Class<? extends BaseSubFragment> fragmentClazz) {
         switch2Fragment(fragmentClazz, null);
     }
Index: app/src/main/java/com/bytemiracle/project/core/framework/view/selectWindow/AppPopupSelector.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>/*\r\n * Copyright (C) 2021 xuexiangjys(xuexiangjys@163.com)\r\n *   \r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *       http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n *\r\n */\r\n\r\npackage com.bytemiracle.project.core.framework.view.selectWindow;\r\n\r\nimport android.content.Context;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.widget.PopupWindow;\r\n\r\n/**\r\n * 类功能：功能选择器\r\n *\r\n * @author gwwang\r\n * @date 2021/2/1 15:37\r\n */\r\npublic class AppPopupSelector {\r\n\r\n    public static AppPopupSelector newInstance() {\r\n        return new AppPopupSelector();\r\n    }\r\n\r\n    private void initPopupWindow(Context context) {\r\n        PopupWindow popupWindow = new PopupWindow(context);\r\n        popupWindow.setWidth(1000);\r\n        popupWindow.setHeight(500);\r\n        popupWindow.setOutsideTouchable(true);\r\n        popupWindow.setBackgroundDrawable(new ColorDrawable());\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/bytemiracle/project/core/framework/view/selectWindow/AppPopupSelector.java	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
+++ app/src/main/java/com/bytemiracle/project/core/framework/view/selectWindow/AppPopupSelector.java	(date 1612355258832)
@@ -1,43 +1,79 @@
-/*
- * Copyright (C) 2021 xuexiangjys(xuexiangjys@163.com)
- *   
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *       http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- *
- */
-
 package com.bytemiracle.project.core.framework.view.selectWindow;
 
 import android.content.Context;
+import android.graphics.Color;
 import android.graphics.drawable.ColorDrawable;
+import android.view.View;
 import android.widget.PopupWindow;
 
+import androidx.recyclerview.widget.LinearLayoutManager;
+import androidx.recyclerview.widget.RecyclerView;
+
+import com.bytemiracle.project.R;
+import com.bytemiracle.project.core.framework.listener.CommonAsyncListener;
+import com.bytemiracle.project.core.framework.listener.QuickListListener;
+import com.bytemiracle.project.core.framework.utils.QuickAdapter;
+import com.bytemiracle.project.core.framework.utils.QuickList;
+import com.scwang.smartrefresh.layout.adapter.SmartViewHolder;
+import com.yanzhenjie.recyclerview.SwipeRecyclerView;
+
+import java.util.List;
+
 /**
  * 类功能：功能选择器
  *
  * @author gwwang
  * @date 2021/2/1 15:37
  */
-public class AppPopupSelector {
+public class AppPopupSelector<T> {
+    private static final String TAG = "AppPopupSelector";
+    private static final int MAX_SHOW_COUNT = 6;
+
+    private final PopupWindow popupWindow;
+    private final Context context;
 
-    public static AppPopupSelector newInstance() {
-        return new AppPopupSelector();
+    private View view;
+    private int itemHeight;
+
+    public static AppPopupSelector newInstance(View view) {
+        return new AppPopupSelector(view);
     }
 
-    private void initPopupWindow(Context context) {
-        PopupWindow popupWindow = new PopupWindow(context);
-        popupWindow.setWidth(1000);
-        popupWindow.setHeight(500);
+    public AppPopupSelector(View view) {
+        this.view = view;
+        this.context = view.getContext();
+        popupWindow = new PopupWindow(context);
         popupWindow.setOutsideTouchable(true);
-        popupWindow.setBackgroundDrawable(new ColorDrawable());
+        popupWindow.setFocusable(true);
+        popupWindow.setBackgroundDrawable(new ColorDrawable(Color.WHITE));
+        itemHeight = context.getResources().getDimensionPixelSize(R.dimen.dpx_30);
+    }
+
+    public AppPopupSelector bindSelector(List<String> items, CommonAsyncListener<Integer> onSelectListener) {
+        popupWindow.setWidth(view.getWidth());
+        int showCount = items.size() > MAX_SHOW_COUNT ? MAX_SHOW_COUNT : items.size();
+        popupWindow.setHeight(itemHeight * showCount);
+
+        SwipeRecyclerView swipeRecyclerView = new SwipeRecyclerView(context);
+        swipeRecyclerView.setBackgroundColor(context.getColor(R.color.app_common_focus_gray));
+        swipeRecyclerView.setLayoutManager(new LinearLayoutManager(context, RecyclerView.VERTICAL, false));
+        QuickList.instance().adapter(swipeRecyclerView, R.layout.item_app_popup_selector_layout, items, new QuickListListener<String>() {
+            @Override
+            public void onBindItem(QuickAdapter<String> adapter, SmartViewHolder holder, String model) {
+                holder.text(R.id.tv_content, model);
+            }
+
+            @Override
+            public void onClickItem(QuickAdapter<String> adapter, String model) {
+                popupWindow.dismiss();
+                onSelectListener.doSomething(items.indexOf(model));
+            }
+        });
+        popupWindow.setContentView(swipeRecyclerView);
+        return this;
+    }
+
+    public void showAsTop() {
+        popupWindow.showAsDropDown(view, 0, 0);
     }
 }
Index: app/src/main/res/layout/dialog_msg_detail.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<!--\r\n  ~ Copyright (C) 2020 xuexiangjys(xuexiangjys@163.com)\r\n  ~\r\n  ~ Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  ~ you may not use this file except in compliance with the License.\r\n  ~ You may obtain a copy of the License at\r\n  ~\r\n  ~       http://www.apache.org/licenses/LICENSE-2.0\r\n  ~\r\n  ~ Unless required by applicable law or agreed to in writing, software\r\n  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  ~ See the License for the specific language governing permissions and\r\n  ~ limitations under the License.\r\n  ~\r\n  -->\r\n\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"@dimen/dp_1200\"\r\n    android:layout_height=\"wrap_content\"\r\n    android:layout_centerHorizontal=\"true\"\r\n    android:orientation=\"vertical\">\r\n\r\n    <LinearLayout\r\n        android:background=\"#fff\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:orientation=\"vertical\"\r\n        android:padding=\"@dimen/dp_10\"\r\n        >\r\n        <TextView\r\n            android:text=\"内容是空的，注意查收其他内容……\"\r\n            android:id=\"@+id/content\"\r\n            android:textSize=\"@dimen/dp_18\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"/>\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"vertical\"\r\n            android:id=\"@+id/files\"\r\n            android:layout_margin=\"@dimen/dp_4\"\r\n            >\r\n        </LinearLayout>\r\n        <TextView\r\n            android:text=\"连接\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:autoLink=\"all\"\r\n            android:id=\"@+id/url\"\r\n            />\r\n    </LinearLayout>\r\n</LinearLayout>\r\n\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/dialog_msg_detail.xml	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
+++ app/src/main/res/layout/dialog_msg_detail.xml	(date 1612358455334)
@@ -31,7 +31,7 @@
         >
         <TextView
             android:text="内容是空的，注意查收其他内容……"
-            android:id="@+id/content"
+            android:id="@+id/et_content"
             android:textSize="@dimen/dp_18"
             android:layout_width="match_parent"
             android:layout_height="wrap_content"/>
Index: app/src/main/java/com/bytemiracle/project/widget/MsgDetailDialog.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>/*\r\n * Copyright (C) 2020 xuexiangjys(xuexiangjys@163.com)\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *       http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n *\r\n */\r\n\r\npackage com.bytemiracle.project.widget;\r\n\r\nimport android.os.Environment;\r\nimport android.util.DisplayMetrics;\r\nimport android.view.Gravity;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.Window;\r\nimport android.view.WindowManager;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Space;\r\nimport android.widget.TextView;\r\n\r\nimport com.alibaba.fastjson.JSON;\r\nimport com.alibaba.fastjson.JSONArray;\r\nimport com.alibaba.fastjson.JSONObject;\r\nimport com.bytemiracle.project.R;\r\nimport com.bytemiracle.project.bean.SysMsg;\r\nimport com.bytemiracle.project.service.MsgService;\r\nimport com.bytemiracle.project.utils.DownLoadUtil;\r\nimport com.bytemiracle.project.utils.MFileUtils;\r\nimport com.bytemiracle.project.utils.RabbitMqUnit;\r\nimport com.xuexiang.xpage.base.XPageActivity;\r\nimport com.xuexiang.xui.widget.dialog.materialdialog.MaterialDialog;\r\nimport com.xuexiang.xutil.common.StringUtils;\r\n\r\nimport java.io.File;\r\nimport java.util.Date;\r\n\r\nimport static com.xuexiang.xutil.resource.ResUtils.getResources;\r\n\r\npublic class MsgDetailDialog {\r\n    private MsgService msgService;\r\n    private static MsgDetailDialog msgDetailDialog;\r\n    public static MsgDetailDialog getInstance(){\r\n        if(msgDetailDialog==null)\r\n            msgDetailDialog=new MsgDetailDialog();\r\n        return msgDetailDialog;\r\n    }\r\n    public void setMsgDetail(SysMsg values) {\r\n        LayoutInflater mInflater = LayoutInflater.from(XPageActivity.getTopActivity());\r\n        View view =  mInflater.inflate(R.layout.dialog_msg_detail,null);\r\n        TextView detailContent = view.findViewById(R.id.content);\r\n        if(!StringUtils.isEmpty(values.getContent())){\r\n            detailContent.setText(values.getContent().replace(\"\\\\n\",\"\"));\r\n        }\r\n        String filesStr = values.getFiles();\r\n        //设置附件\r\n        LinearLayout linearLayout = view.findViewById(R.id.files);\r\n        linearLayout.removeAllViews();\r\n        if (filesStr!=null&&!StringUtils.isEmpty(filesStr)){\r\n            JSONArray js = JSON.parseArray(filesStr);\r\n            String url = \"\";\r\n            for (Object obj:js){\r\n                JSONObject o= (JSONObject) obj;\r\n                if (o.containsKey(\"path\")){\r\n                    //根据文件个数新增textView\r\n                    TextView fi = new TextView(linearLayout.getContext());\r\n                    Space space = new Space(linearLayout.getContext());\r\n                    LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, 20);\r\n                    space.setLayoutParams(params);\r\n                    url = o.getString(\"path\");\r\n                    String fileName = o.getString(\"fileName\");\r\n                    fi.setText(fileName);\r\n                    fi.setTextSize(16);\r\n                    fi.setPadding(0,5,0,5);\r\n                    fi.setBackgroundColor(getResources().getColor(R.color.blue));\r\n                    fi.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            MFileUtils.openFile(XPageActivity.getTopActivity(), DownLoadUtil.DOWNLOADPATH + fileName);\r\n                        }\r\n                    });\r\n                    linearLayout.addView(fi);\r\n                    linearLayout.addView(space);\r\n                }\r\n            }\r\n\r\n        }\r\n        MaterialDialog dialog = new MaterialDialog.Builder(XPageActivity.getTopActivity())\r\n                .customView(view, true)\r\n                .title(values.getTitle())\r\n                .show();\r\n        Window window = dialog.getWindow();\r\n        if (window != null) {\r\n            // 一定要设置Background，如果不设置，window属性设置无效\r\n            DisplayMetrics dm = new DisplayMetrics();\r\n            if (XPageActivity.getTopActivity() != null) {\r\n                WindowManager windowManager = XPageActivity.getTopActivity().getWindowManager();\r\n                if (windowManager != null) {\r\n                    windowManager.getDefaultDisplay().getMetrics(dm);\r\n                    window.setLayout((int) (dm.widthPixels * 0.6), (int) (dm.heightPixels * 0.6));\r\n                    WindowManager.LayoutParams params = window.getAttributes();\r\n                    params.gravity = Gravity.CENTER;\r\n                    window.setAttributes(params);\r\n                }\r\n            }\r\n        }\r\n        //设置网址\r\n        TextView url = view.findViewById(R.id.url);\r\n        url.setText(values.getUrl());\r\n        if (\"0\".equals(values.getStatus())){\r\n            //未读状态，则更新数据\r\n            msgService = new MsgService();\r\n            values.setReadTime(new Date());\r\n            msgService.updateMsgStatus(values);\r\n            //发送消息\r\n            RabbitMqUnit.CreateInstance().publishToAMPQ();// 发送消息到MQ\r\n            RabbitMqUnit.CreateInstance().publishMessage(values.getId().toString());\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/bytemiracle/project/widget/MsgDetailDialog.java	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
+++ app/src/main/java/com/bytemiracle/project/widget/MsgDetailDialog.java	(date 1612358326414)
@@ -17,7 +17,6 @@
 
 package com.bytemiracle.project.widget;
 
-import android.os.Environment;
 import android.util.DisplayMetrics;
 import android.view.Gravity;
 import android.view.LayoutInflater;
@@ -41,7 +40,6 @@
 import com.xuexiang.xui.widget.dialog.materialdialog.MaterialDialog;
 import com.xuexiang.xutil.common.StringUtils;
 
-import java.io.File;
 import java.util.Date;
 
 import static com.xuexiang.xutil.resource.ResUtils.getResources;
@@ -57,7 +55,7 @@
     public void setMsgDetail(SysMsg values) {
         LayoutInflater mInflater = LayoutInflater.from(XPageActivity.getTopActivity());
         View view =  mInflater.inflate(R.layout.dialog_msg_detail,null);
-        TextView detailContent = view.findViewById(R.id.content);
+        TextView detailContent = view.findViewById(R.id.et_content);
         if(!StringUtils.isEmpty(values.getContent())){
             detailContent.setText(values.getContent().replace("\\n",""));
         }
Index: app/src/main/java/com/bytemiracle/project/core/BaseFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>/*\r\n * Copyright (C) 2019 xuexiangjys(xuexiangjys@163.com)\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *       http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n *\r\n */\r\n\r\npackage com.bytemiracle.project.core;\r\n\r\nimport android.content.res.Configuration;\r\nimport android.os.Bundle;\r\nimport android.os.Parcelable;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.bytemiracle.project.R;\r\nimport com.bytemiracle.project.core.framework.fragment.AnnotationPresenter;\r\nimport com.bytemiracle.project.core.framework.view.ShadowLinearLayout;\r\nimport com.bytemiracle.project.core.framework.view.apptitle.AppTitleController;\r\nimport com.bytemiracle.project.core.http.loader.ProgressLoader;\r\nimport com.xuexiang.xhttp2.subsciber.impl.IProgressLoader;\r\nimport com.xuexiang.xpage.base.XPageActivity;\r\nimport com.xuexiang.xpage.base.XPageFragment;\r\nimport com.xuexiang.xpage.core.PageOption;\r\nimport com.xuexiang.xpage.enums.CoreAnim;\r\nimport com.xuexiang.xrouter.facade.service.SerializationService;\r\nimport com.xuexiang.xrouter.launcher.XRouter;\r\nimport com.xuexiang.xui.utils.WidgetUtils;\r\nimport com.xuexiang.xui.widget.actionbar.TitleBar;\r\nimport com.xuexiang.xui.widget.progress.loading.IMessageLoader;\r\n\r\nimport java.io.Serializable;\r\nimport java.lang.reflect.Type;\r\n\r\nimport butterknife.ButterKnife;\r\nimport butterknife.Unbinder;\r\n\r\n/**\r\n * 基础fragment\r\n *\r\n * @author xuexiang\r\n * @since 2018/5/25 下午3:44\r\n */\r\npublic abstract class BaseFragment extends XPageFragment {\r\n\r\n    private IProgressLoader mIProgressLoader;\r\n\r\n    /**\r\n     * 消息加载框\r\n     */\r\n    private IMessageLoader mIMessageLoader;\r\n    private AppTitleController appTitleController;\r\n    private Unbinder mUnbinder;\r\n    protected View mRootView;\r\n\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n        mRootView = inflater.inflate(getLayoutId(), container, false);\r\n        mUnbinder = ButterKnife.bind(this, mRootView);\r\n        initArgs();\r\n        initPage();\r\n        return mRootView;\r\n    }\r\n\r\n    @Override\r\n    protected void initPage() {\r\n        initCommonTitleBar();\r\n        initViews();\r\n        initListeners();\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onDestroyView() {\r\n        if (mUnbinder != null) {\r\n            mUnbinder.unbind();\r\n        }\r\n        super.onDestroyView();\r\n    }\r\n\r\n    protected View.OnClickListener getLeftClickListener() {\r\n        return v -> popToBack();\r\n    }\r\n\r\n    protected boolean showTitleBar() {\r\n        return false;\r\n    }\r\n\r\n    private void initCommonTitleBar() {\r\n        if (showTitleBar()) {\r\n            appTitleController = new AppTitleController(getContext()).insert2Parent((ViewGroup) mRootView);\r\n            appTitleController.ivBack.setOnClickListener(getLeftClickListener());\r\n            appTitleController.tvTitle.setText(new AnnotationPresenter(getClass()).findDefinedFragmentTag());\r\n            wrapShadowEffect();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 因为阴影已有架构已不满足，所以需要这个来做\r\n     */\r\n    private void wrapShadowEffect() {\r\n        mRootView.setBackgroundColor(getContext().getColor(R.color.app_common_bg_white));\r\n        if (mRootView instanceof ShadowLinearLayout) {\r\n            int dimensionPixelSize = getResources().getDimensionPixelSize(R.dimen.dpx_45);\r\n            ShadowLinearLayout ll = (ShadowLinearLayout) mRootView;\r\n            ll.setShadowOn(R.drawable.bg_title_transparent_shadow, dimensionPixelSize);\r\n        }\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void initListeners() {\r\n\r\n    }\r\n\r\n    /**\r\n     * 获取进度条加载者\r\n     *\r\n     * @return 进度条加载者\r\n     */\r\n    public IProgressLoader getProgressLoader() {\r\n        if (mIProgressLoader == null) {\r\n            mIProgressLoader = ProgressLoader.create(getContext());\r\n        }\r\n        return mIProgressLoader;\r\n    }\r\n\r\n    /**\r\n     * 获取进度条加载者\r\n     *\r\n     * @param message\r\n     * @return 进度条加载者\r\n     */\r\n    public IProgressLoader getProgressLoader(String message) {\r\n        if (mIProgressLoader == null) {\r\n            mIProgressLoader = ProgressLoader.create(getContext(), message);\r\n        } else {\r\n            mIProgressLoader.updateMessage(message);\r\n        }\r\n        return mIProgressLoader;\r\n    }\r\n\r\n\r\n    public IMessageLoader getMessageLoader() {\r\n        if (mIMessageLoader == null) {\r\n            mIMessageLoader = WidgetUtils.getMiniLoadingDialog(getContext());\r\n        }\r\n        return mIMessageLoader;\r\n    }\r\n\r\n    public IMessageLoader getMessageLoader(String message) {\r\n        if (mIMessageLoader == null) {\r\n            mIMessageLoader = WidgetUtils.getMiniLoadingDialog(getContext(), message);\r\n        } else {\r\n            mIMessageLoader.updateMessage(message);\r\n        }\r\n        return mIMessageLoader;\r\n    }\r\n\r\n    @Override\r\n    public void onConfigurationChanged(Configuration newConfig) {\r\n        //屏幕旋转时刷新一下title\r\n        super.onConfigurationChanged(newConfig);\r\n        ViewGroup root = (ViewGroup) getRootView();\r\n        if (root.getChildAt(0) instanceof TitleBar) {\r\n            root.removeViewAt(0);\r\n            initCommonTitleBar();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onResume() {\r\n        super.onResume();\r\n    }\r\n\r\n    @Override\r\n    public void onPause() {\r\n        super.onPause();\r\n    }\r\n\r\n    //==============================页面跳转api===================================//\r\n\r\n    /**\r\n     * 打开一个新的页面【建议只在主tab页使用】\r\n     *\r\n     * @param clazz\r\n     * @param <T>\r\n     * @return\r\n     */\r\n    public <T extends XPageFragment> Fragment openNewPage(Class<T> clazz) {\r\n        return new PageOption(clazz)\r\n                .setNewActivity(true)\r\n                .open(this);\r\n    }\r\n\r\n    /**\r\n     * 打开一个新的页面【建议只在主tab页使用】\r\n     *\r\n     * @param clazzName\r\n     * @param <T>\r\n     * @return\r\n     */\r\n    public <T extends XPageFragment> Fragment openNewPage(String clazzName) {\r\n        return new PageOption(clazzName)\r\n                .setAnim(CoreAnim.slide)\r\n                .setNewActivity(true)\r\n                .open(this);\r\n    }\r\n\r\n\r\n    /**\r\n     * 打开一个新的页面【建议只在主tab页使用】\r\n     *\r\n     * @param clazz\r\n     * @param <T>\r\n     * @return\r\n     */\r\n    public <T extends XPageFragment> Fragment openNewPage(Class<T> clazz, @NonNull Class<? extends XPageActivity> containActivityClazz) {\r\n        return new PageOption(clazz)\r\n                .setNewActivity(true)\r\n                .setContainActivityClazz(containActivityClazz)\r\n                .open(this);\r\n    }\r\n\r\n    /**\r\n     * 打开一个新的页面【建议只在主tab页使用】\r\n     *\r\n     * @param clazz\r\n     * @param <T>\r\n     * @return\r\n     */\r\n    public <T extends XPageFragment> Fragment openNewPage(Class<T> clazz, String key, Object value) {\r\n        PageOption option = new PageOption(clazz).setNewActivity(true);\r\n        return openPage(option, key, value);\r\n    }\r\n\r\n    public Fragment openPage(PageOption option, String key, Object value) {\r\n        if (value instanceof Integer) {\r\n            option.putInt(key, (Integer) value);\r\n        } else if (value instanceof Float) {\r\n            option.putFloat(key, (Float) value);\r\n        } else if (value instanceof String) {\r\n            option.putString(key, (String) value);\r\n        } else if (value instanceof Boolean) {\r\n            option.putBoolean(key, (Boolean) value);\r\n        } else if (value instanceof Long) {\r\n            option.putLong(key, (Long) value);\r\n        } else if (value instanceof Double) {\r\n            option.putDouble(key, (Double) value);\r\n        } else if (value instanceof Parcelable) {\r\n            option.putParcelable(key, (Parcelable) value);\r\n        } else if (value instanceof Serializable) {\r\n            option.putSerializable(key, (Serializable) value);\r\n        } else {\r\n            option.putString(key, serializeObject(value));\r\n        }\r\n        return option.open(this);\r\n    }\r\n\r\n    /**\r\n     * 打开页面\r\n     *\r\n     * @param clazz\r\n     * @param <T>\r\n     * @return\r\n     */\r\n    public <T extends XPageFragment> Fragment openPage(Class<T> clazz, boolean addToBackStack, String key, String value) {\r\n        return new PageOption(clazz)\r\n                .setAddToBackStack(addToBackStack)\r\n                .putString(key, value)\r\n                .open(this);\r\n    }\r\n\r\n    /**\r\n     * 打开页面\r\n     *\r\n     * @param clazz\r\n     * @param <T>\r\n     * @return\r\n     */\r\n    public <T extends XPageFragment> Fragment openPage(Class<T> clazz, String key, Object value) {\r\n        return openPage(clazz, true, key, value);\r\n    }\r\n\r\n    /**\r\n     * 打开页面\r\n     *\r\n     * @param clazz\r\n     * @param <T>\r\n     * @return\r\n     */\r\n    public <T extends XPageFragment> Fragment openPage(Class<T> clazz, boolean addToBackStack, String key, Object value) {\r\n        PageOption option = new PageOption(clazz).setAddToBackStack(addToBackStack);\r\n        return openPage(option, key, value);\r\n    }\r\n\r\n    /**\r\n     * 打开页面\r\n     *\r\n     * @param clazz\r\n     * @param <T>\r\n     * @return\r\n     */\r\n    public <T extends XPageFragment> Fragment openPage(Class<T> clazz, String key, String value) {\r\n        return new PageOption(clazz)\r\n                .putString(key, value)\r\n                .open(this);\r\n    }\r\n\r\n    /**\r\n     * 打开页面,需要结果返回\r\n     *\r\n     * @param clazz\r\n     * @param <T>\r\n     * @return\r\n     */\r\n    public <T extends XPageFragment> Fragment openPageForResult(Class<T> clazz, String key, Object value, int requestCode) {\r\n        PageOption option = new PageOption(clazz).setRequestCode(requestCode);\r\n        return openPage(option, key, value);\r\n    }\r\n\r\n    /**\r\n     * 打开页面,需要结果返回\r\n     *\r\n     * @param clazz\r\n     * @param <T>\r\n     * @return\r\n     */\r\n    public <T extends XPageFragment> Fragment openPageForResult(Class<T> clazz, String key, String value, int requestCode) {\r\n        return new PageOption(clazz)\r\n                .setRequestCode(requestCode)\r\n                .putString(key, value)\r\n                .open(this);\r\n    }\r\n\r\n    /**\r\n     * 打开一个新的页面,需要结果返回\r\n     *\r\n     * @param clazz\r\n     * @param <T>\r\n     * @return\r\n     */\r\n    public <T extends XPageFragment> Fragment openNewPageForResult(Class<T> clazz, String key, String value, int requestCode) {\r\n        return new PageOption(clazz)\r\n                .setNewActivity(true)\r\n                .setRequestCode(requestCode)\r\n                .putString(key, value)\r\n                .open(this);\r\n    }\r\n\r\n    /**\r\n     * 打开页面,需要结果返回\r\n     *\r\n     * @param clazz\r\n     * @param <T>\r\n     * @return\r\n     */\r\n    public <T extends XPageFragment> Fragment openPageForResult(Class<T> clazz, int requestCode) {\r\n        return new PageOption(clazz)\r\n                .setRequestCode(requestCode)\r\n                .open(this);\r\n    }\r\n\r\n    /**\r\n     * 序列化对象\r\n     *\r\n     * @param object\r\n     * @return\r\n     */\r\n    public String serializeObject(Object object) {\r\n        return XRouter.getInstance().navigation(SerializationService.class).object2Json(object);\r\n    }\r\n\r\n    /**\r\n     * 反序列化对象\r\n     *\r\n     * @param input\r\n     * @param clazz\r\n     * @return\r\n     */\r\n    public <T> T deserializeObject(String input, Type clazz) {\r\n        return XRouter.getInstance().navigation(SerializationService.class).parseObject(input, clazz);\r\n    }\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/bytemiracle/project/core/BaseFragment.java	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
+++ app/src/main/java/com/bytemiracle/project/core/BaseFragment.java	(date 1612355258837)
@@ -64,7 +64,7 @@
      * 消息加载框
      */
     private IMessageLoader mIMessageLoader;
-    private AppTitleController appTitleController;
+    protected AppTitleController appTitleController;
     private Unbinder mUnbinder;
     protected View mRootView;
 
Index: app/src/main/java/com/bytemiracle/project/adapter/SimpleRecyclerMsgAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>/*\r\n * Copyright (C) 2020 xuexiangjys(xuexiangjys@163.com)\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *       http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n *\r\n */\r\n\r\npackage com.bytemiracle.project.adapter;\r\n\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.Drawable;\r\nimport android.text.Spannable;\r\nimport android.text.SpannableStringBuilder;\r\nimport android.text.style.BackgroundColorSpan;\r\nimport android.util.Log;\r\nimport android.view.View;\r\n\r\nimport com.bytemiracle.project.R;\r\nimport com.bytemiracle.project.bean.SysMsg;\r\nimport com.bytemiracle.project.service.MsgService;\r\nimport com.bytemiracle.project.utils.DateFormatUtil;\r\nimport com.bytemiracle.project.widget.MsgDetailDialog;\r\nimport com.scwang.smartrefresh.layout.adapter.SmartRecyclerAdapter;\r\nimport com.scwang.smartrefresh.layout.adapter.SmartViewHolder;\r\nimport com.xuexiang.xui.widget.button.roundbutton.RoundButton;\r\nimport com.xuexiang.xui.widget.button.shinebutton.ShineButton;\r\nimport com.xuexiang.xui.widget.textview.label.LabelTextView;\r\nimport com.xuexiang.xutil.common.StringUtils;\r\n\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.net.URL;\r\n\r\nimport static com.xuexiang.xutil.XUtil.runOnUiThread;\r\nimport static com.xuexiang.xutil.resource.ResUtils.getResources;\r\n\r\npublic class SimpleRecyclerMsgAdapter extends SmartRecyclerAdapter<SysMsg> {\r\n\r\n    private MsgService msgService;\r\n    public SimpleRecyclerMsgAdapter() {\r\n        super(R.layout.attr_table_row_msg);\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void onBindViewHolder(SmartViewHolder smartViewHolder, SysMsg values, int i) {\r\n        smartViewHolder.text(R.id.createTime, DateFormatUtil.dateConverString(values.getCreatTime()));\r\n        smartViewHolder.text(R.id.title, values.getTitle());\r\n        if (values.getThumbWord()!=null&&!\"\".equals(values.getThumbWord())){\r\n            smartViewHolder.text(R.id.thumbWord, values.getThumbWord());\r\n        }\r\n        //smartViewHolder.text(R.id., values.getScFlag());\r\n        LabelTextView label = smartViewHolder.findViewById(R.id.thumbWord);\r\n        //private Integer msgType;//消息类型 1：汇报讲话；2：法律法规;3:日常学习\r\n        if (values.getThumb()!=null){\r\n            try{\r\n                new Thread(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        try {\r\n                            InputStream is = (InputStream) new URL(values.getThumb()).getContent();\r\n                            final Drawable d = Drawable.createFromStream(is, \"src\");\r\n                            is.close();\r\n                            runOnUiThread(new Runnable() {\r\n                                @Override\r\n                                public void run() {\r\n                                    label.setBackgroundDrawable(d);\r\n                                }\r\n                            });\r\n                        } catch (IOException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                }).start();\r\n            }catch (Exception e){\r\n                System.out.println(\"设置图片异常\");\r\n                e.printStackTrace();\r\n            }\r\n\r\n        }else{\r\n            if (values.getMsgType()==1){\r\n                label.setBackgroundDrawable(getResources().getDrawable(R.drawable.default_msg_hbjh));\r\n            }else if (values.getMsgType()==2){\r\n                label.setBackgroundDrawable(getResources().getDrawable(R.drawable.default_msg_flfg));\r\n            }else if (values.getMsgType()==3){\r\n                label.setBackgroundDrawable(getResources().getDrawable(R.drawable.default_msg_rcxx));\r\n            }\r\n        }\r\n\r\n        String status = values.getStatus();\r\n        if (\"0\".equals(status)){\r\n            label.setLabelText(\"新\");\r\n            label.setLabelBackgroundColor(getResources().getColor(R.color.xui_config_color_red));\r\n        }else if (\"1\".equals(status)){\r\n            label.setLabelText(\"已读\");\r\n            label.setLabelBackgroundColor(getResources().getColor(R.color.app_color_theme_6));\r\n        }\r\n\r\n        /*if (!StringUtils.isEmpty(values.getContent())){\r\n            if (values.getContent().length()>60){\r\n                smartViewHolder.text(R.id.content, values.getContent().replace(\"\\\\n\",\"\").substring(0,60)+\"......\");\r\n            }else{\r\n                smartViewHolder.text(R.id.content,values.getContent().replace(\"\\\\n\",\"\"));\r\n            }\r\n        }*/\r\n        //查看按钮\r\n        RoundButton btn = smartViewHolder.findViewById(R.id.detail);\r\n        btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                MsgDetailDialog.getInstance().setMsgDetail(values);\r\n            }\r\n        });\r\n        //收藏按钮\r\n        ShineButton scBtn = smartViewHolder.findViewById(R.id.scFlag);\r\n\r\n        if (\"1\".equals(values.getScFlag())){\r\n\r\n            //收藏\r\n            scBtn.setChecked(true);\r\n        }\r\n        scBtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                msgService = new MsgService();\r\n                String scflag = \"1\".equals(values.getScFlag())?\"0\":\"1\";\r\n                values.setScFlag(scflag);\r\n                msgService.updateMsgScFlag(values);\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/bytemiracle/project/adapter/SimpleRecyclerMsgAdapter.java	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
+++ app/src/main/java/com/bytemiracle/project/adapter/SimpleRecyclerMsgAdapter.java	(date 1612358160861)
@@ -17,12 +17,7 @@
 
 package com.bytemiracle.project.adapter;
 
-import android.graphics.Color;
 import android.graphics.drawable.Drawable;
-import android.text.Spannable;
-import android.text.SpannableStringBuilder;
-import android.text.style.BackgroundColorSpan;
-import android.util.Log;
 import android.view.View;
 
 import com.bytemiracle.project.R;
@@ -35,7 +30,6 @@
 import com.xuexiang.xui.widget.button.roundbutton.RoundButton;
 import com.xuexiang.xui.widget.button.shinebutton.ShineButton;
 import com.xuexiang.xui.widget.textview.label.LabelTextView;
-import com.xuexiang.xutil.common.StringUtils;
 
 import java.io.IOException;
 import java.io.InputStream;
@@ -55,7 +49,7 @@
     @Override
     protected void onBindViewHolder(SmartViewHolder smartViewHolder, SysMsg values, int i) {
         smartViewHolder.text(R.id.createTime, DateFormatUtil.dateConverString(values.getCreatTime()));
-        smartViewHolder.text(R.id.title, values.getTitle());
+        smartViewHolder.text(R.id.et_title, values.getTitle());
         if (values.getThumbWord()!=null&&!"".equals(values.getThumbWord())){
             smartViewHolder.text(R.id.thumbWord, values.getThumbWord());
         }
Index: app/src/main/res/values-2560x1600/dimens.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?><!--\r\n  ~ Copyright (C) 2021 xuexiangjys(xuexiangjys@163.com)\r\n  ~\r\n  ~ Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  ~ you may not use this file except in compliance with the License.\r\n  ~ You may obtain a copy of the License at\r\n  ~\r\n  ~       http://www.apache.org/licenses/LICENSE-2.0\r\n  ~\r\n  ~ Unless required by applicable law or agreed to in writing, software\r\n  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  ~ See the License for the specific language governing permissions and\r\n  ~ limitations under the License.\r\n  ~\r\n  -->\r\n\r\n<resources>\r\n    <dimen name=\"activity_horizontal_margin\">14.2222dp</dimen>\r\n    <dimen name=\"activity_vertical_margin\">14.2222dp</dimen>\r\n    <dimen name=\"block_low_width\">35.5556dp</dimen>\r\n    <dimen name=\"block_low_height\">7.1111dp</dimen>\r\n    <dimen name=\"block_high_width\">17.7778dp</dimen>\r\n    <dimen name=\"block_high_height\">174.2222dp</dimen>\r\n    <dimen name=\"radius_16\">14.2222dp</dimen>\r\n    <dimen name=\"spacing_16\">14.2222dp</dimen>\r\n    <dimen name=\"list_divider_height_negative\">-1px</dimen>\r\n    <dimen name=\"dp_1\">0.8889dp</dimen>\r\n    <dimen name=\"dp_2\">1.7778dp</dimen>\r\n    <dimen name=\"dp_3\">2.6667dp</dimen>\r\n    <dimen name=\"dp_4\">3.5556dp</dimen>\r\n    <dimen name=\"dp_5\">4.4444dp</dimen>\r\n    <dimen name=\"dp_6\">5.3333dp</dimen>\r\n    <dimen name=\"dp_7\">6.2222dp</dimen>\r\n    <dimen name=\"dp_8\">7.1111dp</dimen>\r\n    <dimen name=\"dp_10\">8.8889dp</dimen>\r\n    <dimen name=\"dp_12\">10.6667dp</dimen>\r\n    <dimen name=\"dp_13\">11.5556dp</dimen>\r\n    <dimen name=\"dp_15\">13.3333dp</dimen>\r\n    <dimen name=\"dp_16\">14.2222dp</dimen>\r\n    <dimen name=\"dp_18\">16.0000dp</dimen>\r\n    <dimen name=\"dp_20\">17.7778dp</dimen>\r\n    <dimen name=\"dp_23\">20.4444dp</dimen>\r\n    <dimen name=\"dp_24\">21.3333dp</dimen>\r\n    <dimen name=\"dp_25\">22.2222dp</dimen>\r\n    <dimen name=\"dp_28\">24.8889dp</dimen>\r\n    <dimen name=\"dp_30\">26.6667dp</dimen>\r\n    <dimen name=\"dp_32\">28.4444dp</dimen>\r\n    <dimen name=\"dp_35\">31.1111dp</dimen>\r\n    <dimen name=\"dp_40\">35.5556dp</dimen>\r\n    <dimen name=\"dp_42\">37.3333dp</dimen>\r\n    <dimen name=\"dp_45\">40.0000dp</dimen>\r\n    <dimen name=\"dp_48\">42.6667dp</dimen>\r\n    <dimen name=\"dp_50\">44.4444dp</dimen>\r\n    <dimen name=\"dp_55\">48.8889dp</dimen>\r\n    <dimen name=\"dp_58\">35dp</dimen>\r\n    <dimen name=\"dp_60\">53.3333dp</dimen>\r\n    <dimen name=\"dp_65\">57.7778dp</dimen>\r\n    <dimen name=\"dp_70\">62.2222dp</dimen>\r\n    <dimen name=\"dp_75\">66.6667dp</dimen>\r\n    <dimen name=\"dp_80\">71.1111dp</dimen>\r\n    <dimen name=\"dp_90\">80.0000dp</dimen>\r\n    <dimen name=\"dp_100\">88.8889dp</dimen>\r\n    <dimen name=\"dp_110\">97.7778dp</dimen>\r\n    <dimen name=\"dp_120\">106.6667dp</dimen>\r\n    <dimen name=\"dp_150\">133.3333dp</dimen>\r\n    <dimen name=\"dp_180\">160.0000dp</dimen>\r\n    <dimen name=\"dp_200\">177.7778dp</dimen>\r\n    <dimen name=\"dp_230\">204.4444dp</dimen>\r\n    <dimen name=\"dp_240\">213.3333dp</dimen>\r\n    <dimen name=\"dp_250\">222.2222dp</dimen>\r\n    <dimen name=\"dp_280\">248.8889dp</dimen>\r\n    <dimen name=\"dp_300\">266.6667dp</dimen>\r\n    <dimen name=\"dp_350\">311.1111dp</dimen>\r\n    <dimen name=\"dp_zero\">0.0000dp</dimen>\r\n    <dimen name=\"dp_1200\">1066.6667dp</dimen>\r\n    <dimen name=\"dp_331\">294.2222dp</dimen>\r\n    <dimen name=\"dp_600\">533.3333dp</dimen>\r\n    <dimen name=\"dp_360\">320.0000dp</dimen>\r\n    <dimen name=\"dp_225\">200.0000dp</dimen>\r\n    <dimen name=\"dp_400\">355.5556dp</dimen>\r\n    <dimen name=\"dp_340\">302.2222dp</dimen>\r\n    <dimen name=\"dp_310\">275.5556dp</dimen>\r\n    <dimen name=\"dp_500\">444.4444dp</dimen>\r\n    <dimen name=\"dp_52\">46.2222dp</dimen>\r\n    <dimen name=\"dp_54\">48.0000dp</dimen>\r\n    <dimen name=\"dp_211\">187.5556dp</dimen>\r\n    <dimen name=\"dp_negative_7\">-6.2222dp</dimen>\r\n    <dimen name=\"sp_10\">8.8889sp</dimen>\r\n    <dimen name=\"sp_17\">15.1111sp</dimen>\r\n    <dimen name=\"sp_12\">10.6667sp</dimen>\r\n    <dimen name=\"sp_14\">12.4444sp</dimen>\r\n    <dimen name=\"sp_15\">13.3333sp</dimen>\r\n    <dimen name=\"sp_16\">14.2222sp</dimen>\r\n    <dimen name=\"sp_28\">24.8889sp</dimen>\r\n    <dimen name=\"sp_30\">26.6667sp</dimen>\r\n    <dimen name=\"dp_common_item_height\">40.0000dp</dimen>\r\n    <dimen name=\"dp_common_item_width\">80.0000dp</dimen>\r\n    <dimen name=\"color_utils_square_length\">40.8889dp</dimen>\r\n    <dimen name=\"color_utils_square_margin\">20.4444dp</dimen>\r\n    <dimen name=\"color_utils_square_desc_marginTop\">8.8889dp</dimen>\r\n    <dimen name=\"drawable_utils_column_marginBottom\">31.1111dp</dimen>\r\n    <dimen name=\"drawable_utils_item_marginHorizontal\">17.7778dp</dimen>\r\n    <dimen name=\"drawable_utils_common_shape_size\">44.4444dp</dimen>\r\n    <dimen name=\"custom_section_height\">32.0000dp</dimen>\r\n    <dimen name=\"text_margin\">14.2222dp</dimen>\r\n\r\n    <dimen name=\"left_0_panel_tab_height\">88.8889dp</dimen>\r\n    <dimen name=\"default_width_use_weight\">0.0000dp</dimen>\r\n\r\n    <dimen name=\"settings_sub_title_min_height\">57.7778dp</dimen>\r\n    <dimen name=\"settings_sub_account_item_min_height\">31.1111dp</dimen>\r\n    <dimen name=\"btn_roundrect_radius_common\">8.8889dp</dimen>\r\n    <dimen name=\"text_size_settings_sub_item\">14.2222sp</dimen>\r\n    <dimen name=\"text_size_app_common_content\">12.4444sp</dimen>\r\n    <dimen name=\"text_size_app_common_indicator\">10sp</dimen>\r\n    <dimen name=\"text_size_back_bold_1\">22sp</dimen>\r\n    <dimen name=\"text_size_back_bold_2\">16sp</dimen>\r\n    <dimen name=\"text_size_back_bold_3\">12sp</dimen>\r\n    <dimen name=\"pad_content_horizontal_padding\">62.2222dp</dimen>\r\n    <dimen name=\"pad_content_vertical_padding\">26.6667dp</dimen>\r\n    <dimen name=\"pad_input_multi_line_height\">88.8889dp</dimen>\r\n\r\n    <dimen name=\"item_setting_update_min_height\">40.0000dp</dimen>\r\n    <dimen name=\"dpx_370\">370dp</dimen>\r\n    <dimen name=\"dpx_230\">230dp</dimen>\r\n    <dimen name=\"dpx_260\">260dp</dimen>\r\n    <dimen name=\"dpx_8\">8dp</dimen>\r\n    <dimen name=\"dpx_40\">40dp</dimen>\r\n    <dimen name=\"dpx_90\">90dp</dimen>\r\n    <dimen name=\"dpx_48\">48dp</dimen>\r\n    <dimen name=\"dpx_96\">96dp</dimen>\r\n    <dimen name=\"dpx_28\">28dp</dimen>\r\n    <dimen name=\"dpx_85\">85dp</dimen>\r\n    <dimen name=\"dpx_15\">15dp</dimen>\r\n    <dimen name=\"dpx_20\">20dp</dimen>\r\n    <dimen name=\"dpx_36\">36dp</dimen>\r\n    <dimen name=\"dpx_25\">25dp</dimen>\r\n    <dimen name=\"dpx_zero\">0dp</dimen>\r\n    <dimen name=\"dpx_5\">5dp</dimen>\r\n    <dimen name=\"dpx_app_login_page_center_logo_top_margin\">80dp</dimen>\r\n    <dimen name=\"dpx_app_main_page_center_logo_top_margin\">50dp</dimen>\r\n    <dimen name=\"dpx_60\">60dp</dimen>\r\n    <dimen name=\"dpx_350\">350dp</dimen>\r\n    <dimen name=\"dpx_app_main_page_center_logo_width\">330dp</dimen>\r\n    <dimen name=\"dpx_app_main_page_center_logo_height\">71dp</dimen>\r\n\r\n    <dimen name=\"spx_14\">14sp</dimen>\r\n    <dimen name=\"spx_12\">12sp</dimen>\r\n    <dimen name=\"spx_16\">16sp</dimen>\r\n    <dimen name=\"spx_18\">18sp</dimen>\r\n    <dimen name=\"spx_20\">20sp</dimen>\r\n    <dimen name=\"spx_22\">22sp</dimen>\r\n    <dimen name=\"dpx_12\">12dp</dimen>\r\n    <dimen name=\"dpx_10\">10dp</dimen>\r\n    <dimen name=\"dpx_shadow_height\">10dp</dimen>\r\n    <dimen name=\"dpx_220\">220dp</dimen>\r\n    <dimen name=\"dpx_left_panel_item_height\">65dp</dimen>\r\n    <dimen name=\"dpx_sub_left_item_height\">55dp</dimen>\r\n    <dimen name=\"dpx_55\">55dp</dimen>\r\n    <dimen name=\"dpx_50\">50dp</dimen>\r\n    <dimen name=\"dpx_left_0_panel_width\">65dp</dimen>\r\n    <dimen name=\"dpx_settings_sub_title_height\">90dp</dimen>\r\n    <dimen name=\"dpx_settings_sub_title_hor_padding\">20dp</dimen>\r\n    <dimen name=\"dpx_120\">120dp</dimen>\r\n    <dimen name=\"dpx_630\">630dp</dimen>\r\n    <dimen name=\"dpx_30\">30dp</dimen>\r\n    <dimen name=\"dpx_35\">35dp</dimen>\r\n    <dimen name=\"dpx_100\">100dp</dimen>\r\n    <dimen name=\"dpx_45\">45dp</dimen>\r\n    <dimen name=\"dpx_75\">75dp</dimen>\r\n    <dimen name=\"dpx_65\">65dp</dimen>\r\n    <dimen name=\"divider_1dp_weight\">0.5dp</dimen>\r\n    <dimen name=\"divider_1px_weight\">1px</dimen>\r\n    <dimen name=\"divider_2dp_weight\">2dp</dimen>\r\n    <dimen name=\"dpx_250\">250dp</dimen>\r\n    <dimen name=\"dpx_280\">280dp</dimen>\r\n\r\n    <!--    修改XUI默认字体大小-->\r\n    <dimen name=\"xui_tab_segment_text_size\">@dimen/spx_12</dimen>\r\n    <dimen name=\"default_md_listitem_textsize_tablet_big\">@dimen/spx_12</dimen>\r\n    <dimen name=\"default_md_listitem_textsize_tablet_small\">@dimen/spx_12</dimen>\r\n    <dimen name=\"default_md_listitem_textsize_phone\">@dimen/spx_12</dimen>\r\n\r\n    <dimen name=\"xui_config_size_spinner_text_tablet_big\">@dimen/spx_12</dimen>\r\n    <dimen name=\"xui_config_size_spinner_text_tablet_small\">@dimen/spx_12</dimen>\r\n    <dimen name=\"xui_config_size_spinner_text_phone\">@dimen/spx_12</dimen>\r\n</resources>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/values-2560x1600/dimens.xml	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
+++ app/src/main/res/values-2560x1600/dimens.xml	(date 1612358407957)
@@ -155,9 +155,12 @@
     <dimen name="dpx_10">10dp</dimen>
     <dimen name="dpx_shadow_height">10dp</dimen>
     <dimen name="dpx_220">220dp</dimen>
+    <dimen name="dpx_pad_content_horizontal_padding">@dimen/dpx_220</dimen>
+    <dimen name="dpx_pad_content_vertical_padding">@dimen/dpx_60</dimen>
     <dimen name="dpx_left_panel_item_height">65dp</dimen>
     <dimen name="dpx_sub_left_item_height">55dp</dimen>
     <dimen name="dpx_55">55dp</dimen>
+    <dimen name="dpx_285">285dp</dimen>
     <dimen name="dpx_50">50dp</dimen>
     <dimen name="dpx_left_0_panel_width">65dp</dimen>
     <dimen name="dpx_settings_sub_title_height">90dp</dimen>
@@ -171,6 +174,7 @@
     <dimen name="dpx_75">75dp</dimen>
     <dimen name="dpx_65">65dp</dimen>
     <dimen name="divider_1dp_weight">0.5dp</dimen>
+    <dimen name="divider_1dp">1dp</dimen>
     <dimen name="divider_1px_weight">1px</dimen>
     <dimen name="divider_2dp_weight">2dp</dimen>
     <dimen name="dpx_250">250dp</dimen>
Index: app/src/main/res/layout/attr_table_row_msg.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<!--\r\n  ~ Copyright (C) 2020 xuexiangjys(xuexiangjys@163.com)\r\n  ~\r\n  ~ Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  ~ you may not use this file except in compliance with the License.\r\n  ~ You may obtain a copy of the License at\r\n  ~\r\n  ~       http://www.apache.org/licenses/LICENSE-2.0\r\n  ~\r\n  ~ Unless required by applicable law or agreed to in writing, software\r\n  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  ~ See the License for the specific language governing permissions and\r\n  ~ limitations under the License.\r\n  ~\r\n  -->\r\n\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"wrap_content\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:layout_centerHorizontal=\"true\"\r\n    android:orientation=\"vertical\">\r\n    <TextView\r\n        android:gravity=\"center\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"@dimen/dp_20\"/>\r\n\r\n    <TextView\r\n        android:gravity=\"center\"\r\n        android:id=\"@+id/createTime\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:text=\"2015-09-02 10:05:08\"/>\r\n    <LinearLayout\r\n        android:background=\"#fff\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:orientation=\"vertical\"\r\n        android:padding=\"@dimen/dp_10\"\r\n        >\r\n        <com.xuexiang.xui.widget.textview.label.LabelTextView\r\n            android:id=\"@+id/thumbWord\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"@dimen/dp_331\"\r\n            android:layout_marginStart=\"@dimen/dp_5\"\r\n            android:gravity=\"bottom\"\r\n            android:textColorHint=\"#03A9F4\"\r\n            android:textColor=\"@color/white\"\r\n            android:textSize=\"@dimen/dp_20\"\r\n            android:textStyle=\"bold\"\r\n            app:label_backgroundColor=\"#03A9F4\"\r\n            app:label_distance=\"@dimen/dp_20\"\r\n            app:label_height=\"@dimen/dp_30\"\r\n            app:label_orientation=\"RIGHT_TOP\"\r\n            app:label_textSize=\"@dimen/sp_15\"\r\n            app:label_textStyle=\"BOLD\" />\r\n        <!--<TextView\r\n            android:text=\"标题\"\r\n            android:id=\"@+id/title\"\r\n            android:textSize=\"@dimen/dp_18\"\r\n            android:textColor=\"#FFFEFE\"\r\n            android:background=\"#03A9F4\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"@dimen/dp_38\"\r\n            android:gravity=\"left|center\"/>-->\r\n        <TextView\r\n            android:text=\"标题\"\r\n            android:id=\"@+id/title\"\r\n            android:layout_margin=\"@dimen/dp_15\"\r\n            android:textSize=\"@dimen/dp_18\"\r\n            android:textStyle=\"bold\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"/>\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:gravity=\"right\"\r\n            android:layout_marginTop=\"@dimen/spacing_16\"\r\n            android:orientation=\"horizontal\">\r\n\r\n            <com.xuexiang.xui.widget.button.shinebutton.ShineButton\r\n                android:id=\"@+id/scFlag\"\r\n                android:layout_width=\"@dimen/dp_30\"\r\n                android:layout_height=\"@dimen/dp_30\"\r\n                android:layout_gravity=\"right|center_vertical\"\r\n                android:layout_marginRight=\"@dimen/dp_30\"\r\n                app:sb_checked_color=\"#f26d7d\"\r\n                app:sb_icon_image=\"@drawable/ic_heart\"\r\n                app:sb_normal_color=\"@android:color/darker_gray\"/>\r\n\r\n            <com.xuexiang.xui.widget.button.roundbutton.RoundButton\r\n                android:id=\"@+id/detail\"\r\n                style=\"@style/RoundButton.Auto\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_marginRight=\"@dimen/dp_10\"\r\n                android:background=\"#51F4F4F4\"\r\n                android:text=\"查看\" />\r\n        </LinearLayout>\r\n    </LinearLayout>\r\n<!--        android:layout_width=\"match_parent\"-->\r\n<!--        android:layout_height=\"@dimen/default_width_use_weight\"-->\r\n<!--        android:layout_weight=\"1\" />-->\r\n<!--        <TextView-->\r\n<!--            android:id=\"@+id/title\"-->\r\n<!--            android:layout_width=\"wrap_content\"-->\r\n<!--            android:layout_height=\"wrap_content\"/>-->\r\n<!--        <TextView-->\r\n<!--            android:id=\"@+id/content\"-->\r\n<!--            android:layout_width=\"wrap_content\"-->\r\n<!--            android:layout_height=\"wrap_content\"/>-->\r\n<!--        <Space-->\r\n<!--            android:layout_width=\"match_parent\"-->\r\n<!--            android:layout_height=\"@dimen/default_width_use_weight\"-->\r\n<!--            android:layout_weight=\"1\" />-->\r\n\r\n\r\n\r\n</LinearLayout>\r\n\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/attr_table_row_msg.xml	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
+++ app/src/main/res/layout/attr_table_row_msg.xml	(date 1612358434189)
@@ -67,7 +67,7 @@
             android:gravity="left|center"/>-->
         <TextView
             android:text="标题"
-            android:id="@+id/title"
+            android:id="@+id/et_title"
             android:layout_margin="@dimen/dp_15"
             android:textSize="@dimen/dp_18"
             android:textStyle="bold"
Index: app/src/main/res/layout/fragment_mindsemanteme.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<com.bytemiracle.project.core.framework.view.ShadowLinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:id=\"@+id/mindsemanteme_Fragment\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:orientation=\"vertical\">\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:orientation=\"horizontal\">\r\n\r\n        <com.xuexiang.xui.widget.tabbar.VerticalTabLayout\r\n            android:id=\"@+id/noteType_layout\"\r\n            style=\"@style/app_common_left_0_panel\" />\r\n\r\n        <LinearLayout\r\n            android:id=\"@+id/audio\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:orientation=\"horizontal\">\r\n\r\n            <LinearLayout\r\n                style=\"@style/app_common_left_1_panel\"\r\n                android:orientation=\"vertical\">\r\n\r\n                <LinearLayout\r\n                    android:id=\"@+id/audioSearchLay\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"@dimen/dpx_60\"\r\n                    android:gravity=\"center_vertical\"\r\n                    android:orientation=\"horizontal\"\r\n                    android:paddingStart=\"@dimen/dpx_10\"\r\n                    android:paddingTop=\"@dimen/dpx_12\"\r\n                    android:paddingEnd=\"@dimen/dpx_10\"\r\n                    android:paddingBottom=\"@dimen/dpx_12\">\r\n\r\n                    <LinearLayout\r\n                        android:layout_width=\"@dimen/default_width_use_weight\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:layout_weight=\"1\"\r\n                        android:background=\"@drawable/bg_app_common_input_rectangle\"\r\n                        android:gravity=\"center_vertical\"\r\n                        android:orientation=\"horizontal\">\r\n\r\n                        <ImageButton\r\n                            android:id=\"@+id/iv_search\"\r\n                            android:layout_width=\"@dimen/dpx_20\"\r\n                            android:layout_height=\"@dimen/dpx_20\"\r\n                            android:layout_marginStart=\"@dimen/dpx_12\"\r\n                            android:layout_marginEnd=\"@dimen/dpx_12\"\r\n                            android:background=\"@drawable/ic_search_gray\" />\r\n\r\n                        <EditText\r\n                            android:id=\"@+id/audioKey\"\r\n                            style=\"@style/common_app_content_text\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"match_parent\"\r\n                            android:background=\"@null\"\r\n                            android:gravity=\"left|center_vertical\"\r\n                            android:hint=\"搜索\"\r\n                            android:imeOptions=\"actionSearch\"\r\n                            android:paddingStart=\"@dimen/dpx_zero\"\r\n                            android:paddingEnd=\"@dimen/dpx_zero\" />\r\n\r\n                    </LinearLayout>\r\n\r\n                    <Button\r\n                        android:id=\"@+id/audioAddBtn\"\r\n                        android:layout_width=\"@dimen/dpx_36\"\r\n                        android:layout_height=\"@dimen/dpx_36\"\r\n                        android:layout_marginStart=\"@dimen/dpx_10\"\r\n                        android:background=\"@drawable/ic_znyy_add\" />\r\n                </LinearLayout>\r\n\r\n                <include layout=\"@layout/app_line_1px_height_gray\" />\r\n\r\n                <com.yanzhenjie.recyclerview.SwipeRecyclerView\r\n                    android:id=\"@+id/rv_audio\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:scrollbars=\"vertical\"\r\n                    app:layoutManager=\"androidx.recyclerview.widget.LinearLayoutManager\" />\r\n\r\n            </LinearLayout>\r\n\r\n            <include layout=\"@layout/app_line_1px_width\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:orientation=\"vertical\">\r\n                <!--灰色标题栏-->\r\n                <RelativeLayout\r\n                    style=\"@style/app_common_sub_title_layout\"\r\n                    android:layout_height=\"@dimen/dpx_settings_sub_title_height\">\r\n\r\n                    <LinearLayout\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_centerVertical=\"true\"\r\n                        android:orientation=\"vertical\">\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/detail_title\"\r\n                            style=\"@style/app_login_bold_black\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/detail_createTime\"\r\n                            style=\"@style/common_app_content_text\"\r\n                            android:layout_marginTop=\"@dimen/dpx_5\" />\r\n                    </LinearLayout>\r\n\r\n                    <!--右下角工具栏-->\r\n                    <LinearLayout\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_alignParentRight=\"true\"\r\n                        android:layout_alignParentBottom=\"true\"\r\n                        android:layout_marginBottom=\"@dimen/dpx_5\"\r\n                        android:orientation=\"horizontal\">\r\n\r\n                        <LinearLayout\r\n                            android:id=\"@+id/audio_edit_btn\"\r\n                            style=\"@style/app_common_gray_selector\"\r\n                            android:gravity=\"center_vertical\"\r\n                            android:orientation=\"horizontal\">\r\n\r\n                            <ImageView\r\n                                android:layout_width=\"@dimen/dpx_25\"\r\n                                android:layout_height=\"@dimen/dpx_25\"\r\n                                android:background=\"@drawable/ic_znyy_edit\" />\r\n\r\n                            <TextView\r\n                                style=\"@style/app_blue_text_white_button\"\r\n                                android:layout_width=\"match_parent\"\r\n                                android:paddingStart=\"@dimen/dpx_zero\"\r\n                                android:paddingEnd=\"@dimen/dpx_zero\"\r\n                                android:text=\"编辑\"\r\n                                android:textColor=\"@color/app_content_text_gray_1_color\" />\r\n                        </LinearLayout>\r\n\r\n                        <LinearLayout\r\n                            android:id=\"@+id/audio_types\"\r\n                            style=\"@style/app_common_gray_selector\"\r\n                            android:layout_marginStart=\"@dimen/dpx_20\"\r\n                            android:gravity=\"center_vertical\"\r\n                            android:orientation=\"horizontal\">\r\n\r\n                            <ImageView\r\n                                android:layout_width=\"@dimen/dpx_25\"\r\n                                android:layout_height=\"@dimen/dpx_25\"\r\n                                android:background=\"@drawable/ic_znyy_category\" />\r\n\r\n                            <TextView\r\n                                style=\"@style/app_blue_text_white_button\"\r\n                                android:layout_width=\"match_parent\"\r\n                                android:paddingStart=\"@dimen/dpx_zero\"\r\n                                android:paddingEnd=\"@dimen/dpx_zero\"\r\n                                android:text=\"分类\"\r\n                                android:textColor=\"@color/app_content_text_gray_1_color\" />\r\n                        </LinearLayout>\r\n                    </LinearLayout>\r\n\r\n                </RelativeLayout>\r\n\r\n                <TextView\r\n                    android:id=\"@+id/detail_content\"\r\n                    style=\"@style/common_app_content_text\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:background=\"@drawable/audio_bg\"\r\n                    android:gravity=\"left|top\"\r\n                    android:padding=\"@dimen/dpx_10\" />\r\n            </LinearLayout>\r\n        </LinearLayout>\r\n\r\n    </LinearLayout>\r\n\r\n</com.bytemiracle.project.core.framework.view.ShadowLinearLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/fragment_mindsemanteme.xml	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
+++ app/src/main/res/layout/fragment_mindsemanteme.xml	(date 1612355478368)
@@ -1,7 +1,5 @@
 <?xml version="1.0" encoding="utf-8"?>
 <com.bytemiracle.project.core.framework.view.ShadowLinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:app="http://schemas.android.com/apk/res-auto"
-    android:id="@+id/mindsemanteme_Fragment"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:orientation="vertical">
@@ -15,167 +13,10 @@
             android:id="@+id/noteType_layout"
             style="@style/app_common_left_0_panel" />
 
-        <LinearLayout
-            android:id="@+id/audio"
+        <FrameLayout
+            android:id="@+id/fl_container"
             android:layout_width="match_parent"
-            android:layout_height="match_parent"
-            android:orientation="horizontal">
-
-            <LinearLayout
-                style="@style/app_common_left_1_panel"
-                android:orientation="vertical">
-
-                <LinearLayout
-                    android:id="@+id/audioSearchLay"
-                    android:layout_width="match_parent"
-                    android:layout_height="@dimen/dpx_60"
-                    android:gravity="center_vertical"
-                    android:orientation="horizontal"
-                    android:paddingStart="@dimen/dpx_10"
-                    android:paddingTop="@dimen/dpx_12"
-                    android:paddingEnd="@dimen/dpx_10"
-                    android:paddingBottom="@dimen/dpx_12">
-
-                    <LinearLayout
-                        android:layout_width="@dimen/default_width_use_weight"
-                        android:layout_height="match_parent"
-                        android:layout_weight="1"
-                        android:background="@drawable/bg_app_common_input_rectangle"
-                        android:gravity="center_vertical"
-                        android:orientation="horizontal">
-
-                        <ImageButton
-                            android:id="@+id/iv_search"
-                            android:layout_width="@dimen/dpx_20"
-                            android:layout_height="@dimen/dpx_20"
-                            android:layout_marginStart="@dimen/dpx_12"
-                            android:layout_marginEnd="@dimen/dpx_12"
-                            android:background="@drawable/ic_search_gray" />
-
-                        <EditText
-                            android:id="@+id/audioKey"
-                            style="@style/common_app_content_text"
-                            android:layout_width="match_parent"
-                            android:layout_height="match_parent"
-                            android:background="@null"
-                            android:gravity="left|center_vertical"
-                            android:hint="搜索"
-                            android:imeOptions="actionSearch"
-                            android:paddingStart="@dimen/dpx_zero"
-                            android:paddingEnd="@dimen/dpx_zero" />
-
-                    </LinearLayout>
-
-                    <Button
-                        android:id="@+id/audioAddBtn"
-                        android:layout_width="@dimen/dpx_36"
-                        android:layout_height="@dimen/dpx_36"
-                        android:layout_marginStart="@dimen/dpx_10"
-                        android:background="@drawable/ic_znyy_add" />
-                </LinearLayout>
-
-                <include layout="@layout/app_line_1px_height_gray" />
-
-                <com.yanzhenjie.recyclerview.SwipeRecyclerView
-                    android:id="@+id/rv_audio"
-                    android:layout_width="match_parent"
-                    android:layout_height="match_parent"
-                    android:scrollbars="vertical"
-                    app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager" />
-
-            </LinearLayout>
-
-            <include layout="@layout/app_line_1px_width" />
-
-            <LinearLayout
-                android:layout_width="match_parent"
-                android:layout_height="match_parent"
-                android:orientation="vertical">
-                <!--灰色标题栏-->
-                <RelativeLayout
-                    style="@style/app_common_sub_title_layout"
-                    android:layout_height="@dimen/dpx_settings_sub_title_height">
-
-                    <LinearLayout
-                        android:layout_width="wrap_content"
-                        android:layout_height="wrap_content"
-                        android:layout_centerVertical="true"
-                        android:orientation="vertical">
-
-                        <TextView
-                            android:id="@+id/detail_title"
-                            style="@style/app_login_bold_black" />
-
-                        <TextView
-                            android:id="@+id/detail_createTime"
-                            style="@style/common_app_content_text"
-                            android:layout_marginTop="@dimen/dpx_5" />
-                    </LinearLayout>
-
-                    <!--右下角工具栏-->
-                    <LinearLayout
-                        android:layout_width="wrap_content"
-                        android:layout_height="wrap_content"
-                        android:layout_alignParentRight="true"
-                        android:layout_alignParentBottom="true"
-                        android:layout_marginBottom="@dimen/dpx_5"
-                        android:orientation="horizontal">
-
-                        <LinearLayout
-                            android:id="@+id/audio_edit_btn"
-                            style="@style/app_common_gray_selector"
-                            android:gravity="center_vertical"
-                            android:orientation="horizontal">
-
-                            <ImageView
-                                android:layout_width="@dimen/dpx_25"
-                                android:layout_height="@dimen/dpx_25"
-                                android:background="@drawable/ic_znyy_edit" />
-
-                            <TextView
-                                style="@style/app_blue_text_white_button"
-                                android:layout_width="match_parent"
-                                android:paddingStart="@dimen/dpx_zero"
-                                android:paddingEnd="@dimen/dpx_zero"
-                                android:text="编辑"
-                                android:textColor="@color/app_content_text_gray_1_color" />
-                        </LinearLayout>
-
-                        <LinearLayout
-                            android:id="@+id/audio_types"
-                            style="@style/app_common_gray_selector"
-                            android:layout_marginStart="@dimen/dpx_20"
-                            android:gravity="center_vertical"
-                            android:orientation="horizontal">
-
-                            <ImageView
-                                android:layout_width="@dimen/dpx_25"
-                                android:layout_height="@dimen/dpx_25"
-                                android:background="@drawable/ic_znyy_category" />
-
-                            <TextView
-                                style="@style/app_blue_text_white_button"
-                                android:layout_width="match_parent"
-                                android:paddingStart="@dimen/dpx_zero"
-                                android:paddingEnd="@dimen/dpx_zero"
-                                android:text="分类"
-                                android:textColor="@color/app_content_text_gray_1_color" />
-                        </LinearLayout>
-                    </LinearLayout>
-
-                </RelativeLayout>
-
-                <TextView
-                    android:id="@+id/detail_content"
-                    style="@style/common_app_content_text"
-                    android:layout_width="match_parent"
-                    android:layout_height="match_parent"
-                    android:background="@drawable/audio_bg"
-                    android:gravity="left|top"
-                    android:padding="@dimen/dpx_10" />
-            </LinearLayout>
-        </LinearLayout>
+            android:layout_height="match_parent" />
 
     </LinearLayout>
-
 </com.bytemiracle.project.core.framework.view.ShadowLinearLayout>
\ No newline at end of file
Index: app/src/main/java/com/bytemiracle/project/rtasr/RTASRUtils.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>/*\r\n * Copyright (C) 2021 xuexiangjys(xuexiangjys@163.com)\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *       http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n *\r\n */\r\n\r\npackage com.bytemiracle.project.rtasr;\r\n\r\nimport android.os.Message;\r\nimport android.util.Log;\r\nimport android.widget.TextView;\r\n\r\nimport java.io.File;\r\nimport java.io.RandomAccessFile;\r\nimport java.io.UnsupportedEncodingException;\r\nimport java.net.URI;\r\nimport java.net.URISyntaxException;\r\nimport java.net.URLEncoder;\r\nimport java.nio.ByteBuffer;\r\nimport java.security.cert.CertificateException;\r\nimport java.security.cert.X509Certificate;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.Arrays;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.Objects;\r\nimport java.util.concurrent.CountDownLatch;\r\n\r\nimport org.apache.poi.xwpf.converter.core.utils.StringUtils;\r\nimport org.java_websocket.WebSocket.READYSTATE;\r\nimport org.java_websocket.client.WebSocketClient;\r\nimport org.java_websocket.drafts.Draft;\r\nimport org.java_websocket.handshake.ServerHandshake;\r\n\r\nimport com.alibaba.fastjson.JSON;\r\nimport com.alibaba.fastjson.JSONArray;\r\nimport com.alibaba.fastjson.JSONObject;\r\nimport com.bytemiracle.project.bean.AudioFileFunc;\r\nimport com.bytemiracle.project.bean.GlobalConfig;\r\nimport com.bytemiracle.project.bean.KdxfKey;\r\nimport com.bytemiracle.project.core.framework.listener.CommonAsyncListener;\r\nimport com.bytemiracle.project.rtasr.util.EncryptUtil;\r\nimport com.bytemiracle.project.utils.ConstantsUtil;\r\nimport com.bytemiracle.project.utils.FileLocalUtils;\r\nimport com.bytemiracle.project.utils.XToastUtils;\r\nimport com.bytemiracle.project.widget.AddAudioDialog;\r\nimport com.thoughtworks.xstream.XStream;\r\nimport com.xuexiang.xhttp2.XHttp;\r\nimport com.xuexiang.xhttp2.callback.SimpleCallBack;\r\nimport com.xuexiang.xhttp2.exception.ApiException;\r\nimport com.xuexiang.xui.widget.edittext.MultiLineEditText;\r\n//import com.iflytek.voicecloud.rtasr.util.EncryptUtil;\r\n\r\nimport javax.net.ssl.SSLContext;\r\nimport javax.net.ssl.TrustManager;\r\nimport javax.net.ssl.X509TrustManager;\r\n\r\n/**\r\n * 实时转写调用demo\r\n * 此demo只是一个简单的调用示例，不适合用到实际生产环境中\r\n * \r\n * @author white\r\n *\r\n */\r\npublic class RTASRUtils {\r\n\r\n    // appid\r\n    private static final String APPID = \"5ff510b1\";\r\n\r\n    // appid对应的secret_key\r\n    private static final String SECRET_KEY = \"683c351baf93c7be0c1f018db70386d5\";\r\n\r\n    // 请求地址\r\n    private static final String HOST = \"rtasr.xfyun.cn/v1/ws\";\r\n\r\n    private static final String BASE_URL = \"wss://\" + HOST;\r\n\r\n    private static final String ORIGIN = \"https://\" + HOST;\r\n\r\n    public KdxfKey kdxfKey = KdxfKey.getInstance();\r\n\r\n\r\n    // 音频文件路径\r\n    private static final String AUDIO_PATH = \"./resource/test_1.pcm\";\r\n\r\n    public static MyWebSocketClient myClient;\r\n\r\n    // 每次发送的数据大小 1280 字节\r\n    private static final int CHUNCKED_SIZE = 1280;\r\n\r\n    private static final SimpleDateFormat sdf = new SimpleDateFormat(\"yyy-MM-dd HH:mm:ss.SSS\");\r\n    private static InitAttachViewListener listener;\r\n    private CommonAsyncListener<MyWebSocketClient> initFinishListener;\r\n\r\n    private static ConnectionListener keyInfoListener; //连接账号监听\r\n\r\n    public void setListener(InitAttachViewListener listener, CommonAsyncListener<MyWebSocketClient> initFinishListener) {\r\n        this.listener = listener;\r\n        this.initFinishListener = initFinishListener;\r\n    }\r\n\r\n    public interface ConnectionListener{\r\n        Long getKeyId();\r\n    }\r\n\r\n\r\n    public interface InitAttachViewListener{\r\n        MultiLineEditText getAttachView();\r\n    }\r\n\r\n    private static RTASRUtils INSTANCE;\r\n    public static RTASRUtils getInstance(){\r\n        if(INSTANCE==null){\r\n            INSTANCE=new RTASRUtils();\r\n        }\r\n        return INSTANCE;\r\n    }\r\n\r\n\r\n\r\n    public void createAsyncClient(){\r\n        RTASRUtils.listener = listener;\r\n        getKeyInfo(new CommonAsyncListener<KdxfKey>() {\r\n            @Override\r\n            public void doSomething(KdxfKey key) {\r\n                try{\r\n                URI url = new URI(BASE_URL + getHandShakeParams(key.getAPPID(), key.getAPIKey()));\r\n                DraftWithOrigin draft = new DraftWithOrigin(ORIGIN);\r\n                CountDownLatch handshakeSuccess = new CountDownLatch(1);\r\n                CountDownLatch connectClose = new CountDownLatch(1);\r\n                myClient = new MyWebSocketClient(url, draft, handshakeSuccess, connectClose);\r\n                keyInfoListener =new ConnectionListener() {\r\n                    @Override\r\n                    public Long getKeyId() {\r\n                        return key.getId();\r\n                    }\r\n                };\r\n                initFinishListener.doSomething(myClient);\r\n                }catch (Exception e){\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public void getKeyInfo(CommonAsyncListener<KdxfKey> listener){\r\n\r\n        XHttp.get(\"smart-server/kdxfkey/getValidKey\").baseUrl(ConstantsUtil.SERVER_ADDRESS).keepJson(true).execute(new SimpleCallBack<String>() {\r\n            @Override\r\n            public void onSuccess(String response) throws URISyntaxException {\r\n                JSONObject responseJson = JSONObject.parseObject(response);\r\n                if (responseJson.getBoolean(\"flag\") == true) {\r\n                    String data = responseJson.getString(\"data\");\r\n                    if (StringUtils.isNotEmpty(data)) {\r\n                        JSONObject result = JSONObject.parseObject(data);\r\n                        String appId = result.getString(\"appId\");\r\n                        String apiKey = result.getString(\"apiKey\");\r\n                        Long id = result.getLong(\"id\");\r\n                        kdxfKey.setAPPID(appId);\r\n                        kdxfKey.setAPIKey(apiKey);\r\n                        kdxfKey.setId(id);\r\n                        listener.doSomething(kdxfKey);\r\n                    }\r\n                }\r\n            }\r\n            @Override\r\n            public void onError(ApiException e) {\r\n                Log.e(\"\", \"调用科大讯飞账号信息异常!\");\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    /**\r\n     * 建立连接\r\n     * @param thisClient\r\n     */\r\n    public void connecting(MyWebSocketClient thisClient){\r\n        try {\r\n            thisClient.connect();\r\n            while (!myClient.getReadyState().equals(READYSTATE.OPEN)) {\r\n                System.out.println(getCurrentTimeStr() + \"\\t连接中\");\r\n                Thread.sleep(1000);\r\n            }\r\n            // 等待握手成功\r\n            thisClient.handshakeSuccess.await();\r\n        }catch (Exception e){\r\n            //update();\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    public void startZy(String path, MyWebSocketClient thisClient) throws URISyntaxException, InterruptedException {\r\n        while (true) {\r\n            // 发送音频\r\n            byte[] bytes = new byte[CHUNCKED_SIZE];\r\n            try (RandomAccessFile raf = new RandomAccessFile(path, \"r\")) {\r\n                int len = -1;\r\n                long lastTs = 0;\r\n                while ((len = raf.read(bytes)) != -1) {\r\n                    if (len < CHUNCKED_SIZE) {\r\n                        send(thisClient, bytes = Arrays.copyOfRange(bytes, 0, len));\r\n                        break;\r\n                    }\r\n                    long curTs = System.currentTimeMillis();\r\n                    if (lastTs == 0) {\r\n                        lastTs = System.currentTimeMillis();\r\n                    } else {\r\n                        long s = curTs - lastTs;\r\n                        if (s < 40) {\r\n                            System.out.println(\"error time interval: \" + s + \" ms\");\r\n                        }\r\n                    }\r\n                    send(thisClient, bytes);\r\n                    // 每隔40毫秒发送一次数据\r\n                    Thread.sleep(40);\r\n\r\n                }\r\n                // 发送结束标识\r\n                send(thisClient,\"{\\\"end\\\": true}\".getBytes());\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n            // 等待连接关闭\r\n            thisClient.connectClose.await();\r\n\r\n            //??\r\n            break;\r\n        }\r\n    }\r\n\r\n    // 生成握手参数\r\n    public static String getHandShakeParams(String appId, String secretKey) {\r\n        String ts = System.currentTimeMillis()/1000 + \"\";\r\n        String signa = \"\";\r\n        try {\r\n            signa = EncryptUtil.HmacSHA1Encrypt(EncryptUtil.MD5(appId + ts), secretKey);\r\n            return \"?appid=\" + appId + \"&ts=\" + ts + \"&signa=\" + URLEncoder.encode(signa, \"UTF-8\");\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        return \"\";\r\n    }\r\n\r\n    public static void send(WebSocketClient client, byte[] bytes) {\r\n        if (client.isClosed()) {\r\n            throw new RuntimeException(\"client connect closed!\");\r\n        }\r\n\r\n        client.send(bytes);\r\n    }\r\n\r\n    public static String getCurrentTimeStr() {\r\n        return sdf.format(new Date());\r\n    }\r\n\r\n    public static class MyWebSocketClient extends WebSocketClient {\r\n\r\n        private CountDownLatch handshakeSuccess;\r\n        private CountDownLatch connectClose;\r\n        public StringBuilder resultMsg = new StringBuilder();\r\n\r\n        public String getMsg() {\r\n            return resultMsg.toString();\r\n        }\r\n\r\n        public void setMsg(StringBuilder msg) {\r\n            this.resultMsg = msg;\r\n        }\r\n\r\n        public void update(Long id){\r\n            Map<String, Object> keyMap = new HashMap();\r\n            keyMap.put(\"id\",id);\r\n            //连接出错，更新账号有效性\r\n            XHttp.get(\"smart-server/kdxfkey/updateKey\").baseUrl(ConstantsUtil.SERVER_ADDRESS).params(keyMap)\r\n                    .keepJson(true).execute(new SimpleCallBack<String>() {\r\n                @Override\r\n                public void onSuccess(String response) throws URISyntaxException {\r\n                }\r\n                @Override\r\n                public void onError(ApiException e) {\r\n                    Log.e(\"\", \"调用科大讯飞账号信息异常!\");\r\n                }\r\n            });\r\n        }\r\n\r\n        public MyWebSocketClient(URI serverUri, Draft protocolDraft, CountDownLatch handshakeSuccess, CountDownLatch connectClose) {\r\n            super(serverUri, protocolDraft);\r\n            this.handshakeSuccess = handshakeSuccess;\r\n            this.connectClose = connectClose;\r\n            if(serverUri.toString().contains(\"wss\")){\r\n                trustAllHosts(this);\r\n            }\r\n        }\r\n\r\n        @Override\r\n        public void onOpen(ServerHandshake handshake) {\r\n            System.out.println(getCurrentTimeStr() + \"\\t连接建立成功！\");\r\n        }\r\n\r\n        @Override\r\n        public void onMessage(String msg) {\r\n            JSONObject msgObj = JSON.parseObject(msg);\r\n            String action = msgObj.getString(\"action\");\r\n            if (Objects.equals(\"started\", action)) {\r\n                // 握手成功\r\n                System.out.println(getCurrentTimeStr() + \"\\t握手成功！sid: \" + msgObj.getString(\"sid\"));\r\n                handshakeSuccess.countDown();\r\n            } else if (Objects.equals(\"result\", action)) {\r\n                if(listener!=null&&listener.getAttachView()!=null){\r\n                    listener.getAttachView().post(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n                            listener.getAttachView().setContentText(listener.getAttachView().getContentText()+getContent(msgObj.getString(\"data\")));\r\n                        }\r\n                    });\r\n                }\r\n                // 转写结果\r\n            } else if (Objects.equals(\"error\", action)) {\r\n                if (keyInfoListener!=null){\r\n                    //更新无用账号；\r\n                   update(keyInfoListener.getKeyId());\r\n                }\r\n                try{\r\n                    Thread.sleep(2000);\r\n                }catch (Exception e){\r\n                    e.printStackTrace();\r\n                }\r\n                RTASRUtils.INSTANCE.createAsyncClient();\r\n            }\r\n        }\r\n\r\n        @Override\r\n        public void onError(Exception e) {\r\n            System.out.println(getCurrentTimeStr() + \"\\t连接发生错误：\" + e.getMessage() + \", \" + new Date());\r\n            e.printStackTrace();\r\n            //System.exit(0);\r\n        }\r\n\r\n        @Override\r\n        public void onClose(int arg0, String arg1, boolean arg2) {\r\n            System.out.println(getCurrentTimeStr() + \"\\t链接关闭\");\r\n            connectClose.countDown();\r\n        }\r\n\r\n        @Override\r\n        public void onMessage(ByteBuffer bytes) {\r\n            try {\r\n                System.out.println(getCurrentTimeStr() + \"\\t服务端返回：\" + new String(bytes.array(), \"UTF-8\"));\r\n            } catch (UnsupportedEncodingException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n        public void trustAllHosts(MyWebSocketClient appClient) {\r\n            System.out.println(\"wss\");\r\n            TrustManager[] trustAllCerts = new TrustManager[]{new X509TrustManager() {\r\n                @Override\r\n                public X509Certificate[] getAcceptedIssuers() {\r\n                    return new X509Certificate[]{};\r\n                }\r\n\r\n                @Override\r\n                public void checkClientTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {\r\n                    // TODO Auto-generated method stub\r\n\r\n                }\r\n\r\n                @Override\r\n                public void checkServerTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {\r\n                    // TODO Auto-generated method stub\r\n\r\n                }\r\n            }};\r\n\r\n            try {\r\n                SSLContext sc = SSLContext.getInstance(\"TLS\");\r\n                sc.init(null, trustAllCerts, new java.security.SecureRandom());\r\n                appClient.setSocket(sc.getSocketFactory().createSocket());\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n    // 把转写结果解析为句子\r\n    public static String getContent(String message) {\r\n        StringBuffer resultBuilder = new StringBuffer();\r\n        try {\r\n            JSONObject messageObj = JSON.parseObject(message);\r\n            JSONObject cn = messageObj.getJSONObject(\"cn\");\r\n            JSONObject st = cn.getJSONObject(\"st\");\r\n            JSONArray rtArr = st.getJSONArray(\"rt\");\r\n            String ed = st.getString(\"ed\");//ed\t句子在整段语音中的结束时间，单位毫秒(ms)\t中间结果的ed为0\r\n            if (\"0\".equals(ed)){\r\n               return \"\";\r\n            }\r\n            for (int i = 0; i < rtArr.size(); i++) {\r\n                JSONObject rtArrObj = rtArr.getJSONObject(i);\r\n                JSONArray wsArr = rtArrObj.getJSONArray(\"ws\");\r\n                for (int j = 0; j < wsArr.size(); j++) {\r\n\r\n                    JSONObject wsArrObj = wsArr.getJSONObject(j);\r\n                    JSONArray cwArr = wsArrObj.getJSONArray(\"cw\");\r\n                    for (int k = 0; k < cwArr.size(); k++) {\r\n                        JSONObject cwArrObj = cwArr.getJSONObject(k);\r\n                        String wStr = cwArrObj.getString(\"w\");\r\n                        resultBuilder.append(wStr);\r\n                    }\r\n                }\r\n            }\r\n        } catch (Exception e) {\r\n            return message;\r\n        }\r\n\r\n        return resultBuilder.toString();\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/bytemiracle/project/rtasr/RTASRUtils.java	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
+++ app/src/main/java/com/bytemiracle/project/rtasr/RTASRUtils.java	(date 1612356112451)
@@ -17,11 +17,26 @@
 
 package com.bytemiracle.project.rtasr;
 
-import android.os.Message;
 import android.util.Log;
-import android.widget.TextView;
+import android.widget.EditText;
+
+import com.alibaba.fastjson.JSON;
+import com.alibaba.fastjson.JSONArray;
+import com.alibaba.fastjson.JSONObject;
+import com.bytemiracle.project.bean.KdxfKey;
+import com.bytemiracle.project.core.framework.listener.CommonAsyncListener;
+import com.bytemiracle.project.rtasr.util.EncryptUtil;
+import com.bytemiracle.project.utils.ConstantsUtil;
+import com.xuexiang.xhttp2.XHttp;
+import com.xuexiang.xhttp2.callback.SimpleCallBack;
+import com.xuexiang.xhttp2.exception.ApiException;
 
-import java.io.File;
+import org.apache.poi.xwpf.converter.core.utils.StringUtils;
+import org.java_websocket.WebSocket.READYSTATE;
+import org.java_websocket.client.WebSocketClient;
+import org.java_websocket.drafts.Draft;
+import org.java_websocket.handshake.ServerHandshake;
+
 import java.io.RandomAccessFile;
 import java.io.UnsupportedEncodingException;
 import java.net.URI;
@@ -38,31 +53,6 @@
 import java.util.Objects;
 import java.util.concurrent.CountDownLatch;
 
-import org.apache.poi.xwpf.converter.core.utils.StringUtils;
-import org.java_websocket.WebSocket.READYSTATE;
-import org.java_websocket.client.WebSocketClient;
-import org.java_websocket.drafts.Draft;
-import org.java_websocket.handshake.ServerHandshake;
-
-import com.alibaba.fastjson.JSON;
-import com.alibaba.fastjson.JSONArray;
-import com.alibaba.fastjson.JSONObject;
-import com.bytemiracle.project.bean.AudioFileFunc;
-import com.bytemiracle.project.bean.GlobalConfig;
-import com.bytemiracle.project.bean.KdxfKey;
-import com.bytemiracle.project.core.framework.listener.CommonAsyncListener;
-import com.bytemiracle.project.rtasr.util.EncryptUtil;
-import com.bytemiracle.project.utils.ConstantsUtil;
-import com.bytemiracle.project.utils.FileLocalUtils;
-import com.bytemiracle.project.utils.XToastUtils;
-import com.bytemiracle.project.widget.AddAudioDialog;
-import com.thoughtworks.xstream.XStream;
-import com.xuexiang.xhttp2.XHttp;
-import com.xuexiang.xhttp2.callback.SimpleCallBack;
-import com.xuexiang.xhttp2.exception.ApiException;
-import com.xuexiang.xui.widget.edittext.MultiLineEditText;
-//import com.iflytek.voicecloud.rtasr.util.EncryptUtil;
-
 import javax.net.ssl.SSLContext;
 import javax.net.ssl.TrustManager;
 import javax.net.ssl.X509TrustManager;
@@ -70,9 +60,8 @@
 /**
  * 实时转写调用demo
  * 此demo只是一个简单的调用示例，不适合用到实际生产环境中
- * 
+ *
  * @author white
- *
  */
 public class RTASRUtils {
 
@@ -105,6 +94,7 @@
     private CommonAsyncListener<MyWebSocketClient> initFinishListener;
 
     private static ConnectionListener keyInfoListener; //连接账号监听
+    private boolean allowLooperInWebSocket;
 
     public void setListener(InitAttachViewListener listener, CommonAsyncListener<MyWebSocketClient> initFinishListener) {
         this.listener = listener;
@@ -115,47 +105,45 @@
         Long getKeyId();
     }
 
-
-    public interface InitAttachViewListener{
-        MultiLineEditText getAttachView();
+    public interface InitAttachViewListener {
+        EditText getAttachView();
     }
 
     private static RTASRUtils INSTANCE;
-    public static RTASRUtils getInstance(){
-        if(INSTANCE==null){
-            INSTANCE=new RTASRUtils();
+
+    public static RTASRUtils instance() {
+        if (INSTANCE == null) {
+            INSTANCE = new RTASRUtils();
         }
         return INSTANCE;
     }
 
 
-
-    public void createAsyncClient(){
-        RTASRUtils.listener = listener;
+    public void createAsyncClient() {
         getKeyInfo(new CommonAsyncListener<KdxfKey>() {
             @Override
             public void doSomething(KdxfKey key) {
-                try{
-                URI url = new URI(BASE_URL + getHandShakeParams(key.getAPPID(), key.getAPIKey()));
-                DraftWithOrigin draft = new DraftWithOrigin(ORIGIN);
-                CountDownLatch handshakeSuccess = new CountDownLatch(1);
-                CountDownLatch connectClose = new CountDownLatch(1);
-                myClient = new MyWebSocketClient(url, draft, handshakeSuccess, connectClose);
-                keyInfoListener =new ConnectionListener() {
-                    @Override
-                    public Long getKeyId() {
-                        return key.getId();
-                    }
-                };
-                initFinishListener.doSomething(myClient);
-                }catch (Exception e){
+                try {
+                    URI url = new URI(BASE_URL + getHandShakeParams(key.getAPPID(), key.getAPIKey()));
+                    DraftWithOrigin draft = new DraftWithOrigin(ORIGIN);
+                    CountDownLatch handshakeSuccess = new CountDownLatch(1);
+                    CountDownLatch connectClose = new CountDownLatch(1);
+                    myClient = new MyWebSocketClient(url, draft, handshakeSuccess, connectClose);
+                    keyInfoListener = new ConnectionListener() {
+                        @Override
+                        public Long getKeyId() {
+                            return key.getId();
+                        }
+                    };
+                    initFinishListener.doSomething(myClient);
+                } catch (Exception e) {
                     e.printStackTrace();
                 }
             }
         });
     }
 
-    public void getKeyInfo(CommonAsyncListener<KdxfKey> listener){
+    public void getKeyInfo(CommonAsyncListener<KdxfKey> listener) {
 
         XHttp.get("smart-server/kdxfkey/getValidKey").baseUrl(ConstantsUtil.SERVER_ADDRESS).keepJson(true).execute(new SimpleCallBack<String>() {
             @Override
@@ -175,6 +163,7 @@
                     }
                 }
             }
+
             @Override
             public void onError(ApiException e) {
                 Log.e("", "调用科大讯飞账号信息异常!");
@@ -183,15 +172,23 @@
     }
 
 
-
-
-
+    /**
+     * 关闭连接
+     */
+    public void closeWebSocket() {
+        if (myClient != null && READYSTATE.OPEN.equals(myClient.getReadyState())) {
+            allowLooperInWebSocket = false;
+            myClient.close();
+            myClient = null;
+        }
+    }
 
     /**
      * 建立连接
+     *
      * @param thisClient
      */
-    public void connecting(MyWebSocketClient thisClient){
+    public void connecting(MyWebSocketClient thisClient) {
         try {
             thisClient.connect();
             while (!myClient.getReadyState().equals(READYSTATE.OPEN)) {
@@ -200,17 +197,15 @@
             }
             // 等待握手成功
             thisClient.handshakeSuccess.await();
-        }catch (Exception e){
+        } catch (Exception e) {
             //update();
             e.printStackTrace();
         }
     }
 
-
-
-
     public void startZy(String path, MyWebSocketClient thisClient) throws URISyntaxException, InterruptedException {
-        while (true) {
+        allowLooperInWebSocket = true;
+        while (allowLooperInWebSocket) {
             // 发送音频
             byte[] bytes = new byte[CHUNCKED_SIZE];
             try (RandomAccessFile raf = new RandomAccessFile(path, "r")) {
@@ -236,7 +231,7 @@
 
                 }
                 // 发送结束标识
-                send(thisClient,"{\"end\": true}".getBytes());
+                send(thisClient, "{\"end\": true}".getBytes());
             } catch (Exception e) {
                 e.printStackTrace();
             }
@@ -250,7 +245,7 @@
 
     // 生成握手参数
     public static String getHandShakeParams(String appId, String secretKey) {
-        String ts = System.currentTimeMillis()/1000 + "";
+        String ts = System.currentTimeMillis() / 1000 + "";
         String signa = "";
         try {
             signa = EncryptUtil.HmacSHA1Encrypt(EncryptUtil.MD5(appId + ts), secretKey);
@@ -288,15 +283,16 @@
             this.resultMsg = msg;
         }
 
-        public void update(Long id){
+        public void update(Long id) {
             Map<String, Object> keyMap = new HashMap();
-            keyMap.put("id",id);
+            keyMap.put("id", id);
             //连接出错，更新账号有效性
             XHttp.get("smart-server/kdxfkey/updateKey").baseUrl(ConstantsUtil.SERVER_ADDRESS).params(keyMap)
                     .keepJson(true).execute(new SimpleCallBack<String>() {
                 @Override
                 public void onSuccess(String response) throws URISyntaxException {
                 }
+
                 @Override
                 public void onError(ApiException e) {
                     Log.e("", "调用科大讯飞账号信息异常!");
@@ -308,7 +304,7 @@
             super(serverUri, protocolDraft);
             this.handshakeSuccess = handshakeSuccess;
             this.connectClose = connectClose;
-            if(serverUri.toString().contains("wss")){
+            if (serverUri.toString().contains("wss")) {
                 trustAllHosts(this);
             }
         }
@@ -327,23 +323,28 @@
                 System.out.println(getCurrentTimeStr() + "\t握手成功！sid: " + msgObj.getString("sid"));
                 handshakeSuccess.countDown();
             } else if (Objects.equals("result", action)) {
-                if(listener!=null&&listener.getAttachView()!=null){
-                    listener.getAttachView().post(new Runnable() {
-                        @Override
-                        public void run() {
-                            listener.getAttachView().setContentText(listener.getAttachView().getContentText()+getContent(msgObj.getString("data")));
-                        }
-                    });
+                if (listener != null) {
+                    final EditText attachView = listener.getAttachView();
+                    if (attachView != null) {
+                        attachView.post(new Runnable() {
+                            @Override
+                            public void run() {
+                                attachView.setText(attachView.getText().toString()
+                                        + getContent(msgObj.getString("data")));
+                                attachView.setSelection(attachView.getText().toString().length());
+                            }
+                        });
+                    }
                 }
                 // 转写结果
             } else if (Objects.equals("error", action)) {
-                if (keyInfoListener!=null){
+                if (keyInfoListener != null) {
                     //更新无用账号；
-                   update(keyInfoListener.getKeyId());
+                    update(keyInfoListener.getKeyId());
                 }
-                try{
+                try {
                     Thread.sleep(2000);
-                }catch (Exception e){
+                } catch (Exception e) {
                     e.printStackTrace();
                 }
                 RTASRUtils.INSTANCE.createAsyncClient();
@@ -412,8 +413,8 @@
             JSONObject st = cn.getJSONObject("st");
             JSONArray rtArr = st.getJSONArray("rt");
             String ed = st.getString("ed");//ed	句子在整段语音中的结束时间，单位毫秒(ms)	中间结果的ed为0
-            if ("0".equals(ed)){
-               return "";
+            if ("0".equals(ed)) {
+                return "";
             }
             for (int i = 0; i < rtArr.size(); i++) {
                 JSONObject rtArrObj = rtArr.getJSONObject(i);
Index: app/src/main/res/values/styles.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><resources>\r\n\r\n    <!-- 拓展主题 theme. -->\r\n    <style name=\"XUITheme\" parent=\"XUIBaseTheme\">\r\n        <!--设置默认窗口的动画样式-->\r\n        <item name=\"android:windowAnimationStyle\">@style/WindowAnimStyle</item>\r\n    </style>\r\n\r\n    <!-- Base application theme. -->\r\n    <style name=\"AppTheme\" parent=\"XUITheme.Phone\">\r\n        <!-- Customize your theme here. -->\r\n        <!-- <item name=\"colorPrimary\">@color/colorPrimary</item>\r\n         <item name=\"colorPrimaryDark\">@color/colorPrimaryDark</item>\r\n         <item name=\"colorAccent\">@color/colorAccent</item>-->\r\n        <item name=\"xui_actionbar_height\">?actionBarSize</item>\r\n    </style>\r\n\r\n    <style name=\"AppTheme.Launch\">\r\n        <item name=\"xui_config_color_splash_bg\">@color/xui_config_color_white</item>\r\n        <item name=\"xui_config_app_logo_bottom\">@dimen/xui_config_app_logo_bottom</item>\r\n        <item name=\"xui_config_company_logo_bottom\">@dimen/xui_config_company_logo_bottom</item>\r\n        <item name=\"android:windowBackground\">@drawable/splash</item>\r\n        <item name=\"android:windowFullscreen\">true</item>\r\n    </style>\r\n\r\n    <!--窗体背景，这个背景能在第一时间显示, 避免启动时白屏，黑屏问题-->\r\n    <style name=\"AppTheme.Launch.App\">\r\n        <!--注意修改图标-->\r\n        <item name=\"xui_config_splash_app_logo\">@drawable/splash</item>\r\n    </style>\r\n\r\n    <style name=\"AppTheme.AppBarOverlay\" parent=\"ThemeOverlay.AppCompat.Dark.ActionBar\" />\r\n\r\n    <style name=\"AppTheme.PopupOverlay\" parent=\"ThemeOverlay.AppCompat.Light\" />\r\n\r\n    <!--DialogTheme，用于将Activity作为Dialog的主题-->\r\n    <style name=\"DialogTheme\" parent=\"XUITheme.Phone\">\r\n        <!--设置dialog的背景，此处为系统给定的透明值-->\r\n        <item name=\"android:windowBackground\">@android:color/transparent</item>\r\n        <!--Dialog的windowFrame框为无-->\r\n        <item name=\"android:windowFrame\">@null</item>\r\n        <!--无标题-->\r\n        <item name=\"android:windowNoTitle\">true</item>　　　　　\r\n        <!--是否浮现在activity之上-->\r\n        <item name=\"android:windowIsFloating\">true</item>\r\n        <!--是否半透明-->\r\n        <item name=\"android:windowIsTranslucent\">true</item>\r\n        <!--是否有覆盖-->\r\n        <item name=\"android:windowContentOverlay\">@null</item>\r\n        <!--设置Activity出现方式-->\r\n        <item name=\"android:windowAnimationStyle\">@android:style/Animation.Dialog</item>\r\n        <!--背景是否模糊显示-->\r\n        <item name=\"android:backgroundDimEnabled\">true</item>\r\n    </style>\r\n\r\n    <style name=\"CustomDialog\" parent=\"android:style/Theme.Dialog\">\r\n        <!--背景颜色及和透明程度-->\r\n        <item name=\"android:windowBackground\">@android:color/transparent</item>\r\n        <!--是否去除标题 -->\r\n        <item name=\"android:windowNoTitle\">true</item>\r\n        <!--是否去除边框-->\r\n        <item name=\"android:windowFrame\">@null</item>\r\n        <!--是否浮现在activity之上-->\r\n        <item name=\"android:windowIsFloating\">true</item>\r\n        <!--是否模糊-->\r\n        <item name=\"android:backgroundDimEnabled\">true</item>\r\n    </style>\r\n\r\n    <style name=\"EditInfoItem\">\r\n        <item name=\"android:layout_width\">match_parent</item>\r\n        <item name=\"android:layout_height\">55dp</item>\r\n        <item name=\"sLeftTextSize\">17sp</item>\r\n        <item name=\"sLeftTextColor\">@color/xui_config_color_black</item>\r\n        <item name=\"sCenterTextColor\">@color/xui_config_color_black</item>\r\n        <item name=\"sLeftViewWidth\">60dp</item>\r\n        <item name=\"sLeftViewGravity\">left_center</item>\r\n        <item name=\"sCenterViewGravity\">left_center</item>\r\n        <item name=\"sCenterViewMarginLeft\">15dp</item>\r\n        <item name=\"sCenterViewMarginRight\">15dp</item>\r\n        <item name=\"sDividerLineHeight\">2dp</item>\r\n        <item name=\"sRightTextSize\">13sp</item>\r\n        <item name=\"sRightViewMarginRight\">0dp</item>\r\n        <item name=\"sLeftIconWidth\">16dp</item>\r\n        <item name=\"sLeftIconHeight\">16dp</item>\r\n        <item name=\"sUseRipple\">false</item>\r\n        <item name=\"sEnableEdit\">true</item>\r\n    </style>\r\n\r\n    <style name=\"TabText\" parent=\"TextAppearance.Design.Tab\">\r\n        <item name=\"android:textColor\">@color/selector_tab_text_color</item>\r\n        <item name=\"android:textSize\">?attr/xui_config_size_content_text</item>\r\n    </style>\r\n\r\n    <style name=\"TabText.Explain\">\r\n        <item name=\"android:textColor\">@color/selector_tab_text_color</item>\r\n        <item name=\"android:textSize\">?attr/xui_config_size_explain_text</item>\r\n    </style>\r\n\r\n    <style name=\"TabLayoutStyle\" parent=\"Base.Widget.Design.TabLayout\">\r\n        <item name=\"tabIndicatorColor\">?attr/colorAccent</item>\r\n        <item name=\"tabIndicatorHeight\">2dp</item>\r\n        <item name=\"tabPaddingStart\">12dp</item>\r\n        <item name=\"tabPaddingEnd\">12dp</item>\r\n        <item name=\"android:background\">@color/xui_config_color_white</item>\r\n        <item name=\"tabBackground\">?attr/selectableItemBackground</item>\r\n        <item name=\"tabTextAppearance\">@style/TabText</item>\r\n        <item name=\"tabSelectedTextColor\">?attr/colorAccent</item>\r\n        <item name=\"tabTextColor\">@color/xui_config_color_gray_6</item>\r\n    </style>\r\n\r\n    <style name=\"TreeNodeStyleCustom\">\r\n        <item name=\"android:paddingLeft\">20dp</item>\r\n        <!--<item name=\"android:showDividers\">middle</item>-->\r\n        <!--<item name=\"android:divider\">@android:drawable/divider_horizontal_bright</item>-->\r\n    </style>\r\n\r\n    <!--按钮样式-->\r\n    <style name=\"app_round_10_blue_button\" parent=\"RoundButton.Blue\">\r\n        <item name=\"rb_backgroundColor\">@color/app_common_bg_blue</item>\r\n        <item name=\"rb_radius\">@dimen/dp_10</item>\r\n    </style>\r\n\r\n    <style name=\"app_round_5_blue_button\" parent=\"app_round_10_blue_button\">\r\n        <item name=\"rb_radius\">@dimen/dp_5</item>\r\n    </style>\r\n\r\n    <style name=\"app_round_30_blue_button\" parent=\"app_round_10_blue_button\">\r\n        <item name=\"rb_radius\">@dimen/dp_30</item>\r\n    </style>\r\n\r\n    <!--********************************************************************字体类start***********************************************-->\r\n    <!--app应用内通用正文字体-->\r\n    <style name=\"common_app_content_text\">\r\n        <item name=\"android:layout_width\">wrap_content</item>\r\n        <item name=\"android:layout_height\">wrap_content</item>\r\n        <item name=\"android:textSize\">@dimen/spx_14</item>\r\n        <item name=\"android:textColor\">@color/app_common_content_text_dark_333_color</item>\r\n        <item name=\"android:gravity\">center</item>\r\n    </style>\r\n    <!--app应用内通用标题1字体-->\r\n    <style name=\"common_app_title_text\" parent=\"common_app_content_text\">\r\n        <item name=\"android:textSize\">@dimen/spx_20</item>\r\n    </style>\r\n    <!--app应用内通用标题2字体-->\r\n    <style name=\"common_app_sub_title_text\" parent=\"common_app_content_text\">\r\n        <item name=\"android:textSize\">@dimen/spx_20</item>\r\n    </style>\r\n\r\n    <style name=\"common_text_gray_small_2\" parent=\"common_app_content_text\">\r\n        <item name=\"android:textSize\">14sp</item>\r\n        <item name=\"android:paddingTop\">@dimen/dp_5</item>\r\n        <item name=\"android:paddingBottom\">@dimen/dp_5</item>\r\n    </style>\r\n\r\n    <!--设置界面中带框的文本样式1-->\r\n    <style name=\"common_text_stroke_gray\">\r\n        <item name=\"android:layout_width\">match_parent</item>\r\n        <item name=\"android:layout_height\">wrap_content</item>\r\n        <item name=\"android:background\">@drawable/bg_gray_roundrect_stroke</item>\r\n        <item name=\"android:paddingLeft\">@dimen/dp_10</item>\r\n        <item name=\"android:paddingTop\">@dimen/dp_5</item>\r\n        <item name=\"android:paddingRight\">@dimen/dp_10</item>\r\n        <item name=\"android:paddingBottom\">@dimen/dp_5</item>\r\n        <item name=\"android:textSize\">16sp</item>\r\n        <item name=\"android:textColor\">@color/app_common_content_text_dark_333_color</item>\r\n    </style>\r\n\r\n    <!--设置界面中带框的文本样式2-->\r\n    <style name=\"common_text_stroke_gray2\" parent=\"common_text_stroke_gray\">\r\n        <item name=\"android:layout_width\">match_parent</item>\r\n        <item name=\"android:layout_height\">wrap_content</item>\r\n        <item name=\"android:background\">@drawable/bg_gray_roundrect_stroke</item>\r\n        <item name=\"android:paddingLeft\">@dimen/dp_15</item>\r\n        <item name=\"android:paddingTop\">@dimen/dp_10</item>\r\n        <item name=\"android:paddingRight\">@dimen/dp_15</item>\r\n        <item name=\"android:paddingBottom\">@dimen/dp_10</item>\r\n        <item name=\"android:textSize\">16sp</item>\r\n        <item name=\"android:lineSpacingMultiplier\">1.2</item>\r\n        <item name=\"android:textColor\">@color/app_common_content_text_dark_333_color</item>\r\n    </style>\r\n\r\n    <style name=\"app_common_bold_1_black\">\r\n        <item name=\"android:layout_width\">wrap_content</item>\r\n        <item name=\"android:layout_height\">wrap_content</item>\r\n        <item name=\"android:textColor\">@color/app_component_title_text_color</item>\r\n        <item name=\"android:textSize\">@dimen/text_size_back_bold_1</item>\r\n        <item name=\"android:textStyle\">bold</item>\r\n    </style>\r\n\r\n    <style name=\"app_common_bold_2_black\" parent=\"app_common_bold_1_black\">\r\n        <item name=\"android:textSize\">@dimen/text_size_back_bold_2</item>\r\n    </style>\r\n\r\n    <style name=\"app_common_bold_3_black\" parent=\"app_common_bold_1_black\">\r\n        <item name=\"android:textSize\">@dimen/text_size_back_bold_3</item>\r\n    </style>\r\n\r\n    <style name=\"bg_setting_style\">\r\n        <item name=\"android:layout_width\">match_parent</item>\r\n        <item name=\"android:layout_height\">match_parent</item>\r\n        <item name=\"android:scaleType\">fitXY</item>\r\n        <item name=\"android:src\">@drawable/bg_settings</item>\r\n    </style>\r\n    <!--登录页面黑粗字体-->\r\n    <style name=\"app_login_bold_black\">\r\n        <item name=\"android:layout_width\">wrap_content</item>\r\n        <item name=\"android:layout_height\">wrap_content</item>\r\n        <item name=\"android:textColor\">@color/app_component_title_text_color</item>\r\n        <item name=\"android:textSize\">@dimen/spx_20</item>\r\n        <item name=\"android:textStyle\">bold</item>\r\n    </style>\r\n    <!--********************************************************************字体类end***********************************************-->\r\n\r\n    <!--********************************************************************按钮类start***********************************************-->\r\n\r\n    <!--应用内的16sp蓝色按钮-->\r\n    <style name=\"app_16sp_white_text_blue_button\">\r\n        <item name=\"android:background\">@drawable/bg_app_button_radius_25_blue_selector</item>\r\n        <item name=\"android:textColor\">@color/colorWhite</item>\r\n        <item name=\"android:textSize\">@dimen/spx_16</item>\r\n        <item name=\"android:layout_marginTop\">@dimen/dpx_20</item>\r\n        <item name=\"android:layout_height\">@dimen/dpx_40</item>\r\n        <item name=\"android:layout_width\">@dimen/dpx_260</item>\r\n    </style>\r\n\r\n    <!--应用内的14sp蓝色按钮-->\r\n    <style name=\"app_14sp_white_text_blue_button\" parent=\"app_16sp_white_text_blue_button\">\r\n        <item name=\"android:background\">@drawable/bg_app_button_radius_5_blue_selector</item>\r\n        <item name=\"android:textSize\">@dimen/spx_14</item>\r\n        <item name=\"android:layout_marginTop\">@dimen/dpx_zero</item>\r\n        <item name=\"android:layout_width\">@dimen/dpx_96</item>\r\n        <item name=\"android:layout_height\">@dimen/dpx_48</item>\r\n    </style>\r\n\r\n    <!--应用内的12sp蓝色按钮-->\r\n    <style name=\"app_12sp_white_text_blue_button\" parent=\"app_14sp_white_text_blue_button\">\r\n        <item name=\"android:textSize\">@dimen/spx_12</item>\r\n        <item name=\"android:layout_width\">@dimen/dpx_85</item>\r\n        <item name=\"android:layout_height\">@dimen/dpx_28</item>\r\n    </style>\r\n\r\n    <!--应用内通用浅灰选择器-->\r\n    <style name=\"app_common_gray_selector\">\r\n        <item name=\"android:background\">@drawable/bg_app_text_radius_5_white_selector</item>\r\n        <item name=\"android:layout_width\">wrap_content</item>\r\n        <item name=\"android:layout_height\">wrap_content</item>\r\n        <item name=\"android:paddingStart\">@dimen/dpx_10</item>\r\n        <item name=\"android:paddingEnd\">@dimen/dpx_10</item>\r\n    </style>\r\n\r\n    <!--应用内蓝色文本白色按钮按钮-->\r\n    <style name=\"app_blue_text_white_button\" parent=\"app_common_gray_selector\">\r\n        <item name=\"android:textColor\">@color/app_content_text_blue_color</item>\r\n        <item name=\"android:textSize\">@dimen/spx_14</item>\r\n    </style>\r\n\r\n    <!--平板左侧第一列样式-->\r\n    <style name=\"app_common_left_0_panel\">\r\n        <item name=\"android:layout_width\">@dimen/dpx_left_0_panel_width</item>\r\n        <item name=\"android:layout_height\">match_parent</item>\r\n        <item name=\"android:background\">@color/app_left_panel_blue_color</item>\r\n        <item name=\"android:paddingTop\">@dimen/dpx_20</item>\r\n        <item name=\"vtl_indicator_color\">@color/app_left_panel_blue_indicator_color</item>\r\n        <item name=\"vtl_indicator_gravity\">fill</item>\r\n        <item name=\"vtl_tab_height\">@dimen/dpx_left_panel_item_height</item>\r\n        <item name=\"vtl_tab_mode\">scrollable</item>\r\n    </style>\r\n    <!--平板左侧第二列样式-->\r\n    <style name=\"app_common_left_1_panel\">\r\n        <item name=\"android:layout_width\">@dimen/dpx_220</item>\r\n        <item name=\"android:layout_height\">match_parent</item>\r\n    </style>\r\n\r\n    <!--右侧详情页面顶部副标题统一样式-->\r\n    <style name=\"app_common_sub_title_layout\">\r\n        <item name=\"android:layout_width\">match_parent</item>\r\n        <item name=\"android:layout_height\">wrap_content</item>\r\n        <item name=\"android:minHeight\">@dimen/dpx_settings_sub_title_height</item>\r\n        <item name=\"android:background\">@color/app_common_sub_title_background_color</item>\r\n        <item name=\"android:paddingLeft\">@dimen/dpx_settings_sub_title_hor_padding</item>\r\n        <item name=\"android:paddingRight\">@dimen/dpx_settings_sub_title_hor_padding</item>\r\n    </style>\r\n\r\n\r\n    <!--********************************************************************按钮类end***********************************************-->\r\n</resources>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/values/styles.xml	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
+++ app/src/main/res/values/styles.xml	(date 1612358395180)
@@ -209,10 +209,33 @@
         <item name="android:textSize">@dimen/spx_20</item>
         <item name="android:textStyle">bold</item>
     </style>
+    <!--应用内编辑多行文本样式-->
+    <style name="common_app_edit_content_text" parent="common_app_content_text">
+        <item name="android:background">@drawable/bg_app_common_input_radius_5_rectangle</item>
+        <item name="android:gravity">top|left</item>
+        <item name="android:inputType">textMultiLine</item>
+        <item name="android:paddingTop">@dimen/dpx_5</item>
+        <item name="android:paddingBottom">@dimen/dpx_5</item>
+    </style>
+    <!--应用内编辑单行文本样式-->
+    <style name="common_app_edit_single_line_text" parent="common_app_edit_content_text">
+        <item name="android:background">@drawable/bg_app_common_input_radius_5_rectangle</item>
+        <item name="android:gravity">top|left</item>
+        <item name="android:inputType">textMultiLine</item>
+        <item name="android:paddingTop">@dimen/dpx_5</item>
+        <item name="android:maxLines">1</item>
+        <item name="android:paddingBottom">@dimen/dpx_5</item>
+    </style>
     <!--********************************************************************字体类end***********************************************-->
 
     <!--********************************************************************按钮类start***********************************************-->
 
+    <!--应用内的圆形图片按钮-->
+    <style name="app_circle_image_button_style">
+        <item name="android:layout_width">@dimen/dpx_36</item>
+        <item name="android:layout_height">@dimen/dpx_36</item>
+    </style>
+
     <!--应用内的16sp蓝色按钮-->
     <style name="app_16sp_white_text_blue_button">
         <item name="android:background">@drawable/bg_app_button_radius_25_blue_selector</item>
@@ -231,7 +254,23 @@
         <item name="android:layout_width">@dimen/dpx_96</item>
         <item name="android:layout_height">@dimen/dpx_48</item>
     </style>
-
+    <!--应用内的14sp蓝色按钮小-->
+    <style name="app_14sp_white_text_blue_small_button" parent="app_14sp_white_text_blue_button">
+        <item name="android:layout_width">@dimen/dpx_85</item>
+        <item name="android:layout_height">@dimen/dpx_30</item>
+    </style>
+    <!--应用内的14sp蓝字灰色按钮-->
+    <style name="app_14sp_blue_text_blue_button" parent="app_14sp_white_text_blue_button">
+        <item name="android:background">@drawable/bg_app_button_radius_5_stoke_blue_selector</item>
+        <item name="android:layout_width">@dimen/dpx_96</item>
+        <item name="android:layout_height">@dimen/dpx_48</item>
+        <item name="android:textColor">@color/app_common_bg_blue</item>
+    </style>
+    <!--应用内的14sp蓝字灰色按钮小-->
+    <style name="app_14sp_blue_text_blue_small_button" parent="app_14sp_blue_text_blue_button">
+        <item name="android:layout_width">@dimen/dpx_85</item>
+        <item name="android:layout_height">@dimen/dpx_30</item>
+    </style>
     <!--应用内的12sp蓝色按钮-->
     <style name="app_12sp_white_text_blue_button" parent="app_14sp_white_text_blue_button">
         <item name="android:textSize">@dimen/spx_12</item>
Index: app/src/main/java/com/bytemiracle/project/message/ContactsFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.bytemiracle.project.message;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport com.bytemiracle.project.R;\r\nimport com.bytemiracle.project.core.BaseFragment;\r\nimport com.bytemiracle.project.core.framework.fragment.AnnotationPresenter;\r\nimport com.bytemiracle.project.core.framework.fragment.subfragment.SubFragmentManager;\r\nimport com.bytemiracle.project.fragment.settings.adapter.LeftPanelTabAdapter;\r\nimport com.bytemiracle.project.widget.viewBean.TabMenuBean;\r\nimport com.xuexiang.xpage.annotation.Page;\r\nimport com.xuexiang.xui.widget.tabbar.VerticalTabLayout;\r\nimport com.xuexiang.xui.widget.tabbar.vertical.TabView;\r\n\r\nimport org.greenrobot.eventbus.EventBus;\r\nimport org.greenrobot.eventbus.Subscribe;\r\nimport org.greenrobot.eventbus.ThreadMode;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport butterknife.BindView;\r\n\r\n/**\r\n * @author 通讯录界面\r\n * @since 2019-10-30 00:02\r\n */\r\n@Page(name = \"通讯录\")\r\npublic class ContactsFragment extends BaseFragment {\r\n    private static final String TAG = \"ContactsFragment\";\r\n    private static final int TAB_INDEX_CONTACT_RELATION = 0;\r\n    private static final int TAB_INDEX_CONVERSATION = 1;\r\n\r\n    @BindView(R.id.tab_layout)\r\n    VerticalTabLayout tabLayout;\r\n    private SubFragmentManager subFragmentManager;\r\n\r\n    @Override\r\n    protected void initArgs() {\r\n        super.initArgs();\r\n        EventBus.getDefault().register(this);\r\n        subFragmentManager = SubFragmentManager.newInstance(getChildFragmentManager(), R.id.fl_container);\r\n    }\r\n\r\n    @Override\r\n    protected int getLayoutId() {\r\n        return R.layout.fragment_contacts;\r\n    }\r\n\r\n    @Override\r\n    protected void initViews() {\r\n        List<TabMenuBean> menus = new ArrayList();\r\n        menus.add(new TabMenuBean(R.drawable.menu_01_pressed, R.drawable.menu_01_pressed, \"\"));\r\n        menus.add(new TabMenuBean(R.drawable.menu_02_pressed, R.drawable.menu_02_pressed, \"\"));\r\n        tabLayout.setTabAdapter(new LeftPanelTabAdapter(menus));\r\n        tabLayout.addOnTabSelectedListener(new VerticalTabLayout.OnTabSelectedListener() {\r\n            @Override\r\n            public void onTabSelected(TabView tab, int position) {\r\n                if (position == TAB_INDEX_CONTACT_RELATION) {\r\n                    subFragmentManager.switch2Fragment(ContactsRelationFragment.class);\r\n                } else if (position == TAB_INDEX_CONVERSATION) {\r\n                    subFragmentManager.switch2Fragment(ConversationFragment.class);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onTabUnselected(TabView tab, int position) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onTabReselected(TabView tab, int position) {\r\n\r\n            }\r\n        });\r\n        //默认显示第一tab\r\n        tabLayout.setTabSelected(0);\r\n        subFragmentManager.switch2Fragment(ContactsRelationFragment.class);\r\n    }\r\n\r\n    /**\r\n     * 打开会话界面\r\n     *\r\n     * @param event\r\n     */\r\n    @Subscribe(threadMode = ThreadMode.MAIN)\r\n    public void onReceiveConversationEvent(EventOpenConversation event) {\r\n        tabLayout.setTabSelected(1);\r\n        Bundle bundle = new Bundle();\r\n        bundle.putString(ConversationFragment.KEY_CONTACTS, event.getBundleJson());\r\n        subFragmentManager.switch2Fragment(ConversationFragment.class, bundle);\r\n    }\r\n\r\n    /**\r\n     * 重写back按钮事件\r\n     */\r\n    @Override\r\n    public void popToBack() {\r\n        String fragmentTag = new AnnotationPresenter(ConversationFragment.class).findDefinedFragmentTag();\r\n        //会话正在展示的时候，切换页面\r\n        if (subFragmentManager.isShow(fragmentTag)) {\r\n            subFragmentManager.popFragment(fragmentTag);\r\n            subFragmentManager.switch2Fragment(ContactsRelationFragment.class);\r\n            tabLayout.setTabSelected(0);\r\n            return;\r\n        }\r\n        //响应已定义事件\r\n        super.popToBack();\r\n    }\r\n\r\n    @Override\r\n    protected boolean showTitleBar() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public void onDestroy() {\r\n        EventBus.getDefault().unregister(this);\r\n        super.onDestroy();\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/bytemiracle/project/message/ContactsFragment.java	(revision 337b224363adfed4a572661c2e124f6f873e3e92)
+++ app/src/main/java/com/bytemiracle/project/message/ContactsFragment.java	(date 1612358296790)
@@ -56,11 +56,11 @@
         tabLayout.addOnTabSelectedListener(new VerticalTabLayout.OnTabSelectedListener() {
             @Override
             public void onTabSelected(TabView tab, int position) {
-                if (position == TAB_INDEX_CONTACT_RELATION) {
-                    subFragmentManager.switch2Fragment(ContactsRelationFragment.class);
-                } else if (position == TAB_INDEX_CONVERSATION) {
-                    subFragmentManager.switch2Fragment(ConversationFragment.class);
-                }
+//                if (position == TAB_INDEX_CONTACT_RELATION) {
+//                    subFragmentManager.switch2Fragment(ContactsRelationFragment.class);
+//                } else if (position == TAB_INDEX_CONVERSATION) {
+//                    subFragmentManager.switch2Fragment(ConversationFragment.class);
+//                }
             }
 
             @Override
@@ -74,7 +74,7 @@
             }
         });
         //默认显示第一tab
-        tabLayout.setTabSelected(0);
+        tabLayout.setTabSelected(TAB_INDEX_CONTACT_RELATION);
         subFragmentManager.switch2Fragment(ContactsRelationFragment.class);
     }
 
@@ -85,7 +85,7 @@
      */
     @Subscribe(threadMode = ThreadMode.MAIN)
     public void onReceiveConversationEvent(EventOpenConversation event) {
-        tabLayout.setTabSelected(1);
+        tabLayout.setTabSelected(TAB_INDEX_CONVERSATION);
         Bundle bundle = new Bundle();
         bundle.putString(ConversationFragment.KEY_CONTACTS, event.getBundleJson());
         subFragmentManager.switch2Fragment(ConversationFragment.class, bundle);
@@ -101,7 +101,7 @@
         if (subFragmentManager.isShow(fragmentTag)) {
             subFragmentManager.popFragment(fragmentTag);
             subFragmentManager.switch2Fragment(ContactsRelationFragment.class);
-            tabLayout.setTabSelected(0);
+            tabLayout.setTabSelected(TAB_INDEX_CONTACT_RELATION);
             return;
         }
         //响应已定义事件
